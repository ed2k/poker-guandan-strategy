{"version":3,"sources":["Fade.tsx","strategy/models/Suite.ts","strategy/models/const.ts","Card.tsx","imgs/neko-40x40.png","common/cardUtils.ts","Divider.tsx","MyButton.tsx","CardsChooser.tsx","RankChooser.tsx","styles.tsx","Home.tsx","icons/close.svg","strategy/models/Rank.ts","strategy/models/Card.ts","SolutionVisualization.tsx","strategy/const.ts","strategy/models/Play.ts","strategy/iterate.ts","strategy/utils.ts","strategy/models/GameContext.ts","strategy/scorers.ts","strategy/strategy.ts","ResultPage.tsx","useRouterState.ts","useWindowSize.tsx","App.tsx","useCardState.ts","useResultState.ts","serviceWorker.ts","index.tsx"],"names":["delay","fn","requestAnimationFrame","Fade","_ref","children","style","timeout","restProps","fadeAnim","useState","Animated","Value","_jsx","Transition","onEntering","timing","toValue","duration","start","onExiting","View","opacity","defaultProps","appear","enter","mountOnEnter","unmountOnExit","SUIT_NORMAL","H","value","label","text","color","D","S","C","SUIT_JOKER","B","R","SUITS_JOKER","SUIT","SUITS","NEXT_SUIT","undefined","Q","K","A","BLACK_JOKER","RED_JOKER","NATURAL_RANK_MIN","NATURAL_RANK_MAX","NATURAL_RANKS","NATURAL_RANK","naturalRank","NATURAL_RANKS_WITHOUT_JOKERS","slice","length","styles","StyleSheet","create","card","width","height","backgroundColor","borderColor","borderWidth","borderRadius","cardLarge","cardStacked","marginRight","marginBottom","cardStackedLarge","cardLabel","fontFamily","fontSize","lineHeight","textAlign","marginTop","fontWeight","cardLabelLarge","cardCuteImage","position","left","top","cardCuteImageLarge","overlayWhenDisabled","right","bottom","Card","rank","suit","isStacked","disabled","large","rankDef","suitDef","_jsxs","Text","split","join","Image","source","uri","CardDeck","_ref2","cards","hands","stackedCardMargin","ScrollView","contentContainerStyle","flexWrap","flexDirection","padding","paddingRight","paddingBottom","map","index","hand","handID","handNode","cardID","maxWidth","ALL_CARDS_ONE_DECK","reduce","res","push","cardCompare","a","b","generateRandomHands","i","j","Math","floor","random","x","shuffle","sort","canIAddCard","cardToAdd","filter","divider","marginHorizontal","Divider","MyButton","titleStyle","title","TouchableOpacity","theme","background","button","paddingVertical","paddingHorizontal","alignItems","justifyContent","palette","useRankState","increase","decrease","defaultValue","arguments","setValue","useCallback","valueNow","useIncDecState","incRank","decRank","controlStyles","incDecButton","flex","minWidth","margin","actionButton","buttonTitle","buttonTitleSmall","ControlPanel","props","alignContent","onPress","randomCards","numberOfCards","clearCards","deleteLastCard","AddCardPanel","suits","cardsToDisplay","concat","_Fragment","canIAddThisCard","addCard","CardsChooser","windowSize","flexGrow","horizontal","RankChooser","setRank","Picker","selectedValue","onValueChange","itemValue","Number","isInteger","Error","assertNonJokerNaturalRank","parseInt","Item","commonStyles","container","borderBox","HomePage","navigation","handleSolutionCalcButton","navigate","Fragment","MemoedHomePage","React","memo","HomePageWrapper","_path","_path2","screenProps","_extends","Object","assign","bind","target","key","prototype","hasOwnProperty","call","apply","this","SvgClose","svgRef","titleId","xmlns","viewBox","ref","id","fill","d","ForwardRef","makeRank","natural","context","power","getOrder","cardToCardRaw","CloseWindowButton","onClose","Close","SolutionView","strategyResult","flexShrink","plans","score","hiddenMoreSolutions","plan","planIndex","plays","play","MemoedSolutionView","SolutionVisualization","result","DEBUG","MAX_PLANS","PlayType","NEXT_PLAY_TYPE","STRAIGHT_FLUSH","BOMB_N_TUPLE","PLATE","TUBE","STRAIGHT","PAIR","TRIPLE","ITERATOR_STATE_START","type","nextIteratorState","now","next","nextRank","console","assert","nextSuit","nextType","playType","iteratePlans","collectPlan","gameContext","iterateImp","cardsByRank","organize","game","debug","WILD_CARD","organized","forEach","isWildCard","takeCard","count","rankCards","taken","wildCards","wildCardsNeeded","takeCardBySuit","findIndex","splice","playCardsOfTheSameRank","n","nowRank","newCards","playRank","cardCount","playCardSequence","_ref3","_ref4","log","JSON","stringify","end","newCardsByRank","playPair","playTriple","playBomb4","playBomb5","playBomb6","playBomb7","playBomb8","playStraight","playTube","playPlate","PLAY_TYPE_FUNC","_ref6","newPlan","pairIndex","triplePlay","pairPlay","FULL_HOUSE","_ref5","nowSuit","_ref7","_PLAY_TYPE_FUNC$now$t","func","resultPlan","entries","_ref8","_","SINGLE","playRestOfCardsAsSingles","getUsualPowerRank","GameContext","constructor","mainRank","usualRank","handsScore","MAX_SCORE","heuristicScore","scoreByPlayType","linear","y","FOUR_JOKER","heuristicScorePlay","cap","values","sum","min","max","calc","rawCards","morePlans","scorer","rawCard","raw","parseCardRaw","scorerFunc","planCollector","makeAllBestPlansCollector","bestPlans","getBestPlans","bestPlanCollector","makeBestPlanCollector","bestPlan","getBestPlan","bestScore","currentScore","ResultPage","args1","status","status1","data","plans1","useQuery","async","args2","status2","plans2","enabled","goBack","millis","Promise","resolve","setTimeout","NOT_FOUND","NOT_FOUND_CONFIG","path","LARGE_SCREEN_LENGTH","calcWindowSize","Dimensions","get","absoluteChild","routes","Home","Result","AppNavigator","route","currentRoute","TransitionGroup","RouteComponent","useRouterState","providedRoutesConfig","history","routesConfig","getCurrentPath","pathNowRaw","location","pathname","startsWith","base","substring","endsWith","match","routeConfig","find","setRoute","useEffect","listen","action","window","document","routeToDispatch","replace","routeMatched","createBrowserRouterHook","process","defaultRoute","createHistory","App","cardStateProps","setCards","cardsNow","useCardState","resultProps","useResultState","setResult","size","setSize","handleWindowSizeChange","addEventListener","removeEventListener","useWindowSize","queryClient","QueryClient","EnhancedApp","QueryClientProvider","client","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","AppRegistry","registerComponent","runApplication","rootTag","getElementById","URL","href","origin","fetch","response","contentType","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","guidanceNode","parentNode","removeChild","removeWechatGuidance"],"mappings":"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","file":"static/js/main.1226c33c.chunk.js","sourcesContent":["import React, { useState, FunctionComponent } from 'react'\nimport { Animated, StyleProp, ViewStyle } from 'react-native'\nimport { Transition } from 'react-transition-group'\nimport { TransitionProps } from 'react-transition-group/Transition'\n\ninterface FadeProps extends TransitionProps {\n  style?: StyleProp<ViewStyle>\n  timeout: number\n}\n\nfunction delay(fn: () => void) {\n  return requestAnimationFrame(() => {\n    // current frame\n    requestAnimationFrame(() => {\n      // next frame, react updated dom\n      requestAnimationFrame(() => {\n        // the third frame, start animation in the first idle frame\n        fn()\n      })\n    })\n  })\n}\n\n// animation may be delayed by react rendering\n// keep components mounted for some extra time to ensure animation finishes before components are unmounted\nconst EXTRA_TIMEOUT = 300\n\nexport const Fade: FunctionComponent<FadeProps> = ({\n  children,\n  style,\n  timeout,\n  ...restProps\n}) => {\n  const [fadeAnim, ] = useState(new Animated.Value(0))\n\n  return (\n    <Transition\n      timeout={timeout + EXTRA_TIMEOUT}\n      onEntering={() => {\n        // start fading in from the next frame (react is rendering in current frame, so animation would be laggy if started immediately)\n        delay(() => {\n          Animated.timing(fadeAnim, { toValue: 1, duration: timeout }).start()\n        })\n      }}\n      onExiting={() => {\n        // start fading out after a delay\n        delay(() => {\n          Animated.timing(fadeAnim, {\n            toValue: 0,\n            duration: timeout,\n          }).start()\n        })\n      }}\n      {...restProps}\n    >\n      <Animated.View\n        style={[\n          {\n            opacity: fadeAnim,\n          },\n          style,\n        ]}\n      >\n        {children}\n      </Animated.View>\n    </Transition>\n  )\n}\nFade.defaultProps = {\n  appear: true,\n  enter: true,\n  mountOnEnter: true,\n  unmountOnExit: true,\n}\n","export type Suit = 'S' | 'C' | 'D' | 'H'\nexport type SuitRedJoker = 'R'\nexport type SuitBlackJoker = 'B'\nexport type SuitJoker = SuitRedJoker | SuitBlackJoker\nexport type AllSuit = Suit | SuitRedJoker | SuitBlackJoker\nexport type SuiteMetadata<S> = {\n  value: S\n  label: string\n  text: string\n  color: string\n}\nexport const SUIT_NORMAL: Record<Suit, SuiteMetadata<Suit>> = {\n  H: {\n    value: 'H',\n    label: '♥',\n    text: '♥',\n    color: 'red',\n  },\n  D: {\n    value: 'D',\n    label: '♦',\n    text: '♦',\n    color: 'red',\n  },\n  S: {\n    value: 'S',\n    label: '♠',\n    text: '♠',\n    color: 'black',\n  },\n  C: {\n    value: 'C',\n    label: '♣',\n    text: '♣',\n    color: 'black',\n  },\n} as const\nexport const SUIT_JOKER: Record<SuitJoker, SuiteMetadata<SuitJoker>> = {\n  B: {\n    // black joker\n    value: 'B',\n    label: '',\n    text: 'B',\n    color: 'black',\n  },\n  R: {\n    // red joker\n    value: 'R',\n    label: '',\n    text: 'R',\n    color: 'red',\n  },\n} as const\nexport const SUITS_JOKER = [SUIT_JOKER.B, SUIT_JOKER.R]\nexport const SUIT = {\n  ...SUIT_NORMAL,\n  ...SUIT_JOKER,\n}\nexport const SUITS = [\n  SUIT_NORMAL.H,\n  SUIT_NORMAL.S,\n  SUIT_NORMAL.C,\n  SUIT_NORMAL.D,\n]\nexport const SUIT_VALUES = ['S', 'C', 'D', 'H']\nexport function parseSuit(\n  suit: string,\n): [undefined, string] | [Suit, undefined] {\n  if (!SUIT_VALUES.includes(suit)) {\n    return [\n      undefined,\n      `Suit should be one of ${SUIT_VALUES}, but found ${suit}.`,\n    ]\n  }\n  return [suit as Suit, undefined]\n}\n\nconst NEXT_SUIT = {\n  S: 'C',\n  C: 'D',\n  D: 'H',\n  H: undefined,\n} as const\nexport const SUIT_START: Suit = 'S'\nexport function getNextSuit(suit: Suit): Suit | undefined {\n  return NEXT_SUIT[suit]\n}\n","import { AllSuit, parseSuit, Suit, SuitBlackJoker, SuitRedJoker } from './Suite'\n\nexport type tJ = 11\nexport const J = 11\nexport type tQ = 12\nexport const Q = 12\nexport type tK = 13\nexport const K = 13\nexport type tA = 1\nexport const A = 1\nexport type BlackJoker = 14\nexport const BLACK_JOKER = 14\nexport type RedJoker = 15\nexport const RED_JOKER = 15\nexport type NaturalRank =\n  | tA\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | tJ\n  | tQ\n  | tK\n  | BlackJoker\n  | RedJoker\nexport const NATURAL_RANK_MIN = A\nexport const NATURAL_RANK_MAX = RED_JOKER\nexport type NaturalRankWithoutJokers = Exclude<\n  NaturalRank,\n  BlackJoker | RedJoker\n>\nexport const NATURAL_RANKS = [\n  A,\n  2,\n  3,\n  4,\n  5,\n  6,\n  7,\n  8,\n  9,\n  10,\n  J,\n  Q,\n  K,\n  BLACK_JOKER,\n  RED_JOKER,\n] as const\ninterface RankMetadata {\n  label: string\n  text: string\n  naturalRank: NaturalRank\n}\nexport const NATURAL_RANK: Record<NaturalRank, RankMetadata> = {\n  [A]: { label: 'A', text: 'A', naturalRank: A },\n  2: { label: '2', text: '2', naturalRank: 2 },\n  3: { label: '3', text: '3', naturalRank: 3 },\n  4: { label: '4', text: '4', naturalRank: 4 },\n  5: { label: '5', text: '5', naturalRank: 5 },\n  6: { label: '6', text: '6', naturalRank: 6 },\n  7: { label: '7', text: '7', naturalRank: 7 },\n  8: { label: '8', text: '8', naturalRank: 8 },\n  9: { label: '9', text: '9', naturalRank: 9 },\n  10: { label: '10', text: '10', naturalRank: 10 },\n  [J]: { label: 'J', text: 'J', naturalRank: J },\n  [Q]: { label: 'Q', text: 'Q', naturalRank: Q },\n  [K]: { label: 'K', text: 'K', naturalRank: K },\n  [BLACK_JOKER]: { label: 'Joker', text: 'J', naturalRank: BLACK_JOKER },\n  [RED_JOKER]: { label: 'Joker', text: 'J', naturalRank: RED_JOKER },\n} as const\nexport function nextRank(rank: NaturalRank): NaturalRank | undefined {\n  const next = rank + 1\n  if (next > RED_JOKER) {\n    return undefined\n  }\n  return next as NaturalRank\n}\nexport const NATURAL_RANKS_WITHOUT_JOKERS: NaturalRankWithoutJokers[] = NATURAL_RANKS.slice(\n  0,\n  NATURAL_RANKS.length - 2,\n) as any\n/**\n * There are 15 different cards. In one game play, they will have a power\n * rank depending on main rank.\n */\nexport type PowerRank =\n  | 0\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\nexport const POWER_RANK_MAX = 14\nexport type CardRaw =\n  | {\n      // Natural rank, from [A, K] maps to [1, 13]\n      // 14 is kept for A's order rank.\n      // Black Joker is 15, Red Joker is 16\n      rank: NaturalRankWithoutJokers\n      suit: Suit\n    }\n  | {\n      rank: BlackJoker\n      suit: SuitBlackJoker\n    }\n  | {\n      rank: RedJoker\n      suit: SuitRedJoker\n    }\nexport type CardRawLoose = { rank: NaturalRank; suit: AllSuit }\n\nexport function parseRawCards(text: string): CardRaw[] {\n  const cards: CardRaw[] = []\n  for (let i = 0; i < text.length; ) {\n    if (text[i] === 'R') {\n      if (text[i + 1] !== 'J') {\n        throw new Error(\n          `R should be followed by J -- red joker in ${text}, position ${i}`,\n        )\n      }\n      cards.push({ rank: RED_JOKER, suit: 'R' })\n      i += 2\n    } else if (text[i] === 'B') {\n      if (text[i + 1] !== 'J') {\n        throw new Error(\n          `B should be followed by J -- black joker in ${text}, position ${i}`,\n        )\n      }\n      cards.push({ rank: BLACK_JOKER, suit: 'B' })\n      i += 2\n    } else {\n      const parsedSuit = parseSuit(text[i])\n      const [ , error] = parsedSuit\n      if (parsedSuit[1] != null) {\n        throw new Error(`${error}, in ${text}, position ${i}`)\n      }\n      const [suit] = parsedSuit\n      if (text[i + 1] === '1' && text[i + 2] === '0') {\n        cards.push({ rank: 10, suit })\n        i += 3\n      } else if (text[i + 1] === 'A') {\n        cards.push({ rank: A, suit })\n        i += 2\n      } else if (text[i + 1] === 'J') {\n        cards.push({ rank: J, suit })\n        i += 2\n      } else if (text[i + 1] === 'Q') {\n        cards.push({ rank: Q, suit })\n        i += 2\n      } else if (text[i + 1] === 'K') {\n        cards.push({ rank: K, suit })\n        i += 2\n      } else {\n        const rank = text[i + 1].charCodeAt(0) - '0'.charCodeAt(0)\n        if (rank < 2 || rank > 9) {\n          throw new Error(\n            `Rank should be in range [2, 9], but found ${rank}, in ${text}, position ${\n              i + 1\n            }`,\n          )\n        }\n        cards.push({ rank: rank as NaturalRankWithoutJokers, suit })\n        i += 2\n      }\n    }\n  }\n  return cards\n}\n","import React from 'react'\nimport {\n  Image,\n  ScrollView,\n  StyleProp,\n  StyleSheet,\n  Text,\n  View,\n  ViewStyle,\n} from 'react-native'\nimport nekoImg from './imgs/neko-40x40.png'\nimport {\n  CardRaw,\n  CardRawLoose,\n  NATURAL_RANK,\n} from './strategy/models/const'\nimport { Suit, SUIT } from './strategy/models/Suite'\n\nconst STACKED_CARD_MARGIN = 52\nconst STACKED_CARD_MARGIN_LARGE = 68\n\nconst styles = StyleSheet.create({\n  card: {\n    width: 74,\n    height: 100,\n    backgroundColor: 'white',\n    borderColor: 'black',\n    borderWidth: 2,\n    borderRadius: 4,\n  },\n  cardLarge: {\n    width: 100,\n    height: 134,\n  },\n  cardStacked: {\n    marginRight: -STACKED_CARD_MARGIN,\n    marginBottom: -STACKED_CARD_MARGIN,\n  },\n  cardStackedLarge: {\n    marginRight: -STACKED_CARD_MARGIN_LARGE,\n    marginBottom: -STACKED_CARD_MARGIN_LARGE,\n  },\n  cardLabel: {\n    fontFamily: 'monospace',\n    fontSize: 16,\n    lineHeight: 16,\n    textAlign: 'center',\n    width: 20,\n    marginTop: 4,\n    fontWeight: 'bold',\n  },\n  cardLabelLarge: {\n    fontSize: 24,\n    lineHeight: 24,\n    width: 30,\n  },\n  cardCuteImage: {\n    position: 'absolute',\n    left: 'calc(50% - 20px)',\n    top: 'calc(50% - 20px)',\n    width: 40,\n    height: 40,\n  },\n  cardCuteImageLarge: {\n    width: 56,\n    height: 56,\n    left: 'calc(50% - 28px)',\n    top: 'calc(50% - 28px)',\n  },\n  overlayWhenDisabled: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n})\n\nexport function Card({\n  rank,\n  suit,\n  isStacked,\n  disabled,\n  style,\n  large,\n}: CardRawLoose & {\n  isStacked?: boolean\n  disabled?: boolean\n  style?: StyleProp<ViewStyle>\n  large?: boolean\n}) {\n  const rankDef = NATURAL_RANK[rank]\n  const suitDef = SUIT[suit as Suit] // TODO: fix type force cast\n  return (\n    <View\n      style={[\n        styles.card,\n        large && styles.cardLarge,\n        isStacked && styles.cardStacked,\n        isStacked && large && styles.cardStackedLarge,\n        style,\n      ]}\n    >\n      <Text\n        style={[\n          styles.cardLabel,\n          large && styles.cardLabelLarge,\n          { color: suitDef.color },\n        ]}\n      >\n        {rankDef.label === '10'\n          ? rankDef.label\n          : rankDef.label.split('').join('\\n')}\n        {'\\n'}\n        {suitDef.label}\n      </Text>\n      <Image\n        source={{ uri: nekoImg }}\n        style={[styles.cardCuteImage, large && styles.cardCuteImageLarge]}\n      />\n      {disabled && <View style={styles.overlayWhenDisabled} />}\n    </View>\n  )\n}\n\nconst HAND_MARGIN = 13\nconst CONTAINER_PADDING = 0\n\ninterface CardDeckProps {\n  cards?: CardRaw[]\n  hands?: CardRaw[][]\n  style?: StyleProp<ViewStyle>\n  large?: boolean\n}\nexport const CardDeck: React.FunctionComponent<CardDeckProps> = ({\n  cards,\n  hands,\n  style,\n  large,\n}) => {\n  const stackedCardMargin = large\n    ? STACKED_CARD_MARGIN_LARGE\n    : STACKED_CARD_MARGIN\n\n  return (\n    <ScrollView\n      style={style}\n      contentContainerStyle={{\n        flexWrap: 'wrap',\n        flexDirection: 'row',\n        padding: CONTAINER_PADDING,\n        paddingRight: stackedCardMargin + CONTAINER_PADDING, // cancel margin of hands\n        paddingBottom: stackedCardMargin + CONTAINER_PADDING,\n      }}\n    >\n      {!!cards &&\n        cards.map((card, index) => (\n          <Card\n            key={card.rank + card.suit + index}\n            {...card}\n            isStacked\n            large={large}\n          />\n        ))}\n      {!!hands &&\n        hands.map((hand, handID) => {\n          const handNode = hand.map((card, cardID) => (\n            <Card\n              key={card.rank + card.suit + cardID}\n              {...card}\n              isStacked\n              large={large}\n            />\n          ))\n\n          if (handID > 0) {\n            // no wrapping\n            return (\n              <View\n                style={{\n                  flexDirection: 'row',\n                  flexWrap: 'nowrap',\n                  marginRight: HAND_MARGIN,\n                }}\n                key={handID}\n              >\n                {handNode}\n              </View>\n            )\n          } else {\n            // initial hand can be long, allow wrapping as normal\n            return (\n              <View\n                style={{\n                  flexDirection: 'row',\n                  flexWrap: 'wrap',\n                  marginRight: HAND_MARGIN,\n                  maxWidth: '100%', // set max width to enable wrapping\n                }}\n                key={handID}\n              >\n                {handNode}\n              </View>\n            )\n          }\n        })}\n    </ScrollView>\n  )\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAQAAAAm93DmAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfjAhUINB2XPPnXAAAEaElEQVRIx52WWWxUZRTHf3e2TmfrdJlaSWlRlkK6AA1BiCQNWzRIUBACwS1Go2LE0JASwaSVh8qDxroEhBcJFBMTbNQGFRIftAqoIBpKY9vU0EUK0xY6bYdZ78zxodLZ7nTh/3bv+c7vnO+c8333wv0olwp0M3EoZBMZaa0KB/mFnJkAd+BhW1rrKr1b6aV4JsDXHWJpZYGmLcdwdqvMGqRM21W7Es71bCmjFpuG7cWV62qwmrDMJMP63fKPLA3yhjHZsjynt1nuyJIA67VdDZpvc208TJ3ppZrbV2jHRTYWwIuP/c/O3kCQLCO50wfqsDsI4aSwaPiEy5eX77SaDeAPDQcHsjv4kJWYdem6rAXUK47f2M5tqtg3byEF2DAihDO93KKV83xFB5Rg5e506mdgQ0bXajkuNyQqWopIjxyVR/3GM1RNPd5ZHJx/56gMy1QakPekyE0N1slwLuXkOvWPKWHjisrPsiLIYZzpcNmceira9//yoLSLOwHgl0tyMwnaIWtUjmjOKwYOrY30TSxtEpdsE1+c8xdikxcknIJcHuKtWC1jRX1szq53dYUTj0bCWBJqbqOYwpQuLKDe+EA1q1KaofxQnxA5KJfFLaoEREQVv4hEZFD8ml3fKzSRmQjcXO7v0VjcJPslJEekJmWr8bomxSOsid+yjk2Pm4sSIrj5Hcihidf4iJI0Z3RcC1ntYKMS96bA2vZ9UtRjsklCEpW3BdknYRG5LuckkibHE6K/SNZ4bwEKXbOSLz8HrRzCyRnycRPEwHE6WZsmxzKyi4cKGLkHzHdZks/6RsY4Thd1VLCbXRRymnfQpwEWkGcfirt/nlwV9mpspFmWyYCIXJC5skJOJkxlogZlsY+qWFN8PjWgEbecMFcAJzbe57nkyYiTD1+YQAzoHvAOaSwrYi0f0EcjD7KUydTPkIfBGPDfwe5rGst07EXhCb7kzSk+IX/h6eLWxGMGNLya5vbrlQZpFnXSeycoW4TaxBBVDw23yf3qguTfojIRmMHne6bII50C8rxwOHWiluX1NN8XsFHs7SxKKaseXll8988Z41pknocd2q0yUfeIf7ofgHH9KKVjVKc9QJg5UDry9aRXVUxBOSVzh9iNkUlkYHtu9x7pTDNE9xSRq/Ky2L08g5IISE42SmegKlByji4cZGsG93KJjzlGDn2BsU/oS84oWZmG/APY2ck3zKeCcopwYATCeOjmKq10E6CRUjba+mdzcSqgJdOZw2VG1R2GCvaOqS3OrMxsvRlUv++Ox++o+tTsppYeKjGm7lADqFMMn/Fdf+Ts+Z0FZrUzVD0QwooJCOElK3S6t6RJ9bQ2lFaaIiDJ7rGS5lNJMS7mKFuVrOgNbuqWWAzeUfqQCTcFhSKzPaRGr+vnPG38VXp/oo1Rhujnb9pQ44EL2cwiCnBiwoYBK1HAhDmlbRECKIgSJChRvHi5TQ8tfEuQpKbrMJFBBhb02NEBFo3fDJVhBAjgJ8xdQoQI3zP+B8PxaLIJz6YTAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAyLTIxVDA4OjUyOjI5KzAwOjAwIu73FAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMi0yMVQwODo1MjoyOSswMDowMFOzT6gAAAAASUVORK5CYII=\"","import {\n  BLACK_JOKER,\n  CardRaw,\n  NATURAL_RANKS,\n  RED_JOKER,\n} from '../strategy/models/const'\nimport { SUITS } from '../strategy/models/Suite'\n\nconst ALL_CARDS_ONE_DECK: CardRaw[] = NATURAL_RANKS.map((rank): CardRaw[] =>\n  rank === BLACK_JOKER\n    ? [{ rank, suit: 'B' }]\n    : rank === RED_JOKER\n    ? [{ rank, suit: 'R' }]\n    : SUITS.map((suit) => ({\n        rank,\n        suit: suit.value,\n      })),\n).reduce((res, cards) => {\n  res.push(...cards)\n  return res\n}, [])\n\n/**\n * reference: https://stackoverflow.com/a/6274381\n * Shuffles array in place.\n * @param {Array} a items An array containing the items.\n */\nfunction shuffle<T>(a: T[]): T[] {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1))\n    const x = a[i]\n    a[i] = a[j]\n    a[j] = x\n  }\n  return a\n}\n\nfunction cardCompare(a: CardRaw, b: CardRaw): number {\n  if (a.rank !== b.rank) {\n    return a.rank - b.rank\n  }\n\n  return a.suit < b.suit ? -1 : a.suit === b.suit ? 0 : 1\n}\n\nfunction cardEqual(a: CardRaw, b: CardRaw): boolean {\n  return cardCompare(a, b) === 0\n}\n\nfunction sortCards(a: CardRaw[]): CardRaw[] {\n  return a.sort(cardCompare)\n}\n\nexport function generateRandomHands(): CardRaw[] {\n  return sortCards(\n    shuffle([...ALL_CARDS_ONE_DECK, ...ALL_CARDS_ONE_DECK]).slice(0, 27),\n  )\n}\n\nexport function canIAddCard(cards: CardRaw[], cardToAdd: CardRaw): boolean {\n  return cards.filter((card) => cardEqual(card, cardToAdd)).length < 2\n}\n","import React from 'react'\nimport { View, StyleSheet } from 'react-native'\n\nconst styles = StyleSheet.create({\n  divider: {\n    height: 2, // avoid floating error\n    backgroundColor: 'black',\n    marginHorizontal: 10,\n  },\n})\n\nexport function Divider() {\n  return <View style={styles.divider} />\n}\n","import React, { FunctionComponent, ReactNode } from 'react'\nimport {\n  Text,\n  TouchableOpacity,\n  TouchableOpacityProps,\n  StyleProp,\n  TextStyle,\n} from 'react-native'\nimport { theme } from './CardsChooser'\n\ninterface MyButtonProps extends TouchableOpacityProps {\n  title: ReactNode\n  titleStyle?: StyleProp<TextStyle>\n}\n\nexport const MyButton: FunctionComponent<MyButtonProps> = ({\n  style,\n  titleStyle,\n  title,\n  disabled,\n  ...restProps\n}) => (\n  <TouchableOpacity\n    style={[\n      {\n        backgroundColor: disabled\n          ? theme.disabled.background\n          : theme.button.background,\n        borderRadius: 2,\n        paddingVertical: 8,\n        paddingHorizontal: 4,\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      style,\n    ]}\n    disabled={disabled}\n    {...restProps}\n  >\n    <Text\n      style={[\n        {\n          color: disabled ? theme.disabled.text : 'white',\n          textAlign: 'center',\n        },\n        titleStyle,\n      ]}\n    >\n      {title}\n    </Text>\n  </TouchableOpacity>\n)\n","import React, { useCallback, useState } from 'react'\nimport {\n  ScrollView,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n} from 'react-native'\nimport { Card, CardDeck } from './Card'\nimport { canIAddCard } from './common/cardUtils'\nimport { CardState } from './common/types'\nimport { Divider } from './Divider'\nimport { MyButton } from './MyButton'\nimport {\n  A,\n  BLACK_JOKER,\n  CardRaw,\n  NaturalRank,\n  NATURAL_RANK_MAX,\n  NATURAL_RANK_MIN,\n  RED_JOKER,\n} from './strategy/models/const'\nimport {\n  AllSuit,\n  SuiteMetadata,\n  SUITS,\n  SUITS_JOKER,\n} from './strategy/models/Suite'\nimport { WindowSize } from './useWindowSize'\n\nconst palette = {\n  blue: 'rgb(33, 150, 243)',\n  grey: {\n    0: 'black',\n    4: 'rgb(161, 161, 161)',\n    6: 'rgb(223, 223, 223)',\n    8: 'white',\n  },\n}\n\nexport const theme = {\n  disabled: {\n    background: palette.grey[6],\n    text: palette.grey[4],\n  },\n  button: {\n    background: palette.blue,\n  },\n}\n\nfunction useRankState() {\n  const { value, increase, decrease } = useIncDecState(A)\n  return {\n    rank: value as NaturalRank,\n    incRank: increase,\n    decRank: decrease,\n  }\n}\n\nfunction useIncDecState(defaultValue = 0) {\n  const [value, setValue] = useState(defaultValue)\n  const increase = useCallback(() => setValue((valueNow) => valueNow + 1), [\n    setValue,\n  ])\n  const decrease = useCallback(() => setValue((valueNow) => valueNow - 1), [\n    setValue,\n  ])\n\n  return {\n    value,\n    increase,\n    decrease,\n  }\n}\n\nconst controlStyles = StyleSheet.create({\n  incDecButton: {\n    flex: 2,\n    minWidth: 80,\n    maxWidth: 200,\n    margin: 6,\n  },\n  actionButton: {\n    flex: 1,\n    minWidth: 80,\n    maxWidth: 150,\n    margin: 6,\n  },\n  buttonTitle: {\n    fontSize: 20,\n  },\n  buttonTitleSmall: {\n    fontSize: 20,\n  },\n})\ninterface ControlPanelProps {\n  decRank: () => void\n  incRank: () => void\n  clearCards: () => void\n  randomCards: () => void\n  deleteLastCard: () => void\n  rank: NaturalRank\n  numberOfCards: number\n}\nconst ControlPanel: React.FunctionComponent<ControlPanelProps> = (props) => (\n  <View>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignContent: 'center',\n      }}\n    >\n      <MyButton\n        onPress={props.decRank}\n        disabled={props.rank <= NATURAL_RANK_MIN}\n        title=\"<\"\n        style={controlStyles.incDecButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n      <MyButton\n        onPress={props.incRank}\n        title=\">\"\n        disabled={props.rank >= NATURAL_RANK_MAX}\n        style={controlStyles.incDecButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n    </View>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignContent: 'center',\n      }}\n    >\n      <MyButton\n        onPress={props.randomCards}\n        title=\"随机发牌\"\n        disabled={props.numberOfCards > 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitleSmall}\n      />\n      <MyButton\n        onPress={props.clearCards}\n        title=\"清除\"\n        disabled={props.numberOfCards === 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n      <MyButton\n        onPress={props.deleteLastCard}\n        title=\"删除\"\n        disabled={props.numberOfCards === 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n    </View>\n  </View>\n)\n\ninterface AddCardPanelProps {\n  cards: CardRaw[]\n  addCard: (card: CardRaw) => void\n  rank: NaturalRank\n  large?: boolean\n}\nconst AddCardPanel: React.FunctionComponent<AddCardPanelProps> = (props) => {\n  const suits: SuiteMetadata<AllSuit>[] =\n    props.rank === BLACK_JOKER || props.rank === RED_JOKER ? SUITS_JOKER : SUITS\n  const cardsToDisplay = suits.concat(suits, suits)\n\n  return (\n    <>\n      {cardsToDisplay.map((suit: SuiteMetadata<AllSuit>) => {\n        const card = {\n          suit: suit.value,\n          rank: props.rank,\n        } as CardRaw\n        const canIAddThisCard = canIAddCard(props.cards, card)\n\n        return (\n          <TouchableOpacity\n            key={suit.value}\n            onPress={() => props.addCard(card)}\n            disabled={!canIAddThisCard}\n          >\n            <Card\n              suit={suit.value}\n              rank={props.rank}\n              disabled={!canIAddThisCard}\n              style={{ marginRight: -36, marginBottom: 5 /* give room to show horizontal scroll bar */}} \n              large={props.large}\n            />\n          </TouchableOpacity>\n        )\n      })}\n    </>\n  )\n}\n\nexport function CardsChooser({\n  cards,\n  addCard,\n  clearCards,\n  randomCards,\n  deleteLastCard,\n  windowSize,\n}: CardState & {\n  windowSize: WindowSize\n}) {\n  const { rank, incRank, decRank } = useRankState()\n\n  return (\n    <View style={{ flex: 1 }}>\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <View style={{ flex: 1, alignItems: 'flex-start', justifyContent: 'flex-start' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <View style={{ flex: 1, alignItems: 'flex-end', justifyContent: 'flex-end' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <Divider />\n      <Text\n        style={{ fontSize: 14, margin: 4 }}\n      >{`点击扑克牌添加，目前已有${cards.length}张牌`}</Text>\n      <ScrollView\n        style={{\n          height: windowSize === 'SMALL' ? 110 : 150,\n          flexGrow: 0,\n        }}\n        contentContainerStyle={{\n          flex: 1,\n          justifyContent: 'center',\n          // flexWrap: 'wrap',\n          // flexDirection: 'row',\n          // padding: 0,\n          // paddingRight: 52, // cancel margin of hands\n          // paddingBottom: 52,\n        }}\n        horizontal\n      >\n        <AddCardPanel\n          cards={cards}\n          addCard={addCard}\n          rank={rank}\n          large={windowSize === 'BIG'}\n        />\n      </ScrollView>\n      <ControlPanel\n        numberOfCards={cards.length}\n        clearCards={clearCards}\n        randomCards={randomCards}\n        deleteLastCard={deleteLastCard}\n        rank={rank}\n        incRank={incRank}\n        decRank={decRank}\n      />\n    </View>\n  )\n}\n","import React from 'react'\nimport { View, Text, Picker } from 'react-native'\nimport { RankState } from './common/types'\nimport { SUIT } from './strategy/models/Suite'\nimport {\n  BLACK_JOKER,\n  NaturalRankWithoutJokers,\n  NATURAL_RANK,\n  NATURAL_RANKS_WITHOUT_JOKERS,\n} from './strategy/models/const'\n\nexport function RankChooser({ rank, setRank }: RankState) {\n  return (\n    <View\n      style={{\n        flexDirection: 'row',\n      }}\n    >\n      <Text style={{ fontSize: 22, marginHorizontal: 6 }}>\n        当前打\n        <Picker\n          selectedValue={rank}\n          onValueChange={(itemValue) =>\n            setRank(assertNonJokerNaturalRank(parseInt(itemValue, 10)))\n          }\n        >\n          {NATURAL_RANKS_WITHOUT_JOKERS.map((rank) => (\n            <Picker.Item\n              key={rank}\n              label={NATURAL_RANK[rank].label}\n              value={rank}\n            />\n          ))}\n        </Picker>{' '}\n        <Text style={{ color: SUIT.H.color }}>\n          {SUIT.H.label}\n          {NATURAL_RANK[rank].label}\n        </Text>\n        是百搭\n      </Text>\n    </View>\n  )\n}\n\nfunction assertNonJokerNaturalRank(rank: number): NaturalRankWithoutJokers {\n  if (!Number.isInteger(rank) || rank <= 0 || rank >= BLACK_JOKER) {\n    throw new Error(`rank ${rank} is not valid non-joker natural rank`)\n  }\n  return rank as NaturalRankWithoutJokers\n}\n","import { StyleSheet } from 'react-native';\n\nexport const commonStyles = StyleSheet.create({\n  container: {\n    padding: 10,\n  },\n  borderBox: {\n    borderWidth: 2,\n    borderColor: 'black',\n  },\n});\n","import React, { Fragment, useCallback } from 'react'\nimport { View } from 'react-native'\nimport { CardsChooser } from './CardsChooser'\nimport { AppState, NavigationProps } from './common/types'\nimport { Divider } from './Divider'\nimport { MyButton } from './MyButton'\nimport { RankChooser } from './RankChooser'\nimport { commonStyles } from './styles'\n\ninterface StatelessHomePageProps\n  extends Pick<\n      AppState,\n      | 'rank'\n      | 'setRank'\n      | 'cards'\n      | 'clearCards'\n      | 'addCard'\n      | 'randomCards'\n      | 'deleteLastCard'\n      | 'windowSize'\n    >,\n    Pick<NavigationProps, 'navigation'> {}\nconst HomePage: React.FunctionComponent<StatelessHomePageProps> = ({\n  rank,\n  setRank,\n  cards,\n  clearCards,\n  addCard,\n  randomCards,\n  deleteLastCard,\n  navigation,\n  windowSize,\n}) => {\n  const handleSolutionCalcButton = useCallback(() => {\n    navigation.navigate('Result')\n  }, [])\n\n  return (\n    <Fragment>\n      <View\n        style={[\n          commonStyles.container,\n          {\n            flexDirection: 'row',\n            height: 40,\n            justifyContent: 'center',\n            alignItems: 'center',\n          },\n        ]}\n      >\n        <RankChooser rank={rank} setRank={setRank} />\n      </View>\n      <Divider />\n      <View\n        style={{\n          flex: 1,\n        }}\n      >\n        <CardsChooser\n          cards={cards}\n          addCard={addCard}\n          clearCards={clearCards}\n          randomCards={randomCards}\n          deleteLastCard={deleteLastCard}\n          windowSize={windowSize}\n        />\n      </View>\n      <View\n        style={[\n          commonStyles.container,\n          {\n            justifyContent: 'center',\n            padding: 6,\n          },\n        ]}\n      >\n        {(() => {\n          return (\n            <MyButton\n              title={'开始拆牌'}\n              onPress={handleSolutionCalcButton}\n              style={{\n                height: 60,\n              }}\n              titleStyle={{\n                fontSize: 28,\n              }}\n            />\n          )\n        })()}\n      </View>\n    </Fragment>\n  )\n}\n\nconst MemoedHomePage = React.memo(HomePage)\n\nfunction HomePageWrapper({ screenProps, navigation }: NavigationProps) {\n  return <MemoedHomePage {...screenProps} navigation={navigation} />\n}\n\nexport default HomePageWrapper\n","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgClose(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.2c0e4ee3.svg\";\nexport { ForwardRef as ReactComponent };","import { GameContext } from './GameContext'\nimport { NaturalRank, PowerRank } from './const'\n\nexport interface Rank {\n  natural: NaturalRank\n  power: PowerRank\n}\n\nexport function makeRank({\n  natural,\n  context,\n}: {\n  natural: NaturalRank\n  context: GameContext\n}): Rank {\n  return {\n    natural: natural,\n    power: context.getOrder(natural),\n  }\n}\n","import { CardRaw, CardRawLoose, NATURAL_RANK } from './const'\nimport { GameContext } from './GameContext'\nimport { makeRank, Rank } from './Rank'\nimport { AllSuit, SUIT } from './Suite'\n\nexport type Card = {\n  rank: Rank\n  suit: AllSuit\n}\n\nexport function parseCardRaw(raw: CardRaw, context: GameContext): Card {\n  return {\n    rank: makeRank({ natural: raw.rank, context }),\n    suit: raw.suit,\n  }\n}\n\nexport function cardToText(card: Card): string {\n  return SUIT[card.suit].text + NATURAL_RANK[card.rank.natural].text\n}\n\nexport function cardRawToText(card: CardRaw): string {\n  return SUIT[card.suit].text + NATURAL_RANK[card.rank].text\n}\n\nexport function cardToCardRaw(card: Card): CardRaw {\n  const loose: CardRawLoose = {\n    rank: card.rank.natural,\n    suit: card.suit,\n  }\n  return loose as CardRaw\n}\n","import React, { memo } from 'react'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableOpacity,\n  StyleProp,\n  ViewStyle,\n} from 'react-native'\nimport { Divider } from './Divider'\nimport { CardDeck } from './Card'\nimport { commonStyles } from './styles'\nimport { StrategyResult } from './useResultState'\nimport { ReactComponent as Close } from './icons/close.svg'\nimport { WindowSize } from './useWindowSize'\nimport { NaturalRankWithoutJokers } from './strategy/models/const'\nimport { cardToCardRaw } from './strategy/models/Card'\n\ninterface SolutionVisualizationProps {\n  strategyResult: StrategyResult[]\n  rank: NaturalRankWithoutJokers\n  windowSize: WindowSize\n  onClose: () => void\n}\n\ninterface WindowSizeToggleProps {\n  onClose: () => void\n  style: StyleProp<ViewStyle>\n}\nconst CloseWindowButton: React.FunctionComponent<WindowSizeToggleProps> = (\n  props,\n) => (\n  <TouchableOpacity\n    style={[\n      {\n        width: 40,\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n      },\n      props.style,\n    ]}\n    onPress={props.onClose}\n  >\n    <Close />\n  </TouchableOpacity>\n)\n\nconst MAX_SOLUTIONS = 5\n\ninterface SolutionViewProps {\n  rank: NaturalRankWithoutJokers\n  strategyResult: StrategyResult\n  windowSize: WindowSize\n}\nconst SolutionView: React.FunctionComponent<SolutionViewProps> = ({\n  strategyResult,\n  rank,\n  windowSize,\n}) => (\n  <>\n    {strategyResult &&\n      (strategyResult === 'loading' ? (\n        <Text\n          style={{\n            fontSize: 20,\n          }}\n        >\n          计算中\n        </Text>\n      ) : (\n        <>\n          <View\n            style={{\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <Text\n              style={{ fontSize: 18, flexShrink: 0, marginRight: 20 }}\n            >{`分数${strategyResult.plans[0].score}`}</Text>\n          </View>\n          <View>\n            {(() => {\n              const solutionsCount = strategyResult.plans.length\n              const hiddenMoreSolutions = solutionsCount - MAX_SOLUTIONS\n              return (\n                <>\n                  {strategyResult.plans\n                    .slice(0, MAX_SOLUTIONS)\n                    .map((plan, planIndex) => (\n                      <CardDeck\n                        key={planIndex}\n                        hands={plan.plays.map((play) =>\n                          play.cards.map(cardToCardRaw),\n                        )}\n                        style={{\n                          margin: 6,\n                        }}\n                        large={windowSize === 'BIG'}\n                      />\n                    ))}\n                  {hiddenMoreSolutions > 0 &&\n                    `还有${hiddenMoreSolutions}种方案`}\n                </>\n              )\n            })()}\n          </View>\n        </>\n      ))}\n  </>\n)\nconst MemoedSolutionView = memo(SolutionView)\n\nconst SolutionVisualization: React.FunctionComponent<SolutionVisualizationProps> = ({\n  strategyResult,\n  rank,\n  onClose,\n  windowSize,\n}) => (\n  <>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        alignContent: 'center',\n      }}\n    >\n      <View style={{ flex: 1 }}>\n        <Text\n          style={{\n            fontSize: 20,\n            padding: 4,\n            textAlign: 'center',\n          }}\n        >\n          拆牌策略计算结果\n        </Text>\n      </View>\n      {/* <View style={{ width: 2, backgroundColor: 'black' }} /> */}\n      <CloseWindowButton\n        onClose={onClose}\n        style={{\n          // to the right and centered\n          position: 'absolute',\n          right: 0,\n          height: '100%',\n        }}\n      />\n    </View>\n    <Divider />\n    <ScrollView\n      style={[\n        commonStyles.container,\n        {\n          flex: 2,\n        },\n      ]}\n    >\n      {strategyResult.map((result) => (\n        <MemoedSolutionView\n          strategyResult={result}\n          rank={rank}\n          windowSize={windowSize}\n        />\n      ))}\n    </ScrollView>\n  </>\n)\n\nexport default React.memo(SolutionVisualization)\n","export const DEBUG = false\nexport const MAX_PLANS = 10000000\n","import { Card, cardToText } from './Card'\nimport { NaturalRank, PowerRank } from './const'\n\nexport enum PlayType {\n  UNKNOWN = 0,\n  SINGLE,\n  PAIR,\n  TRIPLE,\n  FULL_HOUSE, // like 555,22\n  STRAIGHT, // like 12345\n  TUBE, // like 33,44,55\n  PLATE, // like 333,444\n  // === The following is a bomb ===\n  STRAIGHT_FLUSH, // like 34567 all hearts\n  BOMB_N_TUPLE, // like 4444, 55555, 88888888\n  FOUR_JOKER,\n}\n\nexport type PlayRankBombNTuple = {\n  type: PlayType.BOMB_N_TUPLE\n  rank: PowerRank\n  cardCount: number\n}\n\nexport type PlayRankFourJoker = {\n  type: PlayType.FOUR_JOKER\n}\n\nexport type PlayRankNormal = {\n  type: PlayType.FULL_HOUSE | PlayType.PAIR | PlayType.SINGLE | PlayType.TRIPLE\n  rank: PowerRank\n}\n\nexport type PlayRankNatural = {\n  type:\n    | PlayType.STRAIGHT_FLUSH\n    | PlayType.STRAIGHT\n    | PlayType.TUBE\n    | PlayType.PLATE\n  rank: NaturalRank\n}\n\nexport type PlayRank =\n  | PlayRankNormal\n  | PlayRankNatural\n  | PlayRankBombNTuple\n  | PlayRankFourJoker\n\nexport type Play = {\n  playRank: PlayRank\n  cards: Card[]\n}\n\nexport function playToText(play: Play): string {\n  return play.cards.map(cardToText).join('')\n}\n","import { DEBUG } from './const'\nimport { Card } from './models/Card'\nimport { A, K, NaturalRank, nextRank } from './models/const'\nimport { GameContext } from './models/GameContext'\nimport { Plan } from './models/Plan'\nimport {\n  Play,\n  PlayRankBombNTuple,\n  PlayRankNormal,\n  PlayType,\n} from './models/Play'\nimport { getNextSuit, Suit, SUIT_START } from './models/Suite'\n\nconst NEXT_PLAY_TYPE: { [T in PlayType]?: PlayType } = {\n  [PlayType.STRAIGHT_FLUSH]: PlayType.BOMB_N_TUPLE,\n  [PlayType.BOMB_N_TUPLE]: PlayType.PLATE,\n  [PlayType.PLATE]: PlayType.TUBE,\n  [PlayType.TUBE]: PlayType.STRAIGHT,\n  [PlayType.STRAIGHT]: PlayType.PAIR,\n  [PlayType.PAIR]: PlayType.TRIPLE,\n  [PlayType.TRIPLE]: undefined,\n} as const\nfunction nextPlayType(playType: PlayType): PlayType | undefined {\n  return NEXT_PLAY_TYPE[playType]\n}\ntype IteratorState = {\n  rank: NaturalRank\n  suit?: Suit\n  type: PlayType\n}\nexport const ITERATOR_STATE_START: IteratorState = {\n  rank: A,\n  suit: SUIT_START,\n  type: PlayType.STRAIGHT_FLUSH,\n}\nexport function nextIteratorState(\n  now: IteratorState,\n): IteratorState | undefined {\n  const next = nextRank(now.rank)\n  if (next != null) {\n    return {\n      ...now,\n      rank: next,\n    }\n  }\n  if (now.suit) {\n    console.assert(now.type === PlayType.STRAIGHT_FLUSH)\n    const nextSuit = getNextSuit(now.suit)\n    if (nextSuit != null) {\n      return {\n        ...now,\n        rank: A,\n        suit: nextSuit,\n      }\n    }\n  }\n  // next == null\n  const nextType = nextPlayType(now.type)\n  if (nextType != null) {\n    // Iterate the next type, and restart rank.\n    return {\n      ...now,\n      rank: A, // restart\n      type: nextType,\n      suit: undefined, // STRAIGHT_FLUSH is the only type with suit, so next type won't have suit\n    }\n  }\n  // nextType == null\n  return undefined\n}\n\nexport type PlanCollector = (plan: Plan) => void\n\nexport function iteratePlans({\n  cards,\n  collectPlan,\n  context: gameContext,\n}: {\n  cards: Card[]\n  collectPlan: PlanCollector\n  context: GameContext\n}) {\n  const cardsByRank = organize(cards, gameContext)\n  iterateImp({\n    cardsByRank,\n    context: {\n      collectPlan,\n      game: gameContext,\n      debug: DEBUG,\n    },\n  })\n}\n\ntype RankWildCard = 0\nconst WILD_CARD: RankWildCard = 0\ntype CardsByRank = { [R in NaturalRank | RankWildCard]?: Card[] }\nfunction organize(cards: Card[], context: GameContext): CardsByRank {\n  const organized: CardsByRank = {}\n  cards.forEach((card) => {\n    const rank = context.isWildCard(card) ? WILD_CARD : card.rank.natural\n    organized[rank] = organized[rank] || []\n    organized[rank]!.push(card)\n  })\n  return organized\n}\nexport const TEST_ONLY = { organize }\nfunction takeCard(\n  cards: CardsByRank, // Warning: this will mutate cards.\n  rank: NaturalRank,\n  count: number = 1,\n): Card[] | undefined {\n  console.assert(count >= 1)\n  const rankCards = cards[rank] || []\n  if (count <= rankCards.length) {\n    const taken = rankCards.slice(0, count)\n    cards[rank] = rankCards.slice(count)\n    return taken\n  }\n  const wildCards = cards[WILD_CARD]\n  const wildCardsNeeded = count - rankCards.length\n  if (!wildCards || wildCardsNeeded > wildCards.length) {\n    return undefined\n  }\n  const taken = rankCards.concat(wildCards.slice(0, wildCardsNeeded))\n  cards[rank] = []\n  cards[WILD_CARD] = wildCards.slice(wildCardsNeeded)\n  return taken\n}\nfunction takeCardBySuit(\n  cardsByRank: CardsByRank,\n  rank: NaturalRank,\n  suit: Suit,\n): Card | undefined {\n  const rankCards = cardsByRank[rank] || []\n  const index = rankCards.findIndex((card) => card.suit === suit)\n  if (index >= 0) {\n    cardsByRank[rank] = [...rankCards] // splice modifies the array, so copy it first\n    cardsByRank[rank]!.splice(index, 1)\n    return rankCards[index]\n  }\n  const wildCards = cardsByRank[WILD_CARD] || []\n  if (wildCards.length > 0) {\n    cardsByRank[WILD_CARD] = wildCards.slice(1)\n    return wildCards[0]\n  }\n  // not found\n  return undefined\n}\n\ntype IteratorContext = {\n  game: GameContext\n  collectPlan: PlanCollector\n  debug?: boolean\n}\n\ntype PlayTypeFunc = (args: {\n  cards: CardsByRank\n  nowRank: NaturalRank\n  nowSuit?: Suit\n  plan: Plan\n  context: IteratorContext\n}) => { cardsByRank: CardsByRank; plan: Plan } | undefined\nconst playCardsOfTheSameRank = (n: number): PlayTypeFunc => ({\n  cards,\n  nowRank,\n  plan,\n  context,\n}) => {\n  const newCards = { ...cards }\n  const taken = takeCard(newCards, nowRank, n)\n  if (taken == null) {\n    return undefined\n  }\n  const playRank: PlayRankBombNTuple | PlayRankNormal = {\n    type:\n      n === 2\n        ? PlayType.PAIR\n        : n === 3\n        ? PlayType.TRIPLE\n        : PlayType.BOMB_N_TUPLE,\n    rank: context.game.getOrder(nowRank),\n    cardCount: n,\n  }\n  return {\n    cardsByRank: newCards,\n    plan: {\n      score: plan.score + (n > 3 ? /* Bomb is free to play. */ 0 : 1),\n      plays: plan.plays.concat({\n        playRank,\n        cards: taken,\n      }),\n    },\n  }\n}\nconst playCardSequence = ({\n  cardCount,\n  length,\n  playType,\n}: {\n  cardCount: number\n  length: number\n  playType: PlayType.TUBE | PlayType.STRAIGHT | PlayType.PLATE\n}): PlayTypeFunc => ({ cards: cardsByRank, nowRank, plan, context }) => {\n  if (context.debug) {\n    console.log(`playCardSequence: ${JSON.stringify(cardsByRank)}, ${nowRank}`)\n  }\n  const end = nowRank + length - 1\n  if (end > K + 1) {\n    // This sequence is not possible, because it cannot go past A.\n    return undefined\n  }\n  let newCardsByRank = { ...cardsByRank }\n  let play: Play = {\n    cards: [],\n    playRank: { type: playType, rank: nowRank },\n  }\n  for (let i = nowRank; i <= end; ++i) {\n    const ii = i === K + 1 ? A : i\n    const taken = takeCard(newCardsByRank, ii, cardCount)\n    if (taken === null) {\n      return undefined\n    }\n    if (taken) {\n      play.cards.push(...taken)\n    }\n  }\n  return {\n    cardsByRank: newCardsByRank,\n    plan: {\n      score: plan.score + 1,\n      plays: plan.plays.concat(play),\n    },\n  }\n}\nconst playStraightFlush: PlayTypeFunc = ({\n  cards: cardsByRank,\n  nowRank,\n  nowSuit,\n  plan,\n  context,\n}) => {\n  if (context.debug) {\n    console.log(\n      `playStraightFlush: ${JSON.stringify(\n        cardsByRank,\n      )}, ${nowRank}, ${nowSuit}`,\n    )\n  }\n  if (!nowSuit) {\n    // playStraightFlush should always be called with suit\n    console.assert(nowSuit)\n    return undefined\n  }\n  const end = nowRank + 5 - 1\n  if (end > K + 1) {\n    // This sequence is not possible, because it cannot go past A.\n    return undefined\n  }\n  let newCardsByRank = { ...cardsByRank }\n  let play: Play = {\n    cards: [],\n    playRank: { type: PlayType.STRAIGHT_FLUSH, rank: nowRank },\n  }\n  for (let i = nowRank; i <= end; ++i) {\n    const ii = i === K + 1 ? A : i\n    const taken = takeCardBySuit(newCardsByRank, ii, nowSuit)\n    if (taken == null) {\n      // not found\n      return undefined\n    }\n    play.cards.push(taken)\n  }\n  return {\n    cardsByRank: newCardsByRank,\n    plan: {\n      score: plan.score + 0, // straight flush is a bomb\n      plays: plan.plays.concat(play),\n    },\n  }\n}\nconst playPair = playCardsOfTheSameRank(2)\nconst playTriple = playCardsOfTheSameRank(3)\nconst playBomb4 = playCardsOfTheSameRank(4)\nconst playBomb5 = playCardsOfTheSameRank(5)\nconst playBomb6 = playCardsOfTheSameRank(6)\nconst playBomb7 = playCardsOfTheSameRank(7)\nconst playBomb8 = playCardsOfTheSameRank(8)\nconst playFullHouse: PlayTypeFunc = ({ cards, nowRank, plan, context }) => {\n  const result = playTriple({ cards, nowRank, plan, context })\n  if (result == null) {\n    return undefined\n  }\n  const { cardsByRank: newCards, plan: newPlan } = result\n  const pairIndex = newPlan.plays.findIndex(\n    (play) => play.playRank.type === PlayType.PAIR,\n  )\n  if (pairIndex < 0) {\n    // No pairs left, cannot make a full house.\n    return undefined\n  }\n  const triplePlay = newPlan.plays[newPlan.plays.length - 1] as Play\n  const pairPlay = newPlan.plays[pairIndex]\n  // Remove pair and triple.\n  newPlan.plays = newPlan.plays\n    .slice(0, pairIndex)\n    .concat(newPlan.plays.slice(pairIndex + 1, newPlan.plays.length - 1))\n  // Push a full house.\n  newPlan.plays.push({\n    playRank: {\n      type: PlayType.FULL_HOUSE,\n      rank: (triplePlay.playRank as PlayRankNormal).rank,\n    },\n    cards: triplePlay.cards.concat(pairPlay.cards),\n  })\n  // Pair and triple becomes a full house, one fewer hand to play.\n  newPlan.score = newPlan.score - 1\n  return { plan: newPlan, cardsByRank: newCards }\n}\nexport const playStraight = playCardSequence({\n  cardCount: 1,\n  length: 5,\n  playType: PlayType.STRAIGHT,\n})\nconst playTube = playCardSequence({\n  cardCount: 2,\n  length: 3,\n  playType: PlayType.TUBE,\n})\nconst playPlate = playCardSequence({\n  cardCount: 3,\n  length: 2,\n  playType: PlayType.PLATE,\n})\nconst PLAY_TYPE_FUNC: { [T in PlayType]?: readonly PlayTypeFunc[] } = {\n  [PlayType.PAIR]: [playPair],\n  [PlayType.TRIPLE]: [playTriple, playFullHouse],\n  [PlayType.BOMB_N_TUPLE]: [\n    playBomb4,\n    playBomb5,\n    playBomb6,\n    playBomb7,\n    playBomb8,\n  ],\n  [PlayType.STRAIGHT]: [playStraight],\n  [PlayType.TUBE]: [playTube],\n  [PlayType.PLATE]: [playPlate],\n  [PlayType.STRAIGHT_FLUSH]: [playStraightFlush],\n} as const\n\nfunction iterateImp({\n  cardsByRank,\n  plan = { score: 0, plays: [] },\n  now = ITERATOR_STATE_START,\n  context,\n}: {\n  cardsByRank: CardsByRank\n  plan?: Plan\n  now?: IteratorState\n  context: IteratorContext\n}) {\n  if (context.debug) {\n    console.log(PlayType[now.type], now.rank, now.suit)\n  }\n  PLAY_TYPE_FUNC[now.type]?.forEach((func) => {\n    const result = func({\n      nowRank: now.rank,\n      nowSuit: now.suit,\n      cards: cardsByRank,\n      plan,\n      context,\n    })\n    if (result == null) {\n      return\n    }\n    iterateImp({ ...result, now, context })\n  })\n  const next = nextIteratorState(now)\n  if (next == null) {\n    // When we reach the last iterator state, the plan is ready to collect.\n    context.collectPlan(playRestOfCardsAsSingles(plan, cardsByRank))\n    return\n  }\n  // next != null\n  iterateImp({\n    now: next,\n    cardsByRank,\n    plan,\n    context,\n  })\n}\n\nfunction playRestOfCardsAsSingles(plan: Plan, cardsByRank: CardsByRank): Plan {\n  const resultPlan = { ...plan, plays: [...plan.plays] }\n  Object.entries(cardsByRank).forEach(([_, cards]) => {\n    if (!cards) {\n      return\n    }\n    resultPlan.score += cards.length\n    cards.forEach((card) => {\n      resultPlan.plays.push({\n        playRank: {\n          type: PlayType.SINGLE,\n          rank: card.rank.power,\n        },\n        cards: [card],\n      })\n    })\n  })\n  return resultPlan\n}\n","import {\n  NaturalRank,\n  PowerRank,\n  RED_JOKER,\n  BLACK_JOKER,\n  A,\n} from './models/const'\n\nexport function getUsualPowerRank(rank: NaturalRank): PowerRank {\n  switch (rank) {\n    case RED_JOKER:\n      return 14\n    case BLACK_JOKER:\n      return 13\n    case A:\n      return 12\n    default:\n      return (rank - 2) as PowerRank\n  }\n}\n","import { getUsualPowerRank } from '../utils'\nimport { Card } from './Card'\nimport {\n  BLACK_JOKER,\n  NaturalRank,\n  NaturalRankWithoutJokers,\n  PowerRank,\n  RED_JOKER,\n} from './const'\n\nexport class GameContext {\n  constructor(mainRank: NaturalRankWithoutJokers) {\n    this.mainRank = mainRank\n  }\n  /** Which rank is largest in current game play. */\n  readonly mainRank: NaturalRankWithoutJokers\n  /**\n   * Returns range[0, 14], power of the rank in this gameplay.\n   * The weakest is 0. The strongest (red joker) is 14.\n   */\n  getOrder(rank: NaturalRank): PowerRank {\n    if (rank === RED_JOKER) {\n      return 14\n    } else if (rank === BLACK_JOKER) {\n      return 13\n    } else if (rank === this.mainRank) {\n      return 12\n    } else {\n      const usualRank = getUsualPowerRank(rank)\n      const mainRankUsualRank = getUsualPowerRank(this.mainRank)\n      if (usualRank > mainRankUsualRank) {\n        return (usualRank - 1) as PowerRank\n      } else {\n        return usualRank as PowerRank\n      }\n    }\n  }\n\n  isWildCard(card: Card): boolean {\n    return card.rank.natural === this.mainRank && card.suit === 'H'\n  }\n}\n","import { A, K, Q } from './models/const'\nimport { Plan } from './models/Plan'\nimport { Play, PlayType } from './models/Play'\n\n// returns score, the smaller the better\nexport type Scorer = (plan: Plan) => number\nexport const handsScore: Scorer = (plan) => plan.score\nexport const MAX_SCORE = 1e100\n\nexport const heuristicScore: Scorer = (plan) => {\n  const scoreByPlayType: Partial<Record<PlayType, number>> = {}\n  plan.plays.forEach((play) => {\n    scoreByPlayType[play.playRank.type] =\n      scoreByPlayType[play.playRank.type] || 0\n    scoreByPlayType[play.playRank.type]! += heuristicScorePlay(play)\n  })\n  scoreByPlayType[PlayType.SINGLE] = cap(\n    scoreByPlayType[PlayType.SINGLE],\n    -3,\n    MAX_SCORE,\n  )\n  scoreByPlayType[PlayType.PAIR] = cap(scoreByPlayType[PlayType.PAIR], -2, 6)\n  scoreByPlayType[PlayType.TRIPLE] = cap(\n    scoreByPlayType[PlayType.TRIPLE],\n    -0.3,\n    6,\n  )\n  scoreByPlayType[PlayType.FULL_HOUSE] = cap(\n    scoreByPlayType[PlayType.FULL_HOUSE],\n    -1.3,\n    3,\n  )\n  scoreByPlayType[PlayType.STRAIGHT] = cap(\n    scoreByPlayType[PlayType.STRAIGHT],\n    -0.8,\n    1.5,\n  )\n  scoreByPlayType[PlayType.TUBE] = cap(scoreByPlayType[PlayType.TUBE], -0.3, 1)\n  scoreByPlayType[PlayType.PLATE] = cap(\n    scoreByPlayType[PlayType.PLATE],\n    -0.2,\n    0.3,\n  )\n  return (\n    Object.values(scoreByPlayType).reduce(\n      (sum, value) => (sum || 0) + (value || 0),\n    ) || 0\n  )\n}\n\nfunction heuristicScorePlay(play: Play) {\n  const playRank = play.playRank\n  switch (playRank.type) {\n    case PlayType.SINGLE:\n      switch (playRank.rank) {\n        case 14: // Red Joker\n          return -1\n        case 13: // Black Joker\n          return -0.8\n        default:\n          return linear({ x: 0, y: 1 }, { x: 12, y: -0.2 }, playRank.rank)\n      }\n    case PlayType.PAIR:\n      switch (playRank.rank) {\n        case 14: // Red Joker\n          return -1\n        case 13: // Black Joker\n          return -0.95\n        default:\n          // powerRank == 9 means J when A is main.\n          if (playRank.rank >= 9) {\n            return linear({ x: 9, y: 0 }, { x: 12, y: -0.9 }, playRank.rank)\n          } else {\n            return linear({ x: 9, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n          }\n      }\n    case PlayType.TRIPLE:\n      if (playRank.rank >= 9) {\n        return linear({ x: 9, y: 0 }, { x: 12, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 9, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n      }\n    case PlayType.FULL_HOUSE:\n      if (playRank.rank >= 8) {\n        return linear({ x: 8, y: 0 }, { x: 12, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 8, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n      }\n    case PlayType.STRAIGHT:\n      if (playRank.rank >= 7) {\n        return linear({ x: 7, y: 0 }, { x: 10, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 7, y: 0 }, { x: A, y: 0.8 }, playRank.rank)\n      }\n    case PlayType.TUBE:\n      if (playRank.rank >= 8) {\n        return linear({ x: 8, y: 0 }, { x: Q, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 8, y: 0 }, { x: A, y: 0.5 }, playRank.rank)\n      }\n    case PlayType.PLATE:\n      if (playRank.rank >= 6) {\n        return linear({ x: 6, y: 0 }, { x: K, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 6, y: 0 }, { x: A, y: 0.3 }, playRank.rank)\n      }\n    case PlayType.STRAIGHT_FLUSH:\n    case PlayType.BOMB_N_TUPLE:\n    case PlayType.FOUR_JOKER:\n      return -1\n    default:\n      throw new Error('Unknown play rank type')\n  }\n}\n\n// There's a straight line connecting start point and end point.\n// Returns the y value of queried x value.\nfunction linear(\n  start: { x: number; y: number },\n  end: { x: number; y: number },\n  x: number,\n) {\n  return ((end.y - start.y) / (end.x - start.x)) * (x - start.x) + start.y\n}\n\nfunction cap(x: number | undefined, min: number, max: number) {\n  if (x == null) {\n    return 0\n  }\n  if (x < min) {\n    return min\n  }\n  if (x > max) {\n    return max\n  }\n  return x\n}\n","import { MAX_PLANS } from './const'\nimport { iteratePlans } from './iterate'\nimport { parseCardRaw } from './models/Card'\nimport { CardRaw, NaturalRankWithoutJokers } from './models/const'\nimport { GameContext } from './models/GameContext'\nimport { Plan } from './models/Plan'\nimport { handsScore, heuristicScore, MAX_SCORE, Scorer } from './scorers'\n\nexport type Scorers = 'HANDS' | 'HEURISTICS'\n\nexport function calc({\n  cards: rawCards,\n  mainRank,\n  morePlans = true,\n  scorer = 'HANDS',\n}: {\n  cards: CardRaw[]\n  mainRank: NaturalRankWithoutJokers\n  morePlans?: boolean // not only return the best plan\n  scorer?: Scorers\n}): Plan[] {\n  const context = new GameContext(mainRank)\n  const cards = rawCards.map((rawCard) => parseCardRaw(rawCard, context))\n  const scorerFunc = scorer === 'HEURISTICS' ? heuristicScore : handsScore\n  if (morePlans) {\n    const planCollector = makeAllBestPlansCollector({ scorer: scorerFunc })\n    iteratePlans({ cards, collectPlan: planCollector.collectPlan, context })\n    const bestPlans = planCollector.getBestPlans()\n    if (bestPlans.length === 0) {\n      throw new Error('No plan found')\n    }\n    return bestPlans\n  } else {\n    const bestPlanCollector = makeBestPlanCollector({ scorer: scorerFunc })\n    iteratePlans({ cards, collectPlan: bestPlanCollector.collectPlan, context })\n    const bestPlan = bestPlanCollector.getBestPlan()\n    if (bestPlan == null) {\n      throw new Error('No plan found')\n    }\n    return [bestPlan]\n  }\n}\n\nconst makeBestPlanCollector = ({\n  scorer = handsScore,\n}: { scorer?: Scorer } = {}) => {\n  let bestPlan: Plan | undefined = undefined\n  let bestScore: number = MAX_SCORE\n  let count = 0\n  return {\n    collectPlan: (plan: Plan) => {\n      const currentScore = scorer(plan)\n      plan.score = currentScore\n      if (bestPlan == null || currentScore <= bestScore) {\n        bestPlan = plan\n        bestScore = currentScore\n      }\n      ++count\n      if (count > MAX_PLANS) {\n        throw new Error('too many plans')\n      }\n    },\n    getBestPlan: () => bestPlan,\n  }\n}\n\nconst makeAllBestPlansCollector = ({\n  scorer = handsScore,\n}: { scorer?: Scorer } = {}) => {\n  let bestPlans: Plan[] = []\n  let bestScore: number = MAX_SCORE\n  let count = 0\n  return {\n    collectPlan: (plan: Plan) => {\n      ++count\n      if (count > MAX_PLANS) {\n        throw new Error('too many plans')\n      }\n      const currentScore = scorer(plan)\n      plan.score = currentScore\n      if (bestPlans.length === 0) {\n        bestPlans.push(plan)\n        bestScore = currentScore\n      } else if (currentScore < bestScore) {\n        bestPlans = [plan]\n        bestScore = currentScore\n      } else if (currentScore === bestScore) {\n        bestPlans.push(plan)\n      } else {\n        // ignore non-best plans\n      }\n    },\n    getBestPlans: () => bestPlans,\n  }\n}\n","import { useQuery } from 'react-query'\nimport { NavigationProps } from './common/types'\nimport SolutionVisualization from './SolutionVisualization'\nimport { calc } from './strategy/strategy'\nimport { StrategyResult } from './useResultState'\n\nfunction ResultPage({ screenProps, navigation }: NavigationProps) {\n  const { rank, cards, windowSize } = screenProps\n  const args1 = {\n    cards,\n    mainRank: rank,\n    morePlans: true,\n    scorer: 'HEURISTICS' as const,\n  }\n  const { status: status1, data: plans1 } = useQuery(\n    ['calc', args1],\n    async () => {\n      await delay(500)\n      return calc(args1)\n    },\n  )\n  const args2 = {\n    cards,\n    mainRank: rank,\n    morePlans: true,\n    scorer: 'HANDS' as const,\n  }\n  const { status: status2, data: plans2 } = useQuery(\n    ['calc', args2],\n    async () => {\n      await delay(0)\n      return calc(args2)\n    },\n    { enabled: status1 === 'success' },\n  )\n  let strategyResult: StrategyResult[] = ['loading']\n  // TODO: handle error?\n  if (status1 === 'success') {\n    strategyResult = [{ title: '价值策略', plans: plans1! }]\n    if (status2 === 'loading') {\n      strategyResult.push('loading' as const)\n    } else if (status2 === 'success') {\n      strategyResult.push({ title: '手数策略', plans: plans2! })\n    }\n  }\n\n  return (\n    <SolutionVisualization\n      strategyResult={strategyResult}\n      rank={rank}\n      windowSize={windowSize}\n      onClose={navigation.goBack}\n    />\n  )\n}\nexport default ResultPage\n\nfunction delay(millis: number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, millis)\n  })\n}\n","import { useState, useMemo, useEffect, useCallback } from 'react'\nimport { History } from 'history'\n\n// using internal state\nexport function useRouterState(defaultRoute: string) {\n  const [route, navigate] = useState(defaultRoute)\n  const navigation = useMemo(\n    () => ({\n      navigate,\n    }),\n    [navigate],\n  )\n  return {\n    route,\n    navigation,\n  }\n}\n\ninterface RouteConfig {\n  path: string\n  title: string\n}\n\ninterface RoutesConfig {\n  base: string\n  defaultRoute: string\n  routes: {\n    [route: string]: RouteConfig\n  }\n}\n\nexport const NOT_FOUND = 'NOT_FOUND'\nconst NOT_FOUND_CONFIG: RouteConfig = {\n  path: '/not-found',\n  title: 'Page Not Found',\n}\n\n// remove ending /\nfunction normalizePath(path: string) {\n  if (path.endsWith('/')) {\n    return path.substring(0, path.length - 1)\n  }\n\n  return path\n}\n\nexport function createBrowserRouterHook(\n  providedRoutesConfig: RoutesConfig,\n  history: History,\n) {\n  const routesConfig: RoutesConfig = {\n    ...providedRoutesConfig,\n    routes: { ...providedRoutesConfig.routes, [NOT_FOUND]: NOT_FOUND_CONFIG },\n  }\n  function getCurrentPath() {\n    const pathNowRaw = history.location.pathname\n    if (pathNowRaw.startsWith(routesConfig.base)) {\n      return normalizePath(pathNowRaw.substring(routesConfig.base.length))\n    }\n\n    return routesConfig.base + NOT_FOUND_CONFIG.path\n  }\n  function match(pathname: string) {\n    const [route, routeConfig] = Object.entries(routesConfig.routes).find(\n      ([_, routeConfig]) => routeConfig.path === pathname,\n    ) || [NOT_FOUND, NOT_FOUND_CONFIG]\n\n    return {\n      route,\n      routeConfig,\n    }\n  }\n\n  return function useBrowserRouterState() {\n    const [route, setRoute] = useState(match(getCurrentPath()).route)\n\n    useEffect(() => {\n      function historyEventHandler(location: any, action: any) {\n        // console.log(location)\n        // console.log(action)\n        // console.log(getCurrentPath())\n        // console.log(match(getCurrentPath()))\n        setRoute(match(getCurrentPath()).route)\n      }\n\n      // listen for all incoming navigations, returns function to unlisten the event handler\n      return history.listen(historyEventHandler)\n    }, [setRoute])\n\n    useEffect(() => {\n      window.document.title = routesConfig.routes[route].title\n    }, [])\n\n    // dispatch navigation action\n    const navigate = useCallback(\n      (routeToDispatch, { replace = false } = {}) => {\n        // check validity of the route, if not found, go to the NOT_FOUND page\n        routeToDispatch = routesConfig.routes[routeToDispatch]\n          ? routeToDispatch\n          : NOT_FOUND\n        const routeMatched = routesConfig.routes[routeToDispatch]\n\n        if (replace) {\n          history.replace(routesConfig.base + routeMatched.path)\n        } else {\n          history.push(routesConfig.base + routeMatched.path)\n        }\n      },\n      [routesConfig, NOT_FOUND_CONFIG],\n    )\n\n    return {\n      route,\n      title: routesConfig.routes[route].title,\n      navigation: {\n        navigate,\n        goBack: history.goBack,\n      },\n    }\n  }\n}\n","import { useState, useEffect } from 'react'\nimport { Dimensions } from 'react-native'\n\nexport type WindowSize = 'BIG' | 'SMALL'\nconst LARGE_SCREEN_LENGTH = 720\n\nfunction calcWindowSize(): WindowSize {\n  const { width, height } = Dimensions.get('window')\n  return width >= LARGE_SCREEN_LENGTH && height >= LARGE_SCREEN_LENGTH\n    ? 'BIG'\n    : 'SMALL'\n}\n\nexport function useWindowSize() {\n  const [size, setSize] = useState<WindowSize>(calcWindowSize)\n  useEffect(() => {\n    function handleWindowSizeChange() {\n      setSize(calcWindowSize())\n    }\n    Dimensions.addEventListener('change', handleWindowSizeChange)\n    // unsubscribe when effect destroyed\n    return () =>\n      Dimensions.removeEventListener('change', handleWindowSizeChange)\n  }, [setSize])\n  return size\n}\n","/// <reference path=\"lib.d.ts\"/>\n\nimport createHistory from 'history/createBrowserHistory'\nimport React, { FunctionComponent, useState } from 'react'\nimport { StyleProp, StyleSheet, Text, View, ViewStyle } from 'react-native'\nimport { TransitionGroup } from 'react-transition-group'\nimport { NavigationProps } from './common/types'\nimport { Fade } from './Fade'\nimport Home from './Home'\nimport ResultPage from './ResultPage'\nimport { A, NaturalRankWithoutJokers } from './strategy/models/const'\nimport { useCardState } from './useCardState'\nimport { useResultState } from './useResultState'\nimport { createBrowserRouterHook } from './useRouterState'\nimport { useWindowSize } from './useWindowSize'\nimport { QueryClient, QueryClientProvider } from 'react-query'\n\ninterface AppNavigatorProps extends NavigationProps {\n  route: string\n  style?: StyleProp<ViewStyle>\n}\nconst styles = StyleSheet.create({\n  absoluteChild: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  },\n})\n\nconst routes = {\n  Home,\n  Result: ResultPage,\n}\nconst AppNavigator: FunctionComponent<AppNavigatorProps> = ({\n  route: currentRoute,\n  navigation,\n  screenProps,\n  style,\n}) => {\n  return (\n    <>\n      <TransitionGroup>\n        {Object.entries(routes).map(([route, RouteComponent]) => {\n          if (route !== currentRoute) return null\n\n          return (\n            <Fade\n              key={route}\n              style={[styles.absoluteChild, style]}\n              timeout={300}\n            >\n              <RouteComponent\n                screenProps={screenProps}\n                navigation={navigation}\n              />\n            </Fade>\n          )\n        })}\n      </TransitionGroup>\n    </>\n  )\n}\n\nconst routesConfig = {\n  base: process.env.REACT_APP_BASE_URL || '',\n  defaultRoute: 'Home',\n  routes: {\n    Home: {\n      path: '',\n      title: '掼蛋拆牌计算器',\n    },\n    Result: {\n      path: '/result',\n      title: '掼蛋拆牌计算器',\n    },\n  },\n}\nconst history = createHistory()\n\nconst useRouterState = createBrowserRouterHook(routesConfig, history)\n\nfunction App() {\n  const [rank, setRank] = useState<NaturalRankWithoutJokers>(A)\n  const cardStateProps = useCardState()\n  const resultProps = useResultState()\n  const { route, navigation } = useRouterState()\n  const windowSize = useWindowSize()\n\n  return (\n    <View\n      style={{\n        flex: 1,\n        backgroundColor: 'lightblue',\n        height: '100%',\n      }}\n    >\n      <View style={{ height: '100%' }}>\n        <Text style={{ fontSize: 14 }}>掼蛋拆牌计算器</Text>\n        <View style={{ flex: 1 }}>\n          <AppNavigator\n            route={route}\n            screenProps={{\n              rank,\n              setRank,\n              ...cardStateProps,\n              ...resultProps,\n              windowSize,\n            }}\n            navigation={navigation}\n            style={{\n              flex: 1,\n            }}\n          />\n        </View>\n      </View>\n    </View>\n  )\n}\n\n// Create a client\nconst queryClient = new QueryClient()\nconst EnhancedApp = () => (\n  <QueryClientProvider client={queryClient}>\n    <App />\n  </QueryClientProvider>\n)\n\nexport default EnhancedApp\n","import { useCallback, useState } from 'react'\nimport { generateRandomHands } from './common/cardUtils'\nimport { CardState } from './common/types'\nimport { CardRaw } from './strategy/models/const'\n\nexport function useCardState(): CardState {\n  const [cards, setCards] = useState<CardRaw[]>([])\n  const clearCards = useCallback(() => setCards([]), [setCards])\n  const addCard = useCallback(\n    (card) => setCards((cardsNow) => cardsNow.concat(card)),\n    [setCards],\n  )\n  const randomCards = useCallback(() => setCards(generateRandomHands()), [\n    setCards,\n  ])\n  const deleteLastCard = useCallback(\n    () => setCards((cardsNow) => cardsNow.slice(0, cardsNow.length - 1)),\n    [setCards],\n  )\n  return {\n    cards,\n    clearCards,\n    addCard,\n    randomCards,\n    deleteLastCard,\n  }\n}\n","import { useState } from 'react'\nimport { Plan } from './strategy/models/Plan'\n\nexport type StrategyResult = null | 'loading' | { title: string; plans: Plan[] }\nexport interface ResultProps {\n  strategyResult: StrategyResult[]\n  setResult: (result: StrategyResult[]) => void\n}\nexport const useResultState = () => {\n  const [strategyResult, setResult] = useState<StrategyResult[]>([])\n  return {\n    strategyResult,\n    setResult,\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { AppRegistry } from 'react-native'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nAppRegistry.registerComponent('App', () => App)\nAppRegistry.runApplication('App', {\n  rootTag: document.getElementById('root'),\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register({\n  onSuccess: () => console.log('service worker loaded successfully'),\n  onUpdate: () => console.log('service worker is updated'),\n})\n\nfunction removeWechatGuidance() {\n  const guidanceNode = window.document.getElementById('wechat-guidance')\n  if (guidanceNode) {\n    const parentNode = guidanceNode.parentNode\n    if (parentNode) {\n      parentNode.removeChild(guidanceNode)\n    }\n  }\n}\n\nremoveWechatGuidance()\n"],"sourceRoot":""}