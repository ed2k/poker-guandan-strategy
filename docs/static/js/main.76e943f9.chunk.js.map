{"version":3,"sources":["Fade.tsx","strategy/models/Suite.ts","strategy/models/const.ts","Card.tsx","imgs/neko-40x40.png","common/cardUtils.ts","Divider.tsx","MyButton.tsx","CardsChooser.tsx","RankChooser.tsx","styles.tsx","Home.tsx","icons/close.svg","strategy/models/Rank.ts","strategy/models/Card.ts","SolutionVisualization.tsx","strategy/const.ts","strategy/models/Play.ts","strategy/iterate.ts","strategy/utils.ts","strategy/models/GameContext.ts","strategy/scorers.ts","strategy/strategy.ts","ResultPage.tsx","useRouterState.ts","useWindowSize.tsx","App.tsx","useCardState.ts","useResultState.ts","serviceWorker.ts","index.tsx"],"names":["delay","fn","requestAnimationFrame","Fade","_ref","children","style","timeout","restProps","fadeAnim","useState","Animated","Value","_jsx","Transition","onEntering","timing","toValue","duration","start","onExiting","View","opacity","defaultProps","appear","enter","mountOnEnter","unmountOnExit","SUIT_NORMAL","H","value","label","text","color","D","S","C","SUIT_JOKER","B","R","SUIT","SUITS","NEXT_SUIT","undefined","Q","K","A","BLACK_JOKER","RED_JOKER","NATURAL_RANK_MIN","NATURAL_RANK_MAX","NATURAL_RANKS","NATURAL_RANK","naturalRank","NATURAL_RANKS_WITHOUT_JOKERS","slice","length","styles","StyleSheet","create","card","width","height","backgroundColor","borderColor","borderWidth","borderRadius","cardLarge","cardStacked","marginRight","marginBottom","cardStackedLarge","cardLabel","fontFamily","fontSize","lineHeight","textAlign","marginTop","fontWeight","cardLabelLarge","cardCuteImage","position","left","top","cardCuteImageLarge","overlayWhenDisabled","right","bottom","Card","rank","suit","isStacked","disabled","large","rankDef","suitDef","_jsxs","Text","split","join","Image","source","uri","CardDeck","_ref2","cards","hands","stackedCardMargin","ScrollView","contentContainerStyle","flexWrap","flexDirection","padding","paddingRight","paddingBottom","map","index","hand","handID","handNode","cardID","maxWidth","ALL_CARDS_ONE_DECK","reduce","res","push","ALL_CARDS_2ND_DECK","dedup","cardCompare","a","b","sortCards","sort","generateRandomHands","allCards","i","j","Math","floor","random","x","shuffle","canIAddCard","cardToAdd","filter","divider","marginHorizontal","Divider","MyButton","titleStyle","title","TouchableOpacity","theme","background","button","paddingVertical","paddingHorizontal","alignItems","justifyContent","palette","useRankState","increase","decrease","defaultValue","arguments","setValue","useCallback","valueNow","useIncDecState","incRank","decRank","controlStyles","incDecButton","flex","minWidth","margin","actionButton","buttonTitle","buttonTitleSmall","ControlPanel","props","alignContent","onPress","randomCards","numberOfCards","clearCards","deleteLastCard","AddCardPanel","_Fragment","cardsLeft","canIAddThisCard","addCard","JSON","stringify","CardsChooser","windowSize","concat","flexGrow","horizontal","RankChooser","setRank","Picker","selectedValue","onValueChange","itemValue","Number","isInteger","Error","assertNonJokerNaturalRank","parseInt","Item","commonStyles","container","borderBox","HomePage","navigation","handleSolutionCalcButton","navigate","Fragment","MemoedHomePage","React","memo","HomePageWrapper","_path","_path2","screenProps","_extends","Object","assign","bind","target","key","prototype","hasOwnProperty","call","apply","this","SvgClose","svgRef","titleId","xmlns","viewBox","ref","id","fill","d","ForwardRef","makeRank","natural","context","power","getOrder","cardToCardRaw","CloseWindowButton","onClose","Close","SolutionView","strategyResult","flexShrink","plans","score","hiddenMoreSolutions","plan","planIndex","plays","play","MemoedSolutionView","SolutionVisualization","result","DEBUG","MAX_PLANS","PlayType","NEXT_PLAY_TYPE","STRAIGHT_FLUSH","BOMB_N_TUPLE","PLATE","TUBE","STRAIGHT","PAIR","TRIPLE","ITERATOR_STATE_START","type","nextIteratorState","now","next","nextRank","console","assert","nextSuit","nextType","playType","iteratePlans","collectPlan","gameContext","iterateImp","cardsByRank","organize","game","debug","WILD_CARD","organized","forEach","isWildCard","takeCard","count","rankCards","taken","wildCards","wildCardsNeeded","takeCardBySuit","findIndex","splice","playCardsOfTheSameRank","n","nowRank","newCards","playRank","cardCount","playCardSequence","_ref3","_ref4","log","end","newCardsByRank","playPair","playTriple","playBomb4","playBomb5","playBomb6","playBomb7","playBomb8","playStraight","playTube","playPlate","PLAY_TYPE_FUNC","_ref6","newPlan","pairIndex","triplePlay","pairPlay","FULL_HOUSE","_ref5","nowSuit","_ref7","_PLAY_TYPE_FUNC$now$t","func","resultPlan","entries","_ref8","_","SINGLE","playRestOfCardsAsSingles","getUsualPowerRank","GameContext","constructor","mainRank","usualRank","handsScore","MAX_SCORE","heuristicScore","scoreByPlayType","linear","y","FOUR_JOKER","heuristicScorePlay","cap","values","sum","min","max","calc","rawCards","morePlans","scorer","rawCard","raw","parseCardRaw","scorerFunc","planCollector","makeAllBestPlansCollector","bestPlans","getBestPlans","bestPlanCollector","makeBestPlanCollector","bestPlan","getBestPlan","bestScore","currentScore","ResultPage","args1","status","status1","data","plans1","useQuery","async","args2","status2","plans2","enabled","goBack","millis","Promise","resolve","setTimeout","NOT_FOUND","NOT_FOUND_CONFIG","path","LARGE_SCREEN_LENGTH","calcWindowSize","Dimensions","get","absoluteChild","routes","Home","Result","AppNavigator","route","currentRoute","TransitionGroup","RouteComponent","useRouterState","providedRoutesConfig","history","routesConfig","getCurrentPath","pathNowRaw","location","pathname","startsWith","base","substring","endsWith","match","routeConfig","find","setRoute","useEffect","listen","action","window","document","routeToDispatch","replace","routeMatched","createBrowserRouterHook","process","defaultRoute","createHistory","App","cardStateProps","setCards","setAllCards","cardsNow","useCardState","resultProps","useResultState","setResult","size","setSize","handleWindowSizeChange","addEventListener","removeEventListener","useWindowSize","queryClient","QueryClient","EnhancedApp","QueryClientProvider","client","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","AppRegistry","registerComponent","runApplication","rootTag","getElementById","URL","href","origin","fetch","response","contentType","headers","indexOf","ready","unregister","reload","checkValidServiceWorker","guidanceNode","parentNode","removeChild","removeWechatGuidance"],"mappings":"sPAUA,SAASA,EAAMC,GACb,OAAOC,uBAAsB,KAE3BA,uBAAsB,KAEpBA,uBAAsB,KAEpBD,GAAI,GACJ,GACF,GAEN,CAIA,MAEaE,EAAqCC,IAK3C,IAL4C,SACjDC,EAAQ,MACRC,EAAK,QACLC,KACGC,GACJJ,EACC,MAAOK,GAAcC,mBAAS,IAAIC,IAASC,MAAM,IAEjD,OACEC,cAACC,aAAU,CACTP,QAASA,EAZO,IAahBQ,WAAYA,KAEVf,GAAM,KACJW,IAASK,OAAOP,EAAU,CAAEQ,QAAS,EAAGC,SAAUX,IAAWY,OAAO,GACpE,EAEJC,UAAWA,KAETpB,GAAM,KACJW,IAASK,OAAOP,EAAU,CACxBQ,QAAS,EACTC,SAAUX,IACTY,OAAO,GACV,KAEAX,EAASH,SAEbQ,cAACF,IAASU,KAAI,CACZf,MAAO,CACL,CACEgB,QAASb,GAEXH,GACAD,SAEDA,KAEQ,EAGjBF,EAAKoB,aAAe,CAClBC,QAAQ,EACRC,OAAO,EACPC,cAAc,EACdC,eAAe,G,8BC7DV,MAAMC,EAAiD,CAC5DC,EAAG,CACDC,MAAO,IACPC,MAAO,SACPC,KAAM,SACNC,MAAO,OAETC,EAAG,CACDJ,MAAO,IACPC,MAAO,SACPC,KAAM,SACNC,MAAO,OAETE,EAAG,CACDL,MAAO,IACPC,MAAO,SACPC,KAAM,SACNC,MAAO,SAETG,EAAG,CACDN,MAAO,IACPC,MAAO,SACPC,KAAM,SACNC,MAAO,UAGEI,EAA0D,CACrEC,EAAG,CAEDR,MAAO,IACPC,MAAO,GACPC,KAAM,IACNC,MAAO,SAETM,EAAG,CAEDT,MAAO,IACPC,MAAO,GACPC,KAAM,IACNC,MAAO,QAIEO,EAAO,IACfZ,KACAS,GAEQI,EAAQ,CACnBb,EAAYC,EACZD,EAAYO,EACZP,EAAYQ,EACZR,EAAYM,GAed,MAAMQ,EAAY,CAChBP,EAAG,IACHC,EAAG,IACHF,EAAG,IACHL,OAAGc,GC9EE,MAEMC,EAAI,GAEJC,EAAI,GAEJC,EAAI,EAEJC,EAAc,GAEdC,EAAY,GAiBZC,EAAmBH,EACnBI,EAAmBF,EAKnBG,EAAgB,CAC3BL,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GA3Ce,GAEA,GA4CfD,EACAE,EACAC,GAOWI,EAAkD,CAC7D,CAACN,GAAI,CAAEf,MAAO,IAAKC,KAAM,IAAKqB,YAAaP,GAC3C,EAAG,CAAEf,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,EAAG,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAAa,GACzC,GAAI,CAAEtB,MAAO,KAAMC,KAAM,KAAMqB,YAAa,IAC5C,GAAK,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAlEf,IAmEf,GAAK,CAAEtB,MAAO,IAAKC,KAAM,IAAKqB,YAjEf,IAkEf,CAACR,GAAI,CAAEd,MAAO,IAAKC,KAAM,IAAKqB,YAAaR,GAC3C,CAACE,GAAc,CAAEhB,MAAO,QAASC,KAAM,IAAKqB,YAAaN,GACzD,CAACC,GAAY,CAAEjB,MAAO,QAASC,KAAM,IAAKqB,YAAaL,IASlD,MAAMM,EAA2DH,EAAcI,MACpF,EACAJ,EAAcK,OAAS,GClEzB,MAGMC,EAASC,IAAWC,OAAO,CAC/BC,KAAM,CACJC,MAAO,GACPC,OAAQ,IACRC,gBAAiB,QACjBC,YAAa,QACbC,YAAa,EACbC,aAAc,GAEhBC,UAAW,CACTN,MAAO,IACPC,OAAQ,KAEVM,YAAa,CACXC,aAjBwB,GAkBxBC,cAlBwB,IAoB1BC,iBAAkB,CAChBF,aApB8B,GAqB9BC,cArB8B,IAuBhCE,UAAW,CACTC,WAAY,YACZC,SAAU,GACVC,WAAY,GACZC,UAAW,SACXf,MAAO,GACPgB,UAAW,EACXC,WAAY,QAEdC,eAAgB,CACdL,SAAU,GACVC,WAAY,GACZd,MAAO,IAETmB,cAAe,CACbC,SAAU,WACVC,KAAM,mBACNC,IAAK,mBACLtB,MAAO,GACPC,OAAQ,IAEVsB,mBAAoB,CAClBvB,MAAO,GACPC,OAAQ,GACRoB,KAAM,mBACNC,IAAK,oBAEPE,oBAAqB,CACnBJ,SAAU,WACVC,KAAM,EACNI,MAAO,EACPH,IAAK,EACLI,OAAQ,EACRxB,gBAAiB,wBAId,SAASyB,EAAIpF,GAYhB,IAZiB,KACnBqF,EAAI,KACJC,EAAI,UACJC,EAAS,SACTC,EAAQ,MACRtF,EAAK,MACLuF,GAMDzF,EACC,MAAM0F,EAAU1C,EAAaqC,GACvBM,EAAUvD,EAAKkD,GACrB,OACEM,eAAC3E,IAAI,CACHf,MAAO,CACLmD,EAAOG,KACPiC,GAASpC,EAAOU,UAChBwB,GAAalC,EAAOW,YACpBuB,GAAaE,GAASpC,EAAOc,iBAC7BjE,GACAD,SAAA,CAEF2F,eAACC,IAAI,CACH3F,MAAO,CACLmD,EAAOe,UACPqB,GAASpC,EAAOsB,eAChB,CAAE9C,MAAO8D,EAAQ9D,QACjB5B,SAAA,CAEiB,OAAlByF,EAAQ/D,MACL+D,EAAQ/D,MACR+D,EAAQ/D,MAAMmE,MAAM,IAAIC,KAAK,MAChC,KACAJ,EAAQhE,SAEXlB,cAACuF,IAAK,CACJC,OAAQ,CAAEC,ICtHH,s0DDuHPhG,MAAO,CAACmD,EAAOuB,cAAea,GAASpC,EAAO2B,sBAE/CQ,GAAY/E,cAACQ,IAAI,CAACf,MAAOmD,EAAO4B,wBAGvC,CAEA,MASakB,EAAmDC,IAKzD,IAL0D,MAC/DC,EAAK,MACLC,EAAK,MACLpG,EAAK,MACLuF,GACDW,EACC,MAAMG,EAAoBd,EA1HM,GADN,GA+H1B,OACEG,eAACY,IAAU,CACTtG,MAAOA,EACPuG,sBAAuB,CACrBC,SAAU,OACVC,cAAe,MACfC,QAxBkB,EAyBlBC,aAAcN,EAzBI,EA0BlBO,cAAeP,EA1BG,GA2BlBtG,SAAA,GAECoG,GACDA,EAAMU,KAAI,CAACvD,EAAMwD,IACfvG,cAAC2E,EAAI,IAEC5B,EACJ+B,WAAS,EACTE,MAAOA,GAHFjC,EAAK6B,KAAO7B,EAAK8B,KAAO0B,OAMhCV,GACDA,EAAMS,KAAI,CAACE,EAAMC,KACf,MAAMC,EAAWF,EAAKF,KAAI,CAACvD,EAAM4D,IAC/B3G,cAAC2E,EAAI,IAEC5B,EACJ+B,WAAS,EACTE,MAAOA,GAHFjC,EAAK6B,KAAO7B,EAAK8B,KAAO8B,KAOjC,OAAIF,EAAS,EAGTzG,cAACQ,IAAI,CACHf,MAAO,CACLyG,cAAe,MACfD,SAAU,SACVzC,YAzDE,IA0DFhE,SAGDkH,GAFID,GAQPzG,cAACQ,IAAI,CACHf,MAAO,CACLyG,cAAe,MACfD,SAAU,OACVzC,YAvEE,GAwEFoD,SAAU,QACVpH,SAGDkH,GAFID,EAKX,MAEO,EEvMXI,EAAgCvE,EAAcgE,KAAK1B,GACvDA,IAAS1C,EACL,CAAC,CAAE0C,OAAMC,KAAM,MACfD,IAASzC,EACT,CAAC,CAAEyC,OAAMC,KAAM,MACfjD,EAAM0E,KAAKzB,IAAI,CACbD,OACAC,KAAMA,EAAK5D,YAEjB6F,QAAO,CAACC,EAAKnB,KACbmB,EAAIC,QAAQpB,GACLmB,IACN,IAEGE,EAAgC3E,EAAcgE,KAAK1B,GACvDA,IAAS1C,EACL,CAAC,CAAE0C,OAAMC,KAAM,MACfD,IAASzC,EACT,CAAC,CAAEyC,OAAMC,KAAM,MACfjD,EAAM0E,KAAKzB,IAAI,CACbD,OACAC,KAAMA,EAAK5D,MACXiG,MAAO,QAEbJ,QAAO,CAACC,EAAKnB,KACbmB,EAAIC,QAAQpB,GACLmB,IACN,IAiBH,SAASI,EAAYC,EAAYC,GAC/B,OAAID,EAAExC,OAASyC,EAAEzC,KACRwC,EAAExC,KAAOyC,EAAEzC,KAGbwC,EAAEvC,KAAOwC,EAAExC,MAAQ,EAAIuC,EAAEvC,OAASwC,EAAExC,KAAO,EAAI,CACxD,CAMA,SAASyC,EAAUF,GACjB,OAAOA,EAAEG,KAAKJ,EAChB,CAEO,SAASK,IACd,MAAMC,EA3BR,SAAoBL,GAClB,IAAK,IAAIM,EAAIN,EAAEzE,OAAS,EAAG+E,EAAI,EAAGA,IAAK,CACrC,MAAMC,EAAIC,KAAKC,MAAMD,KAAKE,UAAYJ,EAAI,IACpCK,EAAIX,EAAEM,GACZN,EAAEM,GAAKN,EAAEO,GACTP,EAAEO,GAAKI,CACT,CACA,OAAOX,CACT,CAmBmBY,CAAQ,IAAInB,KAAuBI,IACpD,MAAO,CAACK,EAAUG,EAAS/E,MAAM,EAAG,KAClC4E,EAAUG,EAAS/E,MAAM,GAAI,KAC7B4E,EAAUG,EAAS/E,MAAM,GAAM,KAC/B4E,EAAUG,EAAS/E,MAAM,GAAM,MAEnC,CAEO,SAASuF,EAAYrC,EAAkBsC,GAC5C,OAAOtC,EAAMuC,QAAQpF,GAjBQ,IAAtBoE,EAiBiCpE,EAAMmF,KAAYvF,OAAS,CACrE,CC5EA,MAAMC,EAASC,IAAWC,OAAO,CAC/BsF,QAAS,CACPnF,OAAQ,EACRC,gBAAiB,QACjBmF,iBAAkB,MAIf,SAASC,IACd,OAAOtI,cAACQ,IAAI,CAACf,MAAOmD,EAAOwF,SAC7B,CCEO,MAAMG,EAA6ChJ,IAAA,IAAC,MACzDE,EAAK,WACL+I,EAAU,MACVC,EAAK,SACL1D,KACGpF,GACJJ,EAAA,OACCS,cAAC0I,IAAgB,CACfjJ,MAAO,CACL,CACEyD,gBAAiB6B,EACb4D,EAAM5D,SAAS6D,WACfD,EAAME,OAAOD,WACjBvF,aAAc,EACdyF,gBAAiB,EACjBC,kBAAmB,EACnBC,WAAY,SACZC,eAAgB,UAElBxJ,GAEFsF,SAAUA,KACNpF,EAASH,SAEbQ,cAACoF,IAAI,CACH3F,MAAO,CACL,CACE2B,MAAO2D,EAAW4D,EAAM5D,SAAS5D,KAAO,QACxC4C,UAAW,UAEbyE,GACAhJ,SAEDiJ,KAEc,EC5BfS,EACE,oBADFA,EAEE,CACJ,EAAG,QACH,EAAG,qBACH,EAAG,qBACH,EAAG,SAIMP,EAAQ,CACnB5D,SAAU,CACR6D,WAAYM,EAAa,GACzB/H,KAAM+H,EAAa,IAErBL,OAAQ,CACND,WAAYM,IAIhB,SAASC,IACP,MAAM,MAAElI,EAAK,SAAEmI,EAAQ,SAAEC,GAQ3B,WAA2C,IAAnBC,EAAYC,UAAA5G,OAAA,QAAAb,IAAAyH,UAAA,GAAAA,UAAA,GAAG,EACrC,MAAOtI,EAAOuI,GAAY3J,mBAASyJ,GAC7BF,EAAWK,uBAAY,IAAMD,GAAUE,GAAaA,EAAW,KAAI,CACvEF,IAEIH,EAAWI,uBAAY,IAAMD,GAAUE,GAAaA,EAAW,KAAI,CACvEF,IAGF,MAAO,CACLvI,QACAmI,WACAC,WAEJ,CAtBwCM,CAAe1H,GACrD,MAAO,CACL2C,KAAM3D,EACN2I,QAASR,EACTS,QAASR,EAEb,CAkBA,MAAMS,EAAgBjH,IAAWC,OAAO,CACtCiH,aAAc,CACZC,KAAM,EACNC,SAAU,GACVrD,SAAU,IACVsD,OAAQ,GAEVC,aAAc,CACZH,KAAM,EACNC,SAAU,GACVrD,SAAU,IACVsD,OAAQ,GAEVE,YAAa,CACXvG,SAAU,IAEZwG,iBAAkB,CAChBxG,SAAU,MAYRyG,EAA4DC,GAChEpF,eAAC3E,IAAI,CAAAhB,SAAA,CACH2F,eAAC3E,IAAI,CACHf,MAAO,CACLyG,cAAe,MACf+C,eAAgB,SAChBuB,aAAc,UACdhL,SAAA,CAEFQ,cAACuI,EAAQ,CACPkC,QAASF,EAAMV,QACf9E,SAAUwF,EAAM3F,MAAQxC,EACxBqG,MAAM,IACNhJ,MAAOqK,EAAcC,aACrBvB,WAAYsB,EAAcM,cAE5BpK,cAACuI,EAAQ,CACPkC,QAASF,EAAMX,QACfnB,MAAM,IACN1D,SAAUwF,EAAM3F,MAAQvC,EACxB5C,MAAOqK,EAAcC,aACrBvB,WAAYsB,EAAcM,iBAG9BjF,eAAC3E,IAAI,CACHf,MAAO,CACLyG,cAAe,MACf+C,eAAgB,SAChBuB,aAAc,UACdhL,SAAA,CAEFQ,cAACuI,EAAQ,CACPkC,QAASF,EAAMG,YACfjC,MAAM,2BACN1D,SAAUwF,EAAMI,cAAgB,EAChClL,MAAOqK,EAAcK,aACrB3B,WAAYsB,EAAcO,mBAE5BrK,cAACuI,EAAQ,CACPkC,QAASF,EAAMK,WACfnC,MAAM,eACN1D,SAAkC,IAAxBwF,EAAMI,cAChBlL,MAAOqK,EAAcK,aACrB3B,WAAYsB,EAAcM,cAE5BpK,cAACuI,EAAQ,CACPkC,QAASF,EAAMM,eACfpC,MAAM,eACN1D,SAAkC,IAAxBwF,EAAMI,cAChBlL,MAAOqK,EAAcK,aACrB3B,WAAYsB,EAAcM,oBAa5BU,EAA4DP,GAE9DvK,cAAA+K,WAAA,CAAAvL,SACG+K,EAAMS,UAAU1E,KAAKvD,IACpB,MAAMkI,EAAkBhD,EAAYsC,EAAM3E,MAAO7C,GAEjD,OACE/C,cAAC0I,IAAgB,CAEf+B,QAASA,IAAMF,EAAMW,QAAQnI,GAC7BgC,UAAWkG,EAAgBzL,SAE3BQ,cAAC2E,EAAI,CACHE,KAAM9B,EAAK8B,KACXD,KAAM7B,EAAK6B,KACXG,UAAWkG,EACXxL,MAAO,CAAE+D,aAAc,GAAIC,aAAc,GACzCuB,MAAOuF,EAAMvF,SATVmG,KAAKC,UAAUrI,GAWH,MAOtB,SAASsI,EAAY9L,GAUxB,IAVyB,MAC3BqG,EAAK,SACL6B,EAAQ,QACRyD,EAAO,WACPN,EAAU,YACVF,EAAW,eACXG,EAAc,WACdS,GAGD/L,EACC,MAAM,KAAEqF,EAAI,QAAEgF,EAAO,QAAEC,GAAYV,IAEnC,OACEhE,eAAC3E,IAAI,CAACf,MAAO,CAAEuK,KAAM,GAAIxK,SAAA,CACvBQ,cAACQ,IAAI,CAACf,MAAO,CAAEuK,KAAM,EAAGhB,WAAY,SAAUC,eAAgB,UAAWzJ,SACvEQ,cAAC0F,EAAQ,CACPE,MAAOA,EACPnG,MAAO,CACLwD,OAAQ,GACRkD,QAAS,GAEXnB,MAAsB,QAAfsG,MAGXtL,cAACQ,IAAI,CAACf,MAAO,CAAEuK,KAAM,EAAGhB,WAAY,aAAcC,eAAgB,cAAezJ,SAC/EQ,cAAC0F,EAAQ,CACPE,MAAOA,EACPnG,MAAO,CACLwD,OAAQ,GACRkD,QAAS,GAEXnB,MAAsB,QAAfsG,MAGXtL,cAACQ,IAAI,CAACf,MAAO,CAAEuK,KAAM,EAAGhB,WAAY,WAAYC,eAAgB,YAAazJ,SAC3EQ,cAAC0F,EAAQ,CACPE,MAAOA,EACPnG,MAAO,CACLwD,OAAQ,GACRkD,QAAS,GAEXnB,MAAsB,QAAfsG,MAGXtL,cAACQ,IAAI,CAACf,MAAO,CAAEuK,KAAM,EAAGhB,WAAY,SAAUC,eAAgB,UAAWzJ,SACvEQ,cAAC0F,EAAQ,CACPE,MAAOA,EACPnG,MAAO,CACLwD,OAAQ,GACRkD,QAAS,GAEXnB,MAAsB,QAAfsG,MAGXtL,cAACsI,EAAO,IACRtI,cAACoF,IAAI,CACH3F,MAAO,CAAEoE,SAAU,GAAIqG,OAAQ,GAAI1K,SAAA,2EAAA+L,OACpB3F,EAAMjD,OAAM,kBAC7B3C,cAAC+F,IAAU,CACTtG,MAAO,CACLwD,OAAuB,UAAfqI,EAAyB,IAAM,IACvCE,SAAU,GAEZxF,sBAAuB,CACrBgE,KAAM,EACNf,eAAgB,UAElBwC,YAAU,EAAAjM,SAEVQ,cAAC8K,EAAY,CACXlF,MAAOA,EACPoF,UAAWvD,EAAS,GACpByD,QAASA,EACTtG,KAAMA,EACNI,MAAsB,QAAfsG,MAGXtL,cAACsK,EAAY,CACXK,cAAe/E,EAAMjD,OACrBiI,WAAYA,EACZF,YAAaA,EACbG,eAAgBA,EAChBjG,KAAMA,EACNgF,QAASA,EACTC,QAASA,MAIjB,C,cCvQO,SAAS6B,GAAWnM,GAAgC,IAA/B,KAAEqF,EAAI,QAAE+G,GAAoBpM,EACtD,OACES,cAACQ,IAAI,CACHf,MAAO,CACLyG,cAAe,OACf1G,SAEF2F,eAACC,IAAI,CAAC3F,MAAO,CAAEoE,SAAU,GAAIwE,iBAAkB,GAAI7I,SAAA,CAAC,qBAElDQ,cAAC4L,KAAM,CACLC,cAAejH,EACfkH,cAAgBC,GACdJ,EAqBZ,SAAmC/G,GACjC,IAAKoH,OAAOC,UAAUrH,IAASA,GAAQ,GAAKA,GAAQ1C,EAClD,MAAM,IAAIgK,MAAM,QAADX,OAAS3G,EAAI,yCAE9B,OAAOA,CACT,CA1BoBuH,CAA0BC,SAASL,EAAW,MACvDvM,SAEAiD,EAA6B6D,KAAK1B,GACjC5E,cAAC4L,KAAOS,KAAI,CAEVnL,MAAOqB,EAAaqC,GAAM1D,MAC1BD,MAAO2D,GAFFA,OAKD,IACVO,eAACC,IAAI,CAAC3F,MAAO,CAAE2B,MAAOO,EAAKX,EAAEI,OAAQ5B,SAAA,CAClCmC,EAAKX,EAAEE,MACPqB,EAAaqC,GAAM1D,SACf,yBAKf,CCxCO,MAAMoL,GAAezJ,IAAWC,OAAO,CAC5CyJ,UAAW,CACTpG,QAAS,IAEXqG,UAAW,CACTpJ,YAAa,EACbD,YAAa,WCeXsJ,GAA4DlN,IAW3D,IAX4D,KACjEqF,EAAI,QACJ+G,EAAO,MACP/F,EAAK,SACL6B,EAAQ,WACRmD,EAAU,QACVM,EAAO,YACPR,EAAW,eACXG,EAAc,WACd6B,EAAU,WACVpB,GACD/L,EACC,MAAMoN,EAA2BlD,uBAAY,KAC3CiD,EAAWE,SAAS,SAAS,GAC5B,IAEH,OACEzH,eAAC0H,WAAQ,CAAArN,SAAA,CACPQ,cAACQ,IAAI,CACHf,MAAO,CACL6M,GAAaC,UACb,CACErG,cAAe,MACfjD,OAAQ,GACRgG,eAAgB,SAChBD,WAAY,WAEdxJ,SAEFQ,cAAC0L,GAAW,CAAC9G,KAAMA,EAAM+G,QAASA,MAEpC3L,cAACsI,EAAO,IACRtI,cAACQ,IAAI,CACHf,MAAO,CACLuK,KAAM,GACNxK,SAEFQ,cAACqL,EAAY,CACXzF,MAAOA,EACP6B,SAAUA,EACVyD,QAASA,EACTN,WAAYA,EACZF,YAAaA,EACbG,eAAgBA,EAChBS,WAAYA,MAGhBtL,cAACQ,IAAI,CACHf,MAAO,CACL6M,GAAaC,UACb,CACEtD,eAAgB,SAChB9C,QAAS,IAEX3G,SAIEQ,cAACuI,EAAQ,CACPE,MAAO,2BACPgC,QAASkC,EACTlN,MAAO,CACLwD,OAAQ,IAEVuF,WAAY,CACV3E,SAAU,UAMX,EAITiJ,GAAiBC,IAAMC,KAAKP,IAMnBQ,ICxGXC,GAAOC,GDwGIF,GAJf,SAAwBtH,GAAgD,IAA/C,YAAEyH,EAAW,WAAEV,GAA6B/G,EACnE,OAAO3F,cAAC8M,GAAc,IAAKM,EAAaV,WAAYA,GACtD,E,SCrGA,SAASW,KAAiS,OAApRA,GAAWC,OAAOC,OAASD,OAAOC,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAI/F,EAAI,EAAGA,EAAI6B,UAAU5G,OAAQ+E,IAAK,CAAE,IAAIlC,EAAS+D,UAAU7B,GAAI,IAAK,IAAIgG,KAAOlI,EAAc8H,OAAOK,UAAUC,eAAeC,KAAKrI,EAAQkI,KAAQD,EAAOC,GAAOlI,EAAOkI,GAAU,CAAE,OAAOD,CAAQ,EAAUJ,GAASS,MAAMC,KAAMxE,UAAY,CAElV,SAASyE,GAASzO,EAAM0O,GACtB,IAAI,MACFxF,EAAK,QACLyF,KACG3D,GACDhL,EACJ,OAAoB,gBAAoB,MAAO8N,GAAS,CACtDc,MAAO,6BACPnL,MAAO,GACPC,OAAQ,GACRmL,QAAS,YACTC,IAAKJ,EACL,kBAAmBC,GAClB3D,GAAQ9B,EAAqB,gBAAoB,QAAS,CAC3D6F,GAAIJ,GACHzF,GAAS,KAAMyE,KAAUA,GAAqB,gBAAoB,OAAQ,CAC3EqB,KAAM,OACNC,EAAG,qBACArB,KAAWA,GAAsB,gBAAoB,OAAQ,CAChEqB,EAAG,mHAEP,CACA,MAAMC,GAA0B,aAAiBT,IAClC,IClBR,SAASU,GAAQnP,GAMd,IANe,QACvBoP,EAAO,QACPC,GAIDrP,EACC,MAAO,CACLoP,QAASA,EACTE,MAAOD,EAAQE,SAASH,GAE5B,CCMO,SAASI,GAAchM,GAK5B,MAJ4B,CAC1B6B,KAAM7B,EAAK6B,KAAK+J,QAChB9J,KAAM9B,EAAK8B,KAGf,CCFA,MAAMmK,GACJzE,GAEAvK,cAAC0I,IAAgB,CACfjJ,MAAO,CACL,CACEuD,MAAO,GACPkD,cAAe,MACf+C,eAAgB,SAChBD,WAAY,UAEduB,EAAM9K,OAERgL,QAASF,EAAM0E,QAAQzP,SAEvBQ,cAACkP,GAAK,MAWJC,GAA2D5P,IAAA,IAAC,eAChE6P,EAAc,KACdxK,EAAI,WACJ0G,GACD/L,EAAA,OACCS,cAAA+K,WAAA,CAAAvL,SACG4P,IACqB,YAAnBA,EACCpP,cAACoF,IAAI,CACH3F,MAAO,CACLoE,SAAU,IACVrE,SACH,uBAID2F,eAAA4F,WAAA,CAAAvL,SAAA,CACEQ,cAACQ,IAAI,CACHf,MAAO,CACLyG,cAAe,MACf+C,eAAgB,gBAChBD,WAAY,UACZxJ,SAEFQ,cAACoF,IAAI,CACH3F,MAAO,CAAEoE,SAAU,GAAIwL,WAAY,EAAG7L,YAAa,IAAKhE,SAAA,eAAA+L,OACnD6D,EAAeE,MAAM,GAAGC,WAEjCvP,cAACQ,IAAI,CAAAhB,SACF,MACC,MACMgQ,EADiBJ,EAAeE,MAAM3M,OArCpC,EAuCR,OACEwC,eAAA4F,WAAA,CAAAvL,SAAA,CACG4P,EAAeE,MACb5M,MAAM,EA1CL,GA2CD4D,KAAI,CAACmJ,EAAMC,IACV1P,cAAC0F,EAAQ,CAEPG,MAAO4J,EAAKE,MAAMrJ,KAAKsJ,GACrBA,EAAKhK,MAAMU,IAAIyI,MAEjBtP,MAAO,CACLyK,OAAQ,GAEVlF,MAAsB,QAAfsG,GAPFoE,KAUVF,EAAsB,GAAC,eAAAjE,OACjBiE,EAAmB,wBAG/B,EAvBA,UA2BR,EAECK,GAAqB7C,eAAKmC,IAE1BW,GAA6EnK,IAAA,IAAC,eAClFyJ,EAAc,KACdxK,EAAI,QACJqK,EAAO,WACP3D,GACD3F,EAAA,OACCR,eAAA4F,WAAA,CAAAvL,SAAA,CACE2F,eAAC3E,IAAI,CACHf,MAAO,CACLyG,cAAe,MACf+C,eAAgB,WAChBuB,aAAc,UACdhL,SAAA,CAEFQ,cAACQ,IAAI,CAACf,MAAO,CAAEuK,KAAM,GAAIxK,SACvBQ,cAACoF,IAAI,CACH3F,MAAO,CACLoE,SAAU,GACVsC,QAAS,EACTpC,UAAW,UACXvE,SACH,uDAKHQ,cAACgP,GAAiB,CAChBC,QAASA,EACTxP,MAAO,CAEL2E,SAAU,WACVK,MAAO,EACPxB,OAAQ,aAIdjD,cAACsI,EAAO,IACRtI,cAAC+F,IAAU,CACTtG,MAAO,CACL6M,GAAaC,UACb,CACEvC,KAAM,IAERxK,SAED4P,EAAe9I,KAAKyJ,GACnB/P,cAAC6P,GAAkB,CACjBT,eAAgBW,EAChBnL,KAAMA,EACN0G,WAAYA,UAIjB,EAGUyB,WAAMC,KAAK8C,IC3KnB,MAAME,IAAQ,EACRC,GAAY,ICElB,IAAKC,GAAQ,SAARA,GAAQ,OAARA,IAAQ,qBAARA,IAAQ,mBAARA,IAAQ,eAARA,IAAQ,mBAARA,IAAQ,2BAARA,IAAQ,uBAARA,IAAQ,eAARA,IAAQ,iBAARA,IAAQ,mCAARA,IAAQ,+BAARA,IAAQ,4BAARA,CAAQ,MCUpB,MAAMC,GAAiD,CACrD,CAACD,GAASE,gBAAiBF,GAASG,aACpC,CAACH,GAASG,cAAeH,GAASI,MAClC,CAACJ,GAASI,OAAQJ,GAASK,KAC3B,CAACL,GAASK,MAAOL,GAASM,SAC1B,CAACN,GAASM,UAAWN,GAASO,KAC9B,CAACP,GAASO,MAAOP,GAASQ,OAC1B,CAACR,GAASQ,aAAS5O,GAUd,MAAM6O,GAAsC,CACjD/L,KAAM3C,EACN4C,KjBmD8B,IiBlD9B+L,KAAMV,GAASE,gBAEV,SAASS,GACdC,GAEA,MAAMC,EhBqCD,SAAkBnM,GACvB,MAAMmM,EAAOnM,EAAO,EACpB,KAAImM,EAAO5O,GAGX,OAAO4O,CACT,CgB3CeC,CAASF,EAAIlM,MAC1B,GAAY,MAARmM,EACF,MAAO,IACFD,EACHlM,KAAMmM,GAGV,GAAID,EAAIjM,KAAM,CACZoM,QAAQC,OAAOJ,EAAIF,OAASV,GAASE,gBACrC,MAAMe,GjBqCkBtM,EiBrCKiM,EAAIjM,KjBsC5BhD,EAAUgD,IiBrCf,GAAgB,MAAZsM,EACF,MAAO,IACFL,EACHlM,KAAM3C,EACN4C,KAAMsM,EAGZ,CjB6BK,IAAqBtM,EiB3B1B,MAAMuM,GAnCcC,EAmCUP,EAAIF,KAlC3BT,GAAekB,IADxB,IAAsBA,EAoCpB,OAAgB,MAAZD,EAEK,IACFN,EACHlM,KAAM3C,EACN2O,KAAMQ,EACNvM,UAAM/C,QANV,CAWF,CAIO,SAASwP,GAAY/R,GAQxB,IARyB,MAC3BqG,EAAK,YACL2L,EACA3C,QAAS4C,GAKVjS,EAECkS,GAAW,CACTC,YAFkBC,GAAS/L,EAAO4L,GAGlC5C,QAAS,CACP2C,cACAK,KAAMJ,EACNK,MAAO7B,KAGb,CAGA,MAAM8B,GAA0B,EAEhC,SAASH,GAAS/L,EAAegJ,GAC/B,MAAMmD,EAAyB,CAAC,EAMhC,OALAnM,EAAMoM,SAASjP,IACb,MAAM6B,EAAOgK,EAAQqD,WAAWlP,GAAQ+O,GAAY/O,EAAK6B,KAAK+J,QAC9DoD,EAAUnN,GAAQmN,EAAUnN,IAAS,GACrCmN,EAAUnN,GAAOoC,KAAKjE,EAAK,IAEtBgP,CACT,CAEA,SAASG,GACPtM,EACAhB,GAEqB,IADrBuN,EAAa5I,UAAA5G,OAAA,QAAAb,IAAAyH,UAAA,GAAAA,UAAA,GAAG,EAEhB0H,QAAQC,OAAOiB,GAAS,GACxB,MAAMC,EAAYxM,EAAMhB,IAAS,GACjC,GAAIuN,GAASC,EAAUzP,OAAQ,CAC7B,MAAM0P,EAAQD,EAAU1P,MAAM,EAAGyP,GAEjC,OADAvM,EAAMhB,GAAQwN,EAAU1P,MAAMyP,GACvBE,CACT,CACA,MAAMC,EAAY1M,EAAMkM,IAClBS,EAAkBJ,EAAQC,EAAUzP,OAC1C,IAAK2P,GAAaC,EAAkBD,EAAU3P,OAC5C,OAEF,MAAM0P,EAAQD,EAAU7G,OAAO+G,EAAU5P,MAAM,EAAG6P,IAGlD,OAFA3M,EAAMhB,GAAQ,GACdgB,EAAMkM,IAAaQ,EAAU5P,MAAM6P,GAC5BF,CACT,CACA,SAASG,GACPd,EACA9M,EACAC,GAEA,MAAMuN,EAAYV,EAAY9M,IAAS,GACjC2B,EAAQ6L,EAAUK,WAAW1P,GAASA,EAAK8B,OAASA,IAC1D,GAAI0B,GAAS,EAGX,OAFAmL,EAAY9M,GAAQ,IAAIwN,GACxBV,EAAY9M,GAAO8N,OAAOnM,EAAO,GAC1B6L,EAAU7L,GAEnB,MAAM+L,EAAYZ,EAAYI,KAAc,GAC5C,OAAIQ,EAAU3P,OAAS,GACrB+O,EAAYI,IAAaQ,EAAU5P,MAAM,GAClC4P,EAAU,SAFnB,CAMF,CAeA,MAAMK,GAA0BC,GAA4BjN,IAKrD,IALsD,MAC3DC,EAAK,QACLiN,EAAO,KACPpD,EAAI,QACJb,GACDjJ,EACC,MAAMmN,EAAW,IAAKlN,GAChByM,EAAQH,GAASY,EAAUD,EAASD,GAC1C,GAAa,MAATP,EACF,OAEF,MAAMU,EAAgD,CACpDnC,KACQ,IAANgC,EACI1C,GAASO,KACH,IAANmC,EACA1C,GAASQ,OACTR,GAASG,aACfzL,KAAMgK,EAAQgD,KAAK9C,SAAS+D,GAC5BG,UAAWJ,GAEb,MAAO,CACLlB,YAAaoB,EACbrD,KAAM,CACJF,MAAOE,EAAKF,OAASqD,EAAI,EAAgC,EAAI,GAC7DjD,MAAOF,EAAKE,MAAMpE,OAAO,CACvBwH,WACAnN,MAAOyM,KAGZ,EAEGY,GAAmBC,IAAA,IAAC,UACxBF,EAAS,OACTrQ,EAAM,SACN0O,GAKD6B,EAAA,OAAmBC,IAAqD,IAAlDvN,MAAO8L,EAAW,QAAEmB,EAAO,KAAEpD,EAAI,QAAEb,GAASuE,EAC7DvE,EAAQiD,OACVZ,QAAQmC,IAAI,qBAAD7H,OAAsBJ,KAAKC,UAAUsG,GAAY,MAAAnG,OAAKsH,IAEnE,MAAMQ,EAAMR,EAAUlQ,EAAS,EAC/B,GAAI0Q,EAAMrR,GAER,OAEF,IAAIsR,EAAiB,IAAK5B,GACtB9B,EAAa,CACfhK,MAAO,GACPmN,SAAU,CAAEnC,KAAMS,EAAUzM,KAAMiO,IAEpC,IAAK,IAAInL,EAAImL,EAASnL,GAAK2L,IAAO3L,EAAG,CACnC,MACM2K,EAAQH,GAASoB,EADNtR,KAAN0F,EAAczF,EAAIyF,EACcsL,GAC3C,GAAc,OAAVX,EACF,OAEEA,GACFzC,EAAKhK,MAAMoB,QAAQqL,EAEvB,CACA,MAAO,CACLX,YAAa4B,EACb7D,KAAM,CACJF,MAAOE,EAAKF,MAAQ,EACpBI,MAAOF,EAAKE,MAAMpE,OAAOqE,IAE5B,CACF,EA+CK2D,GAAWZ,GAAuB,GAClCa,GAAab,GAAuB,GACpCc,GAAYd,GAAuB,GACnCe,GAAYf,GAAuB,GACnCgB,GAAYhB,GAAuB,GACnCiB,GAAYjB,GAAuB,GACnCkB,GAAYlB,GAAuB,GAgC5BmB,GAAeb,GAAiB,CAC3CD,UAAW,EACXrQ,OAAQ,EACR0O,SAAUnB,GAASM,WAEfuD,GAAWd,GAAiB,CAChCD,UAAW,EACXrQ,OAAQ,EACR0O,SAAUnB,GAASK,OAEfyD,GAAYf,GAAiB,CACjCD,UAAW,EACXrQ,OAAQ,EACR0O,SAAUnB,GAASI,QAEf2D,GAAgE,CACpE,CAAC/D,GAASO,MAAO,CAAC8C,IAClB,CAACrD,GAASQ,QAAS,CAAC8C,GAhDcU,IAAwC,IAAvC,MAAEtO,EAAK,QAAEiN,EAAO,KAAEpD,EAAI,QAAEb,GAASsF,EACpE,MAAMnE,EAASyD,GAAW,CAAE5N,QAAOiN,UAASpD,OAAMb,YAClD,GAAc,MAAVmB,EACF,OAEF,MAAQ2B,YAAaoB,EAAUrD,KAAM0E,GAAYpE,EAC3CqE,EAAYD,EAAQxE,MAAM8C,WAC7B7C,GAASA,EAAKmD,SAASnC,OAASV,GAASO,OAE5C,GAAI2D,EAAY,EAEd,OAEF,MAAMC,EAAaF,EAAQxE,MAAMwE,EAAQxE,MAAMhN,OAAS,GAClD2R,EAAWH,EAAQxE,MAAMyE,GAe/B,OAbAD,EAAQxE,MAAQwE,EAAQxE,MACrBjN,MAAM,EAAG0R,GACT7I,OAAO4I,EAAQxE,MAAMjN,MAAM0R,EAAY,EAAGD,EAAQxE,MAAMhN,OAAS,IAEpEwR,EAAQxE,MAAM3I,KAAK,CACjB+L,SAAU,CACRnC,KAAMV,GAASqE,WACf3P,KAAOyP,EAAWtB,SAA4BnO,MAEhDgB,MAAOyO,EAAWzO,MAAM2F,OAAO+I,EAAS1O,SAG1CuO,EAAQ5E,MAAQ4E,EAAQ5E,MAAQ,EACzB,CAAEE,KAAM0E,EAASzC,YAAaoB,EAAU,GAoB/C,CAAC5C,GAASG,cAAe,CACvBoD,GACAC,GACAC,GACAC,GACAC,IAEF,CAAC3D,GAASM,UAAW,CAACsD,IACtB,CAAC5D,GAASK,MAAO,CAACwD,IAClB,CAAC7D,GAASI,OAAQ,CAAC0D,IACnB,CAAC9D,GAASE,gBAAiB,CAhHWoE,IAMjC,IALL5O,MAAO8L,EAAW,QAClBmB,EAAO,QACP4B,EAAO,KACPhF,EAAI,QACJb,GACD4F,EAQC,GAPI5F,EAAQiD,OACVZ,QAAQmC,IAAI,sBAAD7H,OACaJ,KAAKC,UACzBsG,GACD,MAAAnG,OAAKsH,EAAO,MAAAtH,OAAKkJ,KAGjBA,EAGH,YADAxD,QAAQC,OAAOuD,GAGjB,MAAMpB,EAAMR,EAAU,EAAI,EAC1B,GAAIQ,EAAMrR,GAER,OAEF,IAAIsR,EAAiB,IAAK5B,GACtB9B,EAAa,CACfhK,MAAO,GACPmN,SAAU,CAAEnC,KAAMV,GAASE,eAAgBxL,KAAMiO,IAEnD,IAAK,IAAInL,EAAImL,EAASnL,GAAK2L,IAAO3L,EAAG,CACnC,MACM2K,EAAQG,GAAec,EADZtR,KAAN0F,EAAczF,EAAIyF,EACoB+M,GACjD,GAAa,MAATpC,EAEF,OAEFzC,EAAKhK,MAAMoB,KAAKqL,EAClB,CACA,MAAO,CACLX,YAAa4B,EACb7D,KAAM,CACJF,MAAOE,EAAKF,MAAQ,EACpBI,MAAOF,EAAKE,MAAMpE,OAAOqE,IAE5B,IAuEH,SAAS6B,GAAUiD,GAUf,IAADC,EAAA,IAViB,YAClBjD,EAAW,KACXjC,EAAO,CAAEF,MAAO,EAAGI,MAAO,IAAI,IAC9BmB,EAAMH,GAAoB,QAC1B/B,GAMD8F,EACK9F,EAAQiD,OACVZ,QAAQmC,IAAIlD,GAASY,EAAIF,MAAOE,EAAIlM,KAAMkM,EAAIjM,MAExB,QAAxB8P,EAAAV,GAAenD,EAAIF,aAAK,IAAA+D,GAAxBA,EAA0B3C,SAAS4C,IACjC,MAAM7E,EAAS6E,EAAK,CAClB/B,QAAS/B,EAAIlM,KACb6P,QAAS3D,EAAIjM,KACbe,MAAO8L,EACPjC,OACAb,YAEY,MAAVmB,GAGJ0B,GAAW,IAAK1B,EAAQe,MAAKlC,WAAU,IAEzC,MAAMmC,EAAOF,GAAkBC,GACnB,MAARC,EAMJU,GAAW,CACTX,IAAKC,EACLW,cACAjC,OACAb,YARAA,EAAQ2C,YAYZ,SAAkC9B,EAAYiC,GAC5C,MAAMmD,EAAa,IAAKpF,EAAME,MAAO,IAAIF,EAAKE,QAgB9C,OAfArC,OAAOwH,QAAQpD,GAAaM,SAAQ+C,IAAiB,IAAfC,EAAGpP,GAAMmP,EACxCnP,IAGLiP,EAAWtF,OAAS3J,EAAMjD,OAC1BiD,EAAMoM,SAASjP,IACb8R,EAAWlF,MAAM3I,KAAK,CACpB+L,SAAU,CACRnC,KAAMV,GAAS+E,OACfrQ,KAAM7B,EAAK6B,KAAKiK,OAElBjJ,MAAO,CAAC7C,IACR,IACF,IAEG8R,CACT,CA9BwBK,CAAyBzF,EAAMiC,GAUvD,CC7XO,SAASyD,GAAkBvQ,GAChC,OAAQA,GACN,KAAKzC,EACH,OAAO,GACT,KAAKD,EACH,OAAO,GACT,KAAKD,EACH,OAAO,GACT,QACE,OAAQ2C,EAAO,EAErB,CCTO,MAAMwQ,GACXC,YAAYC,GAGsC,KACzCA,cAAQ,EAHfvH,KAAKuH,SAAWA,CAClB,CAOAxG,SAASlK,GACP,GAAIA,IAASzC,EACX,OAAO,GACF,GAAIyC,IAAS1C,EAClB,OAAO,GACF,GAAI0C,IAASmJ,KAAKuH,SACvB,OAAO,GACF,CACL,MAAMC,EAAYJ,GAAkBvQ,GAEpC,OAAI2Q,EADsBJ,GAAkBpH,KAAKuH,UAEvCC,EAAY,EAEbA,CAEX,CACF,CAEAtD,WAAWlP,GACT,OAAOA,EAAK6B,KAAK+J,UAAYZ,KAAKuH,UAA0B,MAAdvS,EAAK8B,IACrD,EClCK,MAAM2Q,GAAsB/F,GAASA,EAAKF,MACpCkG,GAAY,MAEZC,GAA0BjG,IACrC,MAAMkG,EAAqD,CAAC,EAiC5D,OAhCAlG,EAAKE,MAAMqC,SAASpC,IAClB+F,EAAgB/F,EAAKmD,SAASnC,MAC5B+E,EAAgB/F,EAAKmD,SAASnC,OAAS,EACzC+E,EAAgB/F,EAAKmD,SAASnC,OAoClC,SAA4BhB,GAC1B,MAAMmD,EAAWnD,EAAKmD,SACtB,OAAQA,EAASnC,MACf,KAAKV,GAAS+E,OACZ,OAAQlC,EAASnO,MACf,KAAK,GACH,OAAQ,EACV,KAAK,GACH,OAAQ,GACV,QACE,OAAOgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,GAAI8N,GAAI,IAAO9C,EAASnO,MAEjE,KAAKsL,GAASO,KACZ,OAAQsC,EAASnO,MACf,KAAK,GACH,OAAQ,EACV,KAAK,GACH,OAAQ,IACV,QAEE,OAAImO,EAASnO,MAAQ,EACZgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,GAAI8N,GAAI,IAAO9C,EAASnO,MAEpDgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,EAAG8N,EAAG,GAAK9C,EAASnO,MAG/D,KAAKsL,GAASQ,OACZ,OAAIqC,EAASnO,MAAQ,EACZgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,GAAI8N,GAAI,GAAK9C,EAASnO,MAElDgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,EAAG8N,EAAG,GAAK9C,EAASnO,MAE3D,KAAKsL,GAASqE,WACZ,OAAIxB,EAASnO,MAAQ,EACZgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,GAAI8N,GAAI,GAAK9C,EAASnO,MAElDgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,EAAG8N,EAAG,GAAK9C,EAASnO,MAE3D,KAAKsL,GAASM,SACZ,OAAIuC,EAASnO,MAAQ,EACZgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG,GAAI8N,GAAI,GAAK9C,EAASnO,MAElDgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG9F,EAAG4T,EAAG,IAAO9C,EAASnO,MAE7D,KAAKsL,GAASK,KACZ,OAAIwC,EAASnO,MAAQ,EACZgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAGhG,EAAG8T,GAAI,GAAK9C,EAASnO,MAEjDgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG9F,EAAG4T,EAAG,IAAO9C,EAASnO,MAE7D,KAAKsL,GAASI,MACZ,OAAIyC,EAASnO,MAAQ,EACZgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG/F,EAAG6T,GAAI,GAAK9C,EAASnO,MAEjDgR,GAAO,CAAE7N,EAAG,EAAG8N,EAAG,GAAK,CAAE9N,EAAG9F,EAAG4T,EAAG,IAAO9C,EAASnO,MAE7D,KAAKsL,GAASE,eACd,KAAKF,GAASG,aACd,KAAKH,GAAS4F,WACZ,OAAQ,EACV,QACE,MAAM,IAAI5J,MAAM,0BAEtB,CAnG4C6J,CAAmBnG,EAAK,IAElE+F,EAAgBzF,GAAS+E,QAAUe,GACjCL,EAAgBzF,GAAS+E,SACxB,EACDQ,IAEFE,EAAgBzF,GAASO,MAAQuF,GAAIL,EAAgBzF,GAASO,OAAQ,EAAG,GACzEkF,EAAgBzF,GAASQ,QAAUsF,GACjCL,EAAgBzF,GAASQ,SACxB,GACD,GAEFiF,EAAgBzF,GAASqE,YAAcyB,GACrCL,EAAgBzF,GAASqE,aACxB,IACD,GAEFoB,EAAgBzF,GAASM,UAAYwF,GACnCL,EAAgBzF,GAASM,WACxB,GACD,KAEFmF,EAAgBzF,GAASK,MAAQyF,GAAIL,EAAgBzF,GAASK,OAAQ,GAAK,GAC3EoF,EAAgBzF,GAASI,OAAS0F,GAChCL,EAAgBzF,GAASI,QACxB,GACD,IAGAhD,OAAO2I,OAAON,GAAiB7O,QAC7B,CAACoP,EAAKjV,KAAWiV,GAAO,IAAMjV,GAAS,MACpC,CAAC,EAuEV,SAAS2U,GACPtV,EACA+S,EACAtL,GAEA,OAASsL,EAAIwC,EAAIvV,EAAMuV,IAAMxC,EAAItL,EAAIzH,EAAMyH,IAAOA,EAAIzH,EAAMyH,GAAKzH,EAAMuV,CACzE,CAEA,SAASG,GAAIjO,EAAuBoO,EAAaC,GAC/C,OAAS,MAALrO,EACK,EAELA,EAAIoO,EACCA,EAELpO,EAAIqO,EACCA,EAEFrO,CACT,CC9HO,SAASsO,GAAI9W,GAUR,IATVqG,MAAO0Q,EAAQ,SACfhB,EAAQ,UACRiB,GAAY,EAAI,OAChBC,EAAS,SAMVjX,EACC,MAAMqP,EAAU,IAAIwG,GAAYE,GAC1B1P,EAAQ0Q,EAAShQ,KAAKmQ,GRZvB,SAAsBC,EAAc9H,GACzC,MAAO,CACLhK,KAAM8J,GAAS,CAAEC,QAAS+H,EAAI9R,KAAMgK,YACpC/J,KAAM6R,EAAI7R,KAEd,CQO0C8R,CAAaF,EAAS7H,KACxDgI,EAAwB,eAAXJ,EAA0Bd,GAAiBF,GAC9D,GAAIe,EAAW,CACb,MAAMM,EAAgBC,GAA0B,CAAEN,OAAQI,IAC1DtF,GAAa,CAAE1L,QAAO2L,YAAasF,EAActF,YAAa3C,YAC9D,MAAMmI,EAAYF,EAAcG,eAChC,GAAyB,IAArBD,EAAUpU,OACZ,MAAM,IAAIuJ,MAAM,iBAElB,OAAO6K,CACT,CAAO,CACL,MAAME,EAAoBC,GAAsB,CAAEV,OAAQI,IAC1DtF,GAAa,CAAE1L,QAAO2L,YAAa0F,EAAkB1F,YAAa3C,YAClE,MAAMuI,EAAWF,EAAkBG,cACnC,GAAgB,MAAZD,EACF,MAAM,IAAIjL,MAAM,iBAElB,MAAO,CAACiL,EACV,CACF,CAEA,MAAMD,GAAwB,WAEG,IAC3BC,GAHyB,OAC7BX,EAAShB,IACWjM,UAAA5G,OAAA,QAAAb,IAAAyH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEpB8N,EAAoB5B,GACpBtD,EAAQ,EACZ,MAAO,CACLZ,YAAc9B,IACZ,MAAM6H,EAAed,EAAO/G,GAO5B,GANAA,EAAKF,MAAQ+H,GACG,MAAZH,GAAoBG,GAAgBD,KACtCF,EAAW1H,EACX4H,EAAYC,KAEZnF,EACEA,EAAQlC,GACV,MAAM,IAAI/D,MAAM,iBAClB,EAEFkL,YAAaA,IAAMD,EAEvB,EAEML,GAA4B,WAED,IAFE,OACjCN,EAAShB,IACWjM,UAAA5G,OAAA,QAAAb,IAAAyH,UAAA,GAAAA,UAAA,GAAG,CAAC,EACpBwN,EAAoB,GACpBM,EAAoB5B,GACpBtD,EAAQ,EACZ,MAAO,CACLZ,YAAc9B,IAEZ,KADE0C,EACEA,EAAQlC,GACV,MAAM,IAAI/D,MAAM,kBAElB,MAAMoL,EAAed,EAAO/G,GAC5BA,EAAKF,MAAQ+H,EACY,IAArBP,EAAUpU,QACZoU,EAAU/P,KAAKyI,GACf4H,EAAYC,GACHA,EAAeD,GACxBN,EAAY,CAACtH,GACb4H,EAAYC,GACHA,IAAiBD,GAC1BN,EAAU/P,KAAKyI,EAEf,EAGJuH,aAAcA,IAAMD,EAExB,ECvCeQ,OAjDf,SAAmBhY,GAAgD,IAA/C,YAAE6N,EAAW,WAAEV,GAA6BnN,EAC9D,MAAM,KAAEqF,EAAI,MAAEgB,EAAK,WAAE0F,GAAe8B,EAC9BoK,EAAQ,CACZ5R,QACA0P,SAAU1Q,EACV2R,WAAW,EACXC,OAAQ,eAEFiB,OAAQC,EAASC,KAAMC,GAAWC,oBACxC,CAAC,OAAQL,IACTM,gBACQ3Y,GAAM,KACLkX,GAAKmB,MAGVO,EAAQ,CACZnS,QACA0P,SAAU1Q,EACV2R,WAAW,EACXC,OAAQ,UAEFiB,OAAQO,EAASL,KAAMM,GAAWJ,oBACxC,CAAC,OAAQE,IACTD,gBACQ3Y,GAAM,GACLkX,GAAK0B,KAEd,CAAEG,QAAqB,YAAZR,IAEb,IAAItI,EAAmC,CAAC,WAWxC,MATgB,YAAZsI,IACFtI,EAAiB,CAAC,CAAE3G,MAAO,2BAAQ6G,MAAOsI,IAC1B,YAAZI,EACF5I,EAAepI,KAAK,WACC,YAAZgR,GACT5I,EAAepI,KAAK,CAAEyB,MAAO,2BAAQ6G,MAAO2I,KAK9CjY,cAAC8P,GAAqB,CACpBV,eAAgBA,EAChBxK,KAAMA,EACN0G,WAAYA,EACZ2D,QAASvC,EAAWyL,QAG1B,EAGA,SAAShZ,GAAMiZ,GACb,OAAO,IAAIC,SAASC,IAClBC,WAAWD,EAASF,EAAO,GAE/B,CC9BO,MAAMI,GAAY,YACnBC,GAAgC,CACpCC,KAAM,aACNjQ,MAAO,kB,aC9BT,MAAMkQ,GAAsB,IAE5B,SAASC,KACP,MAAM,MAAE5V,EAAK,OAAEC,GAAW4V,KAAWC,IAAI,UACzC,OAAO9V,GAAS2V,IAAuB1V,GAAU0V,GAC7C,MACA,OACN,CCUA,MAAM/V,GAASC,IAAWC,OAAO,CAC/BiW,cAAe,CACb3U,SAAU,WACVC,KAAM,EACNC,IAAK,EACLG,MAAO,EACPC,OAAQ,KAINsU,GAAS,CACbC,QACAC,OAAQ3B,IAEJ4B,GAAqD5Z,IAKpD,IAJL6Z,MAAOC,EAAY,WACnB3M,EAAU,YACVU,EAAW,MACX3N,GACDF,EACC,OACES,cAAA+K,WAAA,CAAAvL,SACEQ,cAACsZ,kBAAe,CAAA9Z,SACb8N,OAAOwH,QAAQkE,IAAQ1S,KAAIX,IAA8B,IAA5ByT,EAAOG,GAAe5T,EAClD,OAAIyT,IAAUC,EAAqB,KAGjCrZ,cAACV,EAAI,CAEHG,MAAO,CAACmD,GAAOmW,cAAetZ,GAC9BC,QAAS,IAAIF,SAEbQ,cAACuZ,EAAc,CACbnM,YAAaA,EACbV,WAAYA,KANT0M,EAQA,OAIZ,EAoBDI,GFnCC,SACLC,EACAC,GAEA,MAAMC,EAA6B,IAC9BF,EACHT,OAAQ,IAAKS,EAAqBT,OAAQ,CAACR,IAAYC,KAEzD,SAASmB,IACP,MAAMC,EAAaH,EAAQI,SAASC,SACpC,OAAIF,EAAWG,WAAWL,EAAaM,OAlBpBvB,EAmBImB,EAAWK,UAAUP,EAAaM,KAAKtX,SAlBvDwX,SAAS,KACTzB,EAAKwB,UAAU,EAAGxB,EAAK/V,OAAS,GAGlC+V,EAiBEiB,EAAaM,KAAOxB,GAAiBC,KAtBhD,IAAuBA,CAuBrB,CACA,SAAS0B,EAAML,GACb,MAAOX,EAAOiB,GAAe/M,OAAOwH,QAAQ6E,EAAaX,QAAQsB,MAC/D/a,IAAA,IAAEyV,EAAGqF,GAAY9a,EAAA,OAAK8a,EAAY3B,OAASqB,CAAQ,KAChD,CAACvB,GAAWC,IAEjB,MAAO,CACLW,QACAiB,cAEJ,CAEA,OAAO,WACL,MAAOjB,EAAOmB,GAAY1a,mBAASua,EAAMR,KAAkBR,OAE3DoB,qBAAU,IAUDd,EAAQe,QATf,SAA6BX,EAAeY,GAK1CH,EAASH,EAAMR,KAAkBR,MACnC,KAIC,CAACmB,IAEJC,qBAAU,KACRG,OAAOC,SAASnS,MAAQkR,EAAaX,OAAOI,GAAO3Q,KAAK,GACvD,IAGH,MAAMmE,EAAWnD,uBACf,SAACoR,GAA+C,IAA9B,QAAEC,GAAU,GAAOvR,UAAA5G,OAAA,QAAAb,IAAAyH,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEvCsR,EAAkBlB,EAAaX,OAAO6B,GAClCA,EACArC,GACJ,MAAMuC,EAAepB,EAAaX,OAAO6B,GAErCC,EACFpB,EAAQoB,QAAQnB,EAAaM,KAAOc,EAAarC,MAEjDgB,EAAQ1S,KAAK2S,EAAaM,KAAOc,EAAarC,KAElD,GACA,CAACiB,EAAclB,KAGjB,MAAO,CACLW,QACA3Q,MAAOkR,EAAaX,OAAOI,GAAO3Q,MAClCiE,WAAY,CACVE,WACAuL,OAAQuB,EAAQvB,QAGtB,CACF,CEvCuB6C,CAhBF,CACnBf,KAAMgB,0BACNC,aAAc,OACdlC,OAAQ,CACNC,KAAM,CACJP,KAAM,GACNjQ,MAAO,8CAETyQ,OAAQ,CACNR,KAAM,UACNjQ,MAAO,gDAIG0S,OAIhB,SAASC,KACP,MAAOxW,EAAM+G,GAAW9L,mBAAmCoC,GACrDoZ,EChFD,WACL,MAAOzV,EAAO0V,GAAYzb,mBAAoB,KACvC4H,EAAU8T,GAAe1b,mBAAsB,CAAC,GAAI,GAAI,GAAI,KAanE,MAAO,CACL+F,QACA6B,WACAmD,WAfiBnB,uBAAY,IAAM6R,EAAS,KAAK,CAACA,IAgBlDpQ,QAfczB,uBACb1G,GAASuY,GAAUE,GAAaA,EAASjQ,OAAOxI,MACjD,CAACuY,IAcD5Q,YAZkBjB,uBAAY,IAAM8R,EAAY/T,MAAwB,CACxE8T,IAYAzQ,eAVqBpB,uBACrB,IAAM6R,GAAUE,GAAaA,EAAS9Y,MAAM,EAAG8Y,EAAS7Y,OAAS,MACjE,CAAC2Y,IAUL,CDyDyBG,GACjBC,EE9EsBC,MAC5B,MAAOvM,EAAgBwM,GAAa/b,mBAA2B,IAC/D,MAAO,CACLuP,iBACAwM,YACD,EFyEmBD,IACd,MAAEvC,EAAK,WAAE1M,GAAe8M,KACxBlO,ED3ED,WACL,MAAOuQ,EAAMC,GAAWjc,mBAAqB+Y,IAU7C,OATA4B,qBAAU,KACR,SAASuB,IACPD,EAAQlD,KACV,CAGA,OAFAC,KAAWmD,iBAAiB,SAAUD,GAE/B,IACLlD,KAAWoD,oBAAoB,SAAUF,EAAuB,GACjE,CAACD,IACGD,CACT,CC+DqBK,GAEnB,OADAjL,QAAQmC,IAAIiI,GAEVrb,cAACQ,IAAI,CACHf,MAAO,CACLuK,KAAM,EACN9G,gBAAiB,YACjBD,OAAQ,QACRzD,SAEF2F,eAAC3E,IAAI,CAACf,MAAO,CAAEwD,OAAQ,QAASzD,SAAA,CAC9BQ,cAACoF,IAAI,CAAC3F,MAAO,CAAEoE,SAAU,IAAKrE,SAAC,+CAC/BQ,cAACQ,IAAI,CAACf,MAAO,CAAEuK,KAAM,GAAIxK,SACvBQ,cAACmZ,GAAY,CACXC,MAAOA,EACPhM,YAAa,CACXxI,OACA+G,aACG0P,KACAK,EACHpQ,cAEFoB,WAAYA,EACZjN,MAAO,CACLuK,KAAM,WAOpB,CAGA,MAAMmS,GAAc,IAAIC,eAOTC,OANKA,IAClBrc,cAACsc,uBAAmB,CAACC,OAAQJ,GAAY3c,SACvCQ,cAACob,GAAG,MGjHR,MAAMoB,GAAcC,QACW,cAA7B9B,OAAOb,SAAS4C,UAEe,UAA7B/B,OAAOb,SAAS4C,UAEhB/B,OAAOb,SAAS4C,SAAStC,MACvB,2DA8CN,SAASuC,GAAgBC,EAAeC,GACtCC,UAAUC,cACPC,SAASJ,GACTK,MAAKC,IACJA,EAAaC,cAAgB,KAC3B,MAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,KACA,cAA3BF,EAAiBG,QACfT,UAAUC,cAAcS,YAI1BvM,QAAQmC,IACN,gHAKEyJ,GAAUA,EAAOY,UACnBZ,EAAOY,SAASP,KAMlBjM,QAAQmC,IAAI,sCAGRyJ,GAAUA,EAAOa,WACnBb,EAAOa,UAAUR,IAGvB,EACD,CACF,IAEFS,OAAMC,IACL3M,QAAQ2M,MAAM,4CAA6CA,EAAM,GAEvE,CCrGAC,IAAYC,kBAAkB,OAAO,IAAM1C,KAC3CyC,IAAYE,eAAe,MAAO,CAChCC,QAASpD,SAASqD,eAAe,UDoB5B,SAAkBpB,GACvB,GAA6C,kBAAmBC,UAAW,CAMzE,GAJkB,IAAIoB,IACnBjD,+BACDN,OAAOb,SAASqE,MAEJC,SAAWzD,OAAOb,SAASsE,OAIvC,OAGFzD,OAAOqB,iBAAiB,QAAQ,KAC9B,MAAMY,EAAK,GAAArR,OAAM0P,+BAAsB,sBAEnCuB,KAgEV,SAAiCI,EAAeC,GAE9CwB,MAAMzB,GACHK,MAAKqB,IAEJ,MAAMC,EAAcD,EAASE,QAAQ1F,IAAI,gBAEnB,MAApBwF,EAAS7G,QACO,MAAf8G,IAA8D,IAAvCA,EAAYE,QAAQ,cAG5C3B,UAAUC,cAAc2B,MAAMzB,MAAKC,IACjCA,EAAayB,aAAa1B,MAAK,KAC7BtC,OAAOb,SAAS8E,QAAQ,GACxB,IAIJjC,GAAgBC,EAAOC,EACzB,IAEDc,OAAM,KACL1M,QAAQmC,IACN,gEACD,GAEP,CAxFQyL,CAAwBjC,EAAOC,GAI/BC,UAAUC,cAAc2B,MAAMzB,MAAK,KACjChM,QAAQmC,IACN,2GAED,KAIHuJ,GAAgBC,EAAOC,EACzB,GAEJ,CACF,CCjDAE,CAAuB,CACrBW,UAAWA,IAAMzM,QAAQmC,IAAI,sCAC7BqK,SAAUA,IAAMxM,QAAQmC,IAAI,+BAG9B,WACE,MAAM0L,EAAenE,OAAOC,SAASqD,eAAe,mBACpD,GAAIa,EAAc,CAChB,MAAMC,EAAaD,EAAaC,WAC5BA,GACFA,EAAWC,YAAYF,EAE3B,CACF,CAEAG,E","file":"static/js/main.76e943f9.chunk.js","sourcesContent":["import React, { useState, FunctionComponent } from 'react'\nimport { Animated, StyleProp, ViewStyle } from 'react-native'\nimport { Transition } from 'react-transition-group'\nimport { TransitionProps } from 'react-transition-group/Transition'\n\ninterface FadeProps extends TransitionProps {\n  style?: StyleProp<ViewStyle>\n  timeout: number\n}\n\nfunction delay(fn: () => void) {\n  return requestAnimationFrame(() => {\n    // current frame\n    requestAnimationFrame(() => {\n      // next frame, react updated dom\n      requestAnimationFrame(() => {\n        // the third frame, start animation in the first idle frame\n        fn()\n      })\n    })\n  })\n}\n\n// animation may be delayed by react rendering\n// keep components mounted for some extra time to ensure animation finishes before components are unmounted\nconst EXTRA_TIMEOUT = 300\n\nexport const Fade: FunctionComponent<FadeProps> = ({\n  children,\n  style,\n  timeout,\n  ...restProps\n}) => {\n  const [fadeAnim, ] = useState(new Animated.Value(0))\n\n  return (\n    <Transition\n      timeout={timeout + EXTRA_TIMEOUT}\n      onEntering={() => {\n        // start fading in from the next frame (react is rendering in current frame, so animation would be laggy if started immediately)\n        delay(() => {\n          Animated.timing(fadeAnim, { toValue: 1, duration: timeout }).start()\n        })\n      }}\n      onExiting={() => {\n        // start fading out after a delay\n        delay(() => {\n          Animated.timing(fadeAnim, {\n            toValue: 0,\n            duration: timeout,\n          }).start()\n        })\n      }}\n      {...restProps}\n    >\n      <Animated.View\n        style={[\n          {\n            opacity: fadeAnim,\n          },\n          style,\n        ]}\n      >\n        {children}\n      </Animated.View>\n    </Transition>\n  )\n}\nFade.defaultProps = {\n  appear: true,\n  enter: true,\n  mountOnEnter: true,\n  unmountOnExit: true,\n}\n","export type Suit = 'S' | 'C' | 'D' | 'H'\nexport type SuitRedJoker = 'R'\nexport type SuitBlackJoker = 'B'\nexport type SuitJoker = SuitRedJoker | SuitBlackJoker\nexport type AllSuit = Suit | SuitRedJoker | SuitBlackJoker\nexport type SuiteMetadata<S> = {\n  value: S\n  label: string\n  text: string\n  color: string\n}\nexport const SUIT_NORMAL: Record<Suit, SuiteMetadata<Suit>> = {\n  H: {\n    value: 'H',\n    label: '♥',\n    text: '♥',\n    color: 'red',\n  },\n  D: {\n    value: 'D',\n    label: '♦',\n    text: '♦',\n    color: 'red',\n  },\n  S: {\n    value: 'S',\n    label: '♠',\n    text: '♠',\n    color: 'black',\n  },\n  C: {\n    value: 'C',\n    label: '♣',\n    text: '♣',\n    color: 'black',\n  },\n} as const\nexport const SUIT_JOKER: Record<SuitJoker, SuiteMetadata<SuitJoker>> = {\n  B: {\n    // black joker\n    value: 'B',\n    label: '',\n    text: 'B',\n    color: 'black',\n  },\n  R: {\n    // red joker\n    value: 'R',\n    label: '',\n    text: 'R',\n    color: 'red',\n  },\n} as const\nexport const SUITS_JOKER = [SUIT_JOKER.B, SUIT_JOKER.R]\nexport const SUIT = {\n  ...SUIT_NORMAL,\n  ...SUIT_JOKER,\n}\nexport const SUITS = [\n  SUIT_NORMAL.H,\n  SUIT_NORMAL.S,\n  SUIT_NORMAL.C,\n  SUIT_NORMAL.D,\n]\nexport const SUIT_VALUES = ['S', 'C', 'D', 'H']\nexport function parseSuit(\n  suit: string,\n): [undefined, string] | [Suit, undefined] {\n  if (!SUIT_VALUES.includes(suit)) {\n    return [\n      undefined,\n      `Suit should be one of ${SUIT_VALUES}, but found ${suit}.`,\n    ]\n  }\n  return [suit as Suit, undefined]\n}\n\nconst NEXT_SUIT = {\n  S: 'C',\n  C: 'D',\n  D: 'H',\n  H: undefined,\n} as const\nexport const SUIT_START: Suit = 'S'\nexport function getNextSuit(suit: Suit): Suit | undefined {\n  return NEXT_SUIT[suit]\n}\n","import { AllSuit, parseSuit, Suit, SuitBlackJoker, SuitRedJoker } from './Suite'\n\nexport type tJ = 11\nexport const J = 11\nexport type tQ = 12\nexport const Q = 12\nexport type tK = 13\nexport const K = 13\nexport type tA = 1\nexport const A = 1\nexport type BlackJoker = 14\nexport const BLACK_JOKER = 14\nexport type RedJoker = 15\nexport const RED_JOKER = 15\nexport type NaturalRank =\n  | tA\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | tJ\n  | tQ\n  | tK\n  | BlackJoker\n  | RedJoker\nexport const NATURAL_RANK_MIN = A\nexport const NATURAL_RANK_MAX = RED_JOKER\nexport type NaturalRankWithoutJokers = Exclude<\n  NaturalRank,\n  BlackJoker | RedJoker\n>\nexport const NATURAL_RANKS = [\n  A,\n  2,\n  3,\n  4,\n  5,\n  6,\n  7,\n  8,\n  9,\n  10,\n  J,\n  Q,\n  K,\n  BLACK_JOKER,\n  RED_JOKER,\n] as const\ninterface RankMetadata {\n  label: string\n  text: string\n  naturalRank: NaturalRank\n}\nexport const NATURAL_RANK: Record<NaturalRank, RankMetadata> = {\n  [A]: { label: 'A', text: 'A', naturalRank: A },\n  2: { label: '2', text: '2', naturalRank: 2 },\n  3: { label: '3', text: '3', naturalRank: 3 },\n  4: { label: '4', text: '4', naturalRank: 4 },\n  5: { label: '5', text: '5', naturalRank: 5 },\n  6: { label: '6', text: '6', naturalRank: 6 },\n  7: { label: '7', text: '7', naturalRank: 7 },\n  8: { label: '8', text: '8', naturalRank: 8 },\n  9: { label: '9', text: '9', naturalRank: 9 },\n  10: { label: '10', text: '10', naturalRank: 10 },\n  [J]: { label: 'J', text: 'J', naturalRank: J },\n  [Q]: { label: 'Q', text: 'Q', naturalRank: Q },\n  [K]: { label: 'K', text: 'K', naturalRank: K },\n  [BLACK_JOKER]: { label: 'Joker', text: 'J', naturalRank: BLACK_JOKER },\n  [RED_JOKER]: { label: 'Joker', text: 'J', naturalRank: RED_JOKER },\n} as const\nexport function nextRank(rank: NaturalRank): NaturalRank | undefined {\n  const next = rank + 1\n  if (next > RED_JOKER) {\n    return undefined\n  }\n  return next as NaturalRank\n}\nexport const NATURAL_RANKS_WITHOUT_JOKERS: NaturalRankWithoutJokers[] = NATURAL_RANKS.slice(\n  0,\n  NATURAL_RANKS.length - 2,\n) as any\n/**\n * There are 15 different cards. In one game play, they will have a power\n * rank depending on main rank.\n */\nexport type PowerRank =\n  | 0\n  | 1\n  | 2\n  | 3\n  | 4\n  | 5\n  | 6\n  | 7\n  | 8\n  | 9\n  | 10\n  | 11\n  | 12\n  | 13\n  | 14\nexport const POWER_RANK_MAX = 14\nexport type CardRaw =\n  | {\n      // Natural rank, from [A, K] maps to [1, 13]\n      // 14 is kept for A's order rank.\n      // Black Joker is 15, Red Joker is 16\n      rank: NaturalRankWithoutJokers\n      suit: Suit\n      dedup?: number\n    }\n  | {\n      rank: BlackJoker\n      suit: SuitBlackJoker\n      dedup?: number\n    }\n  | {\n      rank: RedJoker\n      suit: SuitRedJoker\n      dedup?: number\n    }\nexport type CardRawLoose = { rank: NaturalRank; suit: AllSuit }\n\nexport function parseRawCards(text: string): CardRaw[] {\n  const cards: CardRaw[] = []\n  for (let i = 0; i < text.length; ) {\n    if (text[i] === 'R') {\n      if (text[i + 1] !== 'J') {\n        throw new Error(\n          `R should be followed by J -- red joker in ${text}, position ${i}`,\n        )\n      }\n      cards.push({ rank: RED_JOKER, suit: 'R' })\n      i += 2\n    } else if (text[i] === 'B') {\n      if (text[i + 1] !== 'J') {\n        throw new Error(\n          `B should be followed by J -- black joker in ${text}, position ${i}`,\n        )\n      }\n      cards.push({ rank: BLACK_JOKER, suit: 'B' })\n      i += 2\n    } else {\n      const parsedSuit = parseSuit(text[i])\n      const [ , error] = parsedSuit\n      if (parsedSuit[1] != null) {\n        throw new Error(`${error}, in ${text}, position ${i}`)\n      }\n      const [suit] = parsedSuit\n      if (text[i + 1] === '1' && text[i + 2] === '0') {\n        cards.push({ rank: 10, suit })\n        i += 3\n      } else if (text[i + 1] === 'A') {\n        cards.push({ rank: A, suit })\n        i += 2\n      } else if (text[i + 1] === 'J') {\n        cards.push({ rank: J, suit })\n        i += 2\n      } else if (text[i + 1] === 'Q') {\n        cards.push({ rank: Q, suit })\n        i += 2\n      } else if (text[i + 1] === 'K') {\n        cards.push({ rank: K, suit })\n        i += 2\n      } else {\n        const rank = text[i + 1].charCodeAt(0) - '0'.charCodeAt(0)\n        if (rank < 2 || rank > 9) {\n          throw new Error(\n            `Rank should be in range [2, 9], but found ${rank}, in ${text}, position ${\n              i + 1\n            }`,\n          )\n        }\n        cards.push({ rank: rank as NaturalRankWithoutJokers, suit })\n        i += 2\n      }\n    }\n  }\n  return cards\n}\n","import React from 'react'\nimport {\n  Image,\n  ScrollView,\n  StyleProp,\n  StyleSheet,\n  Text,\n  View,\n  ViewStyle,\n} from 'react-native'\nimport nekoImg from './imgs/neko-40x40.png'\nimport {\n  CardRaw,\n  CardRawLoose,\n  NATURAL_RANK,\n} from './strategy/models/const'\nimport { Suit, SUIT } from './strategy/models/Suite'\n\nconst STACKED_CARD_MARGIN = 52\nconst STACKED_CARD_MARGIN_LARGE = 68\n\nconst styles = StyleSheet.create({\n  card: {\n    width: 74,\n    height: 100,\n    backgroundColor: 'white',\n    borderColor: 'black',\n    borderWidth: 2,\n    borderRadius: 4,\n  },\n  cardLarge: {\n    width: 100,\n    height: 134,\n  },\n  cardStacked: {\n    marginRight: -STACKED_CARD_MARGIN,\n    marginBottom: -STACKED_CARD_MARGIN,\n  },\n  cardStackedLarge: {\n    marginRight: -STACKED_CARD_MARGIN_LARGE,\n    marginBottom: -STACKED_CARD_MARGIN_LARGE,\n  },\n  cardLabel: {\n    fontFamily: 'monospace',\n    fontSize: 16,\n    lineHeight: 16,\n    textAlign: 'center',\n    width: 20,\n    marginTop: 4,\n    fontWeight: 'bold',\n  },\n  cardLabelLarge: {\n    fontSize: 24,\n    lineHeight: 24,\n    width: 30,\n  },\n  cardCuteImage: {\n    position: 'absolute',\n    left: 'calc(50% - 20px)',\n    top: 'calc(50% - 20px)',\n    width: 40,\n    height: 40,\n  },\n  cardCuteImageLarge: {\n    width: 56,\n    height: 56,\n    left: 'calc(50% - 28px)',\n    top: 'calc(50% - 28px)',\n  },\n  overlayWhenDisabled: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  },\n})\n\nexport function Card({\n  rank,\n  suit,\n  isStacked,\n  disabled,\n  style,\n  large,\n}: CardRawLoose & {\n  isStacked?: boolean\n  disabled?: boolean\n  style?: StyleProp<ViewStyle>\n  large?: boolean\n}) {\n  const rankDef = NATURAL_RANK[rank]\n  const suitDef = SUIT[suit as Suit] // TODO: fix type force cast\n  return (\n    <View\n      style={[\n        styles.card,\n        large && styles.cardLarge,\n        isStacked && styles.cardStacked,\n        isStacked && large && styles.cardStackedLarge,\n        style,\n      ]}\n    >\n      <Text\n        style={[\n          styles.cardLabel,\n          large && styles.cardLabelLarge,\n          { color: suitDef.color },\n        ]}\n      >\n        {rankDef.label === '10'\n          ? rankDef.label\n          : rankDef.label.split('').join('\\n')}\n        {'\\n'}\n        {suitDef.label}\n      </Text>\n      <Image\n        source={{ uri: nekoImg }}\n        style={[styles.cardCuteImage, large && styles.cardCuteImageLarge]}\n      />\n      {disabled && <View style={styles.overlayWhenDisabled} />}\n    </View>\n  )\n}\n\nconst HAND_MARGIN = 13\nconst CONTAINER_PADDING = 0\n\ninterface CardDeckProps {\n  cards?: CardRaw[]\n  hands?: CardRaw[][]\n  style?: StyleProp<ViewStyle>\n  large?: boolean\n}\nexport const CardDeck: React.FunctionComponent<CardDeckProps> = ({\n  cards,\n  hands,\n  style,\n  large,\n}) => {\n  const stackedCardMargin = large\n    ? STACKED_CARD_MARGIN_LARGE\n    : STACKED_CARD_MARGIN\n\n  return (\n    <ScrollView\n      style={style}\n      contentContainerStyle={{\n        flexWrap: 'wrap',\n        flexDirection: 'row',\n        padding: CONTAINER_PADDING,\n        paddingRight: stackedCardMargin + CONTAINER_PADDING, // cancel margin of hands\n        paddingBottom: stackedCardMargin + CONTAINER_PADDING,\n      }}\n    >\n      {!!cards &&\n        cards.map((card, index) => (\n          <Card\n            key={card.rank + card.suit + index}\n            {...card}\n            isStacked\n            large={large}\n          />\n        ))}\n      {!!hands &&\n        hands.map((hand, handID) => {\n          const handNode = hand.map((card, cardID) => (\n            <Card\n              key={card.rank + card.suit + cardID}\n              {...card}\n              isStacked\n              large={large}\n            />\n          ))\n\n          if (handID > 0) {\n            // no wrapping\n            return (\n              <View\n                style={{\n                  flexDirection: 'row',\n                  flexWrap: 'nowrap',\n                  marginRight: HAND_MARGIN,\n                }}\n                key={handID}\n              >\n                {handNode}\n              </View>\n            )\n          } else {\n            // initial hand can be long, allow wrapping as normal\n            return (\n              <View\n                style={{\n                  flexDirection: 'row',\n                  flexWrap: 'wrap',\n                  marginRight: HAND_MARGIN,\n                  maxWidth: '100%', // set max width to enable wrapping\n                }}\n                key={handID}\n              >\n                {handNode}\n              </View>\n            )\n          }\n        })}\n    </ScrollView>\n  )\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAQAAAAm93DmAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfjAhUINB2XPPnXAAAEaElEQVRIx52WWWxUZRTHf3e2TmfrdJlaSWlRlkK6AA1BiCQNWzRIUBACwS1Go2LE0JASwaSVh8qDxroEhBcJFBMTbNQGFRIftAqoIBpKY9vU0EUK0xY6bYdZ78zxodLZ7nTh/3bv+c7vnO+c8333wv0olwp0M3EoZBMZaa0KB/mFnJkAd+BhW1rrKr1b6aV4JsDXHWJpZYGmLcdwdqvMGqRM21W7Es71bCmjFpuG7cWV62qwmrDMJMP63fKPLA3yhjHZsjynt1nuyJIA67VdDZpvc208TJ3ppZrbV2jHRTYWwIuP/c/O3kCQLCO50wfqsDsI4aSwaPiEy5eX77SaDeAPDQcHsjv4kJWYdem6rAXUK47f2M5tqtg3byEF2DAihDO93KKV83xFB5Rg5e506mdgQ0bXajkuNyQqWopIjxyVR/3GM1RNPd5ZHJx/56gMy1QakPekyE0N1slwLuXkOvWPKWHjisrPsiLIYZzpcNmceira9//yoLSLOwHgl0tyMwnaIWtUjmjOKwYOrY30TSxtEpdsE1+c8xdikxcknIJcHuKtWC1jRX1szq53dYUTj0bCWBJqbqOYwpQuLKDe+EA1q1KaofxQnxA5KJfFLaoEREQVv4hEZFD8ml3fKzSRmQjcXO7v0VjcJPslJEekJmWr8bomxSOsid+yjk2Pm4sSIrj5Hcihidf4iJI0Z3RcC1ntYKMS96bA2vZ9UtRjsklCEpW3BdknYRG5LuckkibHE6K/SNZ4bwEKXbOSLz8HrRzCyRnycRPEwHE6WZsmxzKyi4cKGLkHzHdZks/6RsY4Thd1VLCbXRRymnfQpwEWkGcfirt/nlwV9mpspFmWyYCIXJC5skJOJkxlogZlsY+qWFN8PjWgEbecMFcAJzbe57nkyYiTD1+YQAzoHvAOaSwrYi0f0EcjD7KUydTPkIfBGPDfwe5rGst07EXhCb7kzSk+IX/h6eLWxGMGNLya5vbrlQZpFnXSeycoW4TaxBBVDw23yf3qguTfojIRmMHne6bII50C8rxwOHWiluX1NN8XsFHs7SxKKaseXll8988Z41pknocd2q0yUfeIf7ofgHH9KKVjVKc9QJg5UDry9aRXVUxBOSVzh9iNkUlkYHtu9x7pTDNE9xSRq/Ky2L08g5IISE42SmegKlByji4cZGsG93KJjzlGDn2BsU/oS84oWZmG/APY2ck3zKeCcopwYATCeOjmKq10E6CRUjba+mdzcSqgJdOZw2VG1R2GCvaOqS3OrMxsvRlUv++Ox++o+tTsppYeKjGm7lADqFMMn/Fdf+Ts+Z0FZrUzVD0QwooJCOElK3S6t6RJ9bQ2lFaaIiDJ7rGS5lNJMS7mKFuVrOgNbuqWWAzeUfqQCTcFhSKzPaRGr+vnPG38VXp/oo1Rhujnb9pQ44EL2cwiCnBiwoYBK1HAhDmlbRECKIgSJChRvHi5TQ8tfEuQpKbrMJFBBhb02NEBFo3fDJVhBAjgJ8xdQoQI3zP+B8PxaLIJz6YTAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTAyLTIxVDA4OjUyOjI5KzAwOjAwIu73FAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wMi0yMVQwODo1MjoyOSswMDowMFOzT6gAAAAASUVORK5CYII=\"","import {\n  BLACK_JOKER,\n  CardRaw,\n  NATURAL_RANKS,\n  RED_JOKER,\n} from '../strategy/models/const'\nimport { SUITS } from '../strategy/models/Suite'\n\nconst ALL_CARDS_ONE_DECK: CardRaw[] = NATURAL_RANKS.map((rank): CardRaw[] =>\n  rank === BLACK_JOKER\n    ? [{ rank, suit: 'B' }]\n    : rank === RED_JOKER\n    ? [{ rank, suit: 'R' }]\n    : SUITS.map((suit) => ({\n        rank,\n        suit: suit.value,\n      })),\n).reduce((res, cards) => {\n  res.push(...cards)\n  return res\n}, [])\n\nconst ALL_CARDS_2ND_DECK: CardRaw[] = NATURAL_RANKS.map((rank): CardRaw[] =>\n  rank === BLACK_JOKER\n    ? [{ rank, suit: 'B' }]\n    : rank === RED_JOKER\n    ? [{ rank, suit: 'R' }]\n    : SUITS.map((suit) => ({\n        rank,\n        suit: suit.value,\n        dedup: 1\n      })),\n).reduce((res, cards) => {\n  res.push(...cards)\n  return res\n}, [])\n\n/**\n * reference: https://stackoverflow.com/a/6274381\n * Shuffles array in place.\n * @param {Array} a items An array containing the items.\n */\nfunction shuffle<T>(a: T[]): T[] {\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1))\n    const x = a[i]\n    a[i] = a[j]\n    a[j] = x\n  }\n  return a\n}\n\nfunction cardCompare(a: CardRaw, b: CardRaw): number {\n  if (a.rank !== b.rank) {\n    return a.rank - b.rank\n  }\n\n  return a.suit < b.suit ? -1 : a.suit === b.suit ? 0 : 1\n}\n\nfunction cardEqual(a: CardRaw, b: CardRaw): boolean {\n  return cardCompare(a, b) === 0\n}\n\nfunction sortCards(a: CardRaw[]): CardRaw[] {\n  return a.sort(cardCompare)\n}\n\nexport function generateRandomHands(): CardRaw[][] {\n  const allCards = shuffle([...ALL_CARDS_ONE_DECK, ...ALL_CARDS_2ND_DECK])\n  return [sortCards(allCards.slice(0, 27)),\n    sortCards(allCards.slice(27, 27*2)),\n    sortCards(allCards.slice(27*2, 27*3)),\n    sortCards(allCards.slice(27*3, 108))\n  ]\n}\n\nexport function canIAddCard(cards: CardRaw[], cardToAdd: CardRaw): boolean {\n  return cards.filter((card) => cardEqual(card, cardToAdd)).length < 2\n}\n","import React from 'react'\nimport { View, StyleSheet } from 'react-native'\n\nconst styles = StyleSheet.create({\n  divider: {\n    height: 2, // avoid floating error\n    backgroundColor: 'black',\n    marginHorizontal: 10,\n  },\n})\n\nexport function Divider() {\n  return <View style={styles.divider} />\n}\n","import React, { FunctionComponent, ReactNode } from 'react'\nimport {\n  Text,\n  TouchableOpacity,\n  TouchableOpacityProps,\n  StyleProp,\n  TextStyle,\n} from 'react-native'\nimport { theme } from './CardsChooser'\n\ninterface MyButtonProps extends TouchableOpacityProps {\n  title: ReactNode\n  titleStyle?: StyleProp<TextStyle>\n}\n\nexport const MyButton: FunctionComponent<MyButtonProps> = ({\n  style,\n  titleStyle,\n  title,\n  disabled,\n  ...restProps\n}) => (\n  <TouchableOpacity\n    style={[\n      {\n        backgroundColor: disabled\n          ? theme.disabled.background\n          : theme.button.background,\n        borderRadius: 2,\n        paddingVertical: 8,\n        paddingHorizontal: 4,\n        alignItems: 'center',\n        justifyContent: 'center',\n      },\n      style,\n    ]}\n    disabled={disabled}\n    {...restProps}\n  >\n    <Text\n      style={[\n        {\n          color: disabled ? theme.disabled.text : 'white',\n          textAlign: 'center',\n        },\n        titleStyle,\n      ]}\n    >\n      {title}\n    </Text>\n  </TouchableOpacity>\n)\n","import React, { useCallback, useState } from 'react'\nimport {\n  ScrollView,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  View,\n} from 'react-native'\nimport { Card, CardDeck } from './Card'\nimport { canIAddCard } from './common/cardUtils'\nimport { CardState } from './common/types'\nimport { Divider } from './Divider'\nimport { MyButton } from './MyButton'\nimport {\n  A,\n  CardRaw,\n  NaturalRank,\n  NATURAL_RANK_MAX,\n  NATURAL_RANK_MIN,\n} from './strategy/models/const'\nimport { WindowSize } from './useWindowSize'\n\nconst palette = {\n  blue: 'rgb(33, 150, 243)',\n  grey: {\n    0: 'black',\n    4: 'rgb(161, 161, 161)',\n    6: 'rgb(223, 223, 223)',\n    8: 'white',\n  },\n}\n\nexport const theme = {\n  disabled: {\n    background: palette.grey[6],\n    text: palette.grey[4],\n  },\n  button: {\n    background: palette.blue,\n  },\n}\n\nfunction useRankState() {\n  const { value, increase, decrease } = useIncDecState(A)\n  return {\n    rank: value as NaturalRank,\n    incRank: increase,\n    decRank: decrease,\n  }\n}\n\nfunction useIncDecState(defaultValue = 0) {\n  const [value, setValue] = useState(defaultValue)\n  const increase = useCallback(() => setValue((valueNow) => valueNow + 1), [\n    setValue,\n  ])\n  const decrease = useCallback(() => setValue((valueNow) => valueNow - 1), [\n    setValue,\n  ])\n\n  return {\n    value,\n    increase,\n    decrease,\n  }\n}\n\nconst controlStyles = StyleSheet.create({\n  incDecButton: {\n    flex: 2,\n    minWidth: 80,\n    maxWidth: 200,\n    margin: 6,\n  },\n  actionButton: {\n    flex: 1,\n    minWidth: 80,\n    maxWidth: 150,\n    margin: 6,\n  },\n  buttonTitle: {\n    fontSize: 20,\n  },\n  buttonTitleSmall: {\n    fontSize: 20,\n  },\n})\ninterface ControlPanelProps {\n  decRank: () => void\n  incRank: () => void\n  clearCards: () => void\n  randomCards: () => void\n  deleteLastCard: () => void\n  rank: NaturalRank\n  numberOfCards: number\n}\nconst ControlPanel: React.FunctionComponent<ControlPanelProps> = (props) => (\n  <View>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignContent: 'center',\n      }}\n    >\n      <MyButton\n        onPress={props.decRank}\n        disabled={props.rank <= NATURAL_RANK_MIN}\n        title=\"<\"\n        style={controlStyles.incDecButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n      <MyButton\n        onPress={props.incRank}\n        title=\">\"\n        disabled={props.rank >= NATURAL_RANK_MAX}\n        style={controlStyles.incDecButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n    </View>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignContent: 'center',\n      }}\n    >\n      <MyButton\n        onPress={props.randomCards}\n        title=\"随机发牌\"\n        disabled={props.numberOfCards > 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitleSmall}\n      />\n      <MyButton\n        onPress={props.clearCards}\n        title=\"清除\"\n        disabled={props.numberOfCards === 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n      <MyButton\n        onPress={props.deleteLastCard}\n        title=\"删除\"\n        disabled={props.numberOfCards === 0}\n        style={controlStyles.actionButton}\n        titleStyle={controlStyles.buttonTitle}\n      />\n    </View>\n  </View>\n)\n\ninterface AddCardPanelProps {\n  cards: CardRaw[]\n  cardsLeft: CardRaw[]\n  addCard: (card: CardRaw) => void\n  rank: NaturalRank\n  large?: boolean\n}\nconst AddCardPanel: React.FunctionComponent<AddCardPanelProps> = (props) => {\n  return (\n    <>\n      {props.cardsLeft.map((card: CardRaw) => {\n        const canIAddThisCard = canIAddCard(props.cards, card)\n\n        return (\n          <TouchableOpacity\n            key={JSON.stringify(card)}\n            onPress={() => props.addCard(card)}\n            disabled={!canIAddThisCard}\n          >\n            <Card\n              suit={card.suit}\n              rank={card.rank}\n              disabled={!canIAddThisCard}\n              style={{ marginRight: -36, marginBottom: 5 /* give room to show horizontal scroll bar */}} \n              large={props.large}\n            />\n          </TouchableOpacity>\n        )\n      })}\n    </>\n  )\n}\n\nexport function CardsChooser({\n  cards,\n  allCards,\n  addCard,\n  clearCards,\n  randomCards,\n  deleteLastCard,\n  windowSize,\n}: CardState & {\n  windowSize: WindowSize\n}) {\n  const { rank, incRank, decRank } = useRankState()\n\n  return (\n    <View style={{ flex: 1 }}>\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <View style={{ flex: 1, alignItems: 'flex-start', justifyContent: 'flex-start' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <View style={{ flex: 1, alignItems: 'flex-end', justifyContent: 'flex-end' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n        <CardDeck\n          cards={cards}\n          style={{\n            height: 60,\n            padding: 6,\n          }}\n          large={windowSize === 'BIG'}\n        />\n      </View>\n      <Divider />\n      <Text\n        style={{ fontSize: 14, margin: 4 }}\n      >{`点击扑克牌添加，目前已有${cards.length}张牌`}</Text>\n      <ScrollView\n        style={{\n          height: windowSize === 'SMALL' ? 110 : 150,\n          flexGrow: 0,\n        }}\n        contentContainerStyle={{\n          flex: 1,\n          justifyContent: 'center',\n        }}\n        horizontal\n      >\n        <AddCardPanel\n          cards={cards}\n          cardsLeft={allCards[0]}\n          addCard={addCard}\n          rank={rank}\n          large={windowSize === 'BIG'}\n        />\n      </ScrollView>\n      <ControlPanel\n        numberOfCards={cards.length}\n        clearCards={clearCards}\n        randomCards={randomCards}\n        deleteLastCard={deleteLastCard}\n        rank={rank}\n        incRank={incRank}\n        decRank={decRank}\n      />\n    </View>\n  )\n}\n","import React from 'react'\nimport { View, Text, Picker } from 'react-native'\nimport { RankState } from './common/types'\nimport { SUIT } from './strategy/models/Suite'\nimport {\n  BLACK_JOKER,\n  NaturalRankWithoutJokers,\n  NATURAL_RANK,\n  NATURAL_RANKS_WITHOUT_JOKERS,\n} from './strategy/models/const'\n\nexport function RankChooser({ rank, setRank }: RankState) {\n  return (\n    <View\n      style={{\n        flexDirection: 'row',\n      }}\n    >\n      <Text style={{ fontSize: 22, marginHorizontal: 6 }}>\n        当前打\n        <Picker\n          selectedValue={rank}\n          onValueChange={(itemValue) =>\n            setRank(assertNonJokerNaturalRank(parseInt(itemValue, 10)))\n          }\n        >\n          {NATURAL_RANKS_WITHOUT_JOKERS.map((rank) => (\n            <Picker.Item\n              key={rank}\n              label={NATURAL_RANK[rank].label}\n              value={rank}\n            />\n          ))}\n        </Picker>{' '}\n        <Text style={{ color: SUIT.H.color }}>\n          {SUIT.H.label}\n          {NATURAL_RANK[rank].label}\n        </Text>\n        是百搭\n      </Text>\n    </View>\n  )\n}\n\nfunction assertNonJokerNaturalRank(rank: number): NaturalRankWithoutJokers {\n  if (!Number.isInteger(rank) || rank <= 0 || rank >= BLACK_JOKER) {\n    throw new Error(`rank ${rank} is not valid non-joker natural rank`)\n  }\n  return rank as NaturalRankWithoutJokers\n}\n","import { StyleSheet } from 'react-native';\n\nexport const commonStyles = StyleSheet.create({\n  container: {\n    padding: 10,\n  },\n  borderBox: {\n    borderWidth: 2,\n    borderColor: 'black',\n  },\n});\n","import React, { Fragment, useCallback } from 'react'\nimport { View } from 'react-native'\nimport { CardsChooser } from './CardsChooser'\nimport { AppState, NavigationProps } from './common/types'\nimport { Divider } from './Divider'\nimport { MyButton } from './MyButton'\nimport { RankChooser } from './RankChooser'\nimport { commonStyles } from './styles'\n\ninterface StatelessHomePageProps\n  extends Pick<\n      AppState,\n      | 'rank'\n      | 'setRank'\n      | 'cards'\n      | 'allCards'\n      | 'clearCards'\n      | 'addCard'\n      | 'randomCards'\n      | 'deleteLastCard'\n      | 'windowSize'\n    >,\n    Pick<NavigationProps, 'navigation'> {}\nconst HomePage: React.FunctionComponent<StatelessHomePageProps> = ({\n  rank,\n  setRank,\n  cards,\n  allCards,\n  clearCards,\n  addCard,\n  randomCards,\n  deleteLastCard,\n  navigation,\n  windowSize,\n}) => {\n  const handleSolutionCalcButton = useCallback(() => {\n    navigation.navigate('Result')\n  }, [])\n\n  return (\n    <Fragment>\n      <View\n        style={[\n          commonStyles.container,\n          {\n            flexDirection: 'row',\n            height: 40,\n            justifyContent: 'center',\n            alignItems: 'center',\n          },\n        ]}\n      >\n        <RankChooser rank={rank} setRank={setRank} />\n      </View>\n      <Divider />\n      <View\n        style={{\n          flex: 1,\n        }}\n      >\n        <CardsChooser\n          cards={cards}\n          allCards={allCards}\n          addCard={addCard}\n          clearCards={clearCards}\n          randomCards={randomCards}\n          deleteLastCard={deleteLastCard}\n          windowSize={windowSize}\n        />\n      </View>\n      <View\n        style={[\n          commonStyles.container,\n          {\n            justifyContent: 'center',\n            padding: 6,\n          },\n        ]}\n      >\n        {(() => {\n          return (\n            <MyButton\n              title={'开始拆牌'}\n              onPress={handleSolutionCalcButton}\n              style={{\n                height: 60,\n              }}\n              titleStyle={{\n                fontSize: 28,\n              }}\n            />\n          )\n        })()}\n      </View>\n    </Fragment>\n  )\n}\n\nconst MemoedHomePage = React.memo(HomePage)\n\nfunction HomePageWrapper({ screenProps, navigation }: NavigationProps) {\n  return <MemoedHomePage {...screenProps} navigation={navigation} />\n}\n\nexport default HomePageWrapper\n","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgClose(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0V0z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.2c0e4ee3.svg\";\nexport { ForwardRef as ReactComponent };","import { GameContext } from './GameContext'\nimport { NaturalRank, PowerRank } from './const'\n\nexport interface Rank {\n  natural: NaturalRank\n  power: PowerRank\n}\n\nexport function makeRank({\n  natural,\n  context,\n}: {\n  natural: NaturalRank\n  context: GameContext\n}): Rank {\n  return {\n    natural: natural,\n    power: context.getOrder(natural),\n  }\n}\n","import { CardRaw, CardRawLoose, NATURAL_RANK } from './const'\nimport { GameContext } from './GameContext'\nimport { makeRank, Rank } from './Rank'\nimport { AllSuit, SUIT } from './Suite'\n\nexport type Card = {\n  rank: Rank\n  suit: AllSuit\n}\n\nexport function parseCardRaw(raw: CardRaw, context: GameContext): Card {\n  return {\n    rank: makeRank({ natural: raw.rank, context }),\n    suit: raw.suit,\n  }\n}\n\nexport function cardToText(card: Card): string {\n  return SUIT[card.suit].text + NATURAL_RANK[card.rank.natural].text\n}\n\nexport function cardRawToText(card: CardRaw): string {\n  return SUIT[card.suit].text + NATURAL_RANK[card.rank].text\n}\n\nexport function cardToCardRaw(card: Card): CardRaw {\n  const loose: CardRawLoose = {\n    rank: card.rank.natural,\n    suit: card.suit,\n  }\n  return loose as CardRaw\n}\n","import React, { memo } from 'react'\nimport {\n  View,\n  Text,\n  ScrollView,\n  TouchableOpacity,\n  StyleProp,\n  ViewStyle,\n} from 'react-native'\nimport { Divider } from './Divider'\nimport { CardDeck } from './Card'\nimport { commonStyles } from './styles'\nimport { StrategyResult } from './useResultState'\nimport { ReactComponent as Close } from './icons/close.svg'\nimport { WindowSize } from './useWindowSize'\nimport { NaturalRankWithoutJokers } from './strategy/models/const'\nimport { cardToCardRaw } from './strategy/models/Card'\n\ninterface SolutionVisualizationProps {\n  strategyResult: StrategyResult[]\n  rank: NaturalRankWithoutJokers\n  windowSize: WindowSize\n  onClose: () => void\n}\n\ninterface WindowSizeToggleProps {\n  onClose: () => void\n  style: StyleProp<ViewStyle>\n}\nconst CloseWindowButton: React.FunctionComponent<WindowSizeToggleProps> = (\n  props,\n) => (\n  <TouchableOpacity\n    style={[\n      {\n        width: 40,\n        flexDirection: 'row',\n        justifyContent: 'center',\n        alignItems: 'center',\n      },\n      props.style,\n    ]}\n    onPress={props.onClose}\n  >\n    <Close />\n  </TouchableOpacity>\n)\n\nconst MAX_SOLUTIONS = 5\n\ninterface SolutionViewProps {\n  rank: NaturalRankWithoutJokers\n  strategyResult: StrategyResult\n  windowSize: WindowSize\n}\nconst SolutionView: React.FunctionComponent<SolutionViewProps> = ({\n  strategyResult,\n  rank,\n  windowSize,\n}) => (\n  <>\n    {strategyResult &&\n      (strategyResult === 'loading' ? (\n        <Text\n          style={{\n            fontSize: 20,\n          }}\n        >\n          计算中\n        </Text>\n      ) : (\n        <>\n          <View\n            style={{\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n            }}\n          >\n            <Text\n              style={{ fontSize: 18, flexShrink: 0, marginRight: 20 }}\n            >{`分数${strategyResult.plans[0].score}`}</Text>\n          </View>\n          <View>\n            {(() => {\n              const solutionsCount = strategyResult.plans.length\n              const hiddenMoreSolutions = solutionsCount - MAX_SOLUTIONS\n              return (\n                <>\n                  {strategyResult.plans\n                    .slice(0, MAX_SOLUTIONS)\n                    .map((plan, planIndex) => (\n                      <CardDeck\n                        key={planIndex}\n                        hands={plan.plays.map((play) =>\n                          play.cards.map(cardToCardRaw),\n                        )}\n                        style={{\n                          margin: 6,\n                        }}\n                        large={windowSize === 'BIG'}\n                      />\n                    ))}\n                  {hiddenMoreSolutions > 0 &&\n                    `还有${hiddenMoreSolutions}种方案`}\n                </>\n              )\n            })()}\n          </View>\n        </>\n      ))}\n  </>\n)\nconst MemoedSolutionView = memo(SolutionView)\n\nconst SolutionVisualization: React.FunctionComponent<SolutionVisualizationProps> = ({\n  strategyResult,\n  rank,\n  onClose,\n  windowSize,\n}) => (\n  <>\n    <View\n      style={{\n        flexDirection: 'row',\n        justifyContent: 'flex-end',\n        alignContent: 'center',\n      }}\n    >\n      <View style={{ flex: 1 }}>\n        <Text\n          style={{\n            fontSize: 20,\n            padding: 4,\n            textAlign: 'center',\n          }}\n        >\n          拆牌策略计算结果\n        </Text>\n      </View>\n      {/* <View style={{ width: 2, backgroundColor: 'black' }} /> */}\n      <CloseWindowButton\n        onClose={onClose}\n        style={{\n          // to the right and centered\n          position: 'absolute',\n          right: 0,\n          height: '100%',\n        }}\n      />\n    </View>\n    <Divider />\n    <ScrollView\n      style={[\n        commonStyles.container,\n        {\n          flex: 2,\n        },\n      ]}\n    >\n      {strategyResult.map((result) => (\n        <MemoedSolutionView\n          strategyResult={result}\n          rank={rank}\n          windowSize={windowSize}\n        />\n      ))}\n    </ScrollView>\n  </>\n)\n\nexport default React.memo(SolutionVisualization)\n","export const DEBUG = false\nexport const MAX_PLANS = 10000000\n","import { Card, cardToText } from './Card'\nimport { NaturalRank, PowerRank } from './const'\n\nexport enum PlayType {\n  UNKNOWN = 0,\n  SINGLE,\n  PAIR,\n  TRIPLE,\n  FULL_HOUSE, // like 555,22\n  STRAIGHT, // like 12345\n  TUBE, // like 33,44,55\n  PLATE, // like 333,444\n  // === The following is a bomb ===\n  STRAIGHT_FLUSH, // like 34567 all hearts\n  BOMB_N_TUPLE, // like 4444, 55555, 88888888\n  FOUR_JOKER,\n}\n\nexport type PlayRankBombNTuple = {\n  type: PlayType.BOMB_N_TUPLE\n  rank: PowerRank\n  cardCount: number\n}\n\nexport type PlayRankFourJoker = {\n  type: PlayType.FOUR_JOKER\n}\n\nexport type PlayRankNormal = {\n  type: PlayType.FULL_HOUSE | PlayType.PAIR | PlayType.SINGLE | PlayType.TRIPLE\n  rank: PowerRank\n}\n\nexport type PlayRankNatural = {\n  type:\n    | PlayType.STRAIGHT_FLUSH\n    | PlayType.STRAIGHT\n    | PlayType.TUBE\n    | PlayType.PLATE\n  rank: NaturalRank\n}\n\nexport type PlayRank =\n  | PlayRankNormal\n  | PlayRankNatural\n  | PlayRankBombNTuple\n  | PlayRankFourJoker\n\nexport type Play = {\n  playRank: PlayRank\n  cards: Card[]\n}\n\nexport function playToText(play: Play): string {\n  return play.cards.map(cardToText).join('')\n}\n","import { DEBUG } from './const'\nimport { Card } from './models/Card'\nimport { A, K, NaturalRank, nextRank } from './models/const'\nimport { GameContext } from './models/GameContext'\nimport { Plan } from './models/Plan'\nimport {\n  Play,\n  PlayRankBombNTuple,\n  PlayRankNormal,\n  PlayType,\n} from './models/Play'\nimport { getNextSuit, Suit, SUIT_START } from './models/Suite'\n\nconst NEXT_PLAY_TYPE: { [T in PlayType]?: PlayType } = {\n  [PlayType.STRAIGHT_FLUSH]: PlayType.BOMB_N_TUPLE,\n  [PlayType.BOMB_N_TUPLE]: PlayType.PLATE,\n  [PlayType.PLATE]: PlayType.TUBE,\n  [PlayType.TUBE]: PlayType.STRAIGHT,\n  [PlayType.STRAIGHT]: PlayType.PAIR,\n  [PlayType.PAIR]: PlayType.TRIPLE,\n  [PlayType.TRIPLE]: undefined,\n} as const\nfunction nextPlayType(playType: PlayType): PlayType | undefined {\n  return NEXT_PLAY_TYPE[playType]\n}\ntype IteratorState = {\n  rank: NaturalRank\n  suit?: Suit\n  type: PlayType\n}\nexport const ITERATOR_STATE_START: IteratorState = {\n  rank: A,\n  suit: SUIT_START,\n  type: PlayType.STRAIGHT_FLUSH,\n}\nexport function nextIteratorState(\n  now: IteratorState,\n): IteratorState | undefined {\n  const next = nextRank(now.rank)\n  if (next != null) {\n    return {\n      ...now,\n      rank: next,\n    }\n  }\n  if (now.suit) {\n    console.assert(now.type === PlayType.STRAIGHT_FLUSH)\n    const nextSuit = getNextSuit(now.suit)\n    if (nextSuit != null) {\n      return {\n        ...now,\n        rank: A,\n        suit: nextSuit,\n      }\n    }\n  }\n  // next == null\n  const nextType = nextPlayType(now.type)\n  if (nextType != null) {\n    // Iterate the next type, and restart rank.\n    return {\n      ...now,\n      rank: A, // restart\n      type: nextType,\n      suit: undefined, // STRAIGHT_FLUSH is the only type with suit, so next type won't have suit\n    }\n  }\n  // nextType == null\n  return undefined\n}\n\nexport type PlanCollector = (plan: Plan) => void\n\nexport function iteratePlans({\n  cards,\n  collectPlan,\n  context: gameContext,\n}: {\n  cards: Card[]\n  collectPlan: PlanCollector\n  context: GameContext\n}) {\n  const cardsByRank = organize(cards, gameContext)\n  iterateImp({\n    cardsByRank,\n    context: {\n      collectPlan,\n      game: gameContext,\n      debug: DEBUG,\n    },\n  })\n}\n\ntype RankWildCard = 0\nconst WILD_CARD: RankWildCard = 0\ntype CardsByRank = { [R in NaturalRank | RankWildCard]?: Card[] }\nfunction organize(cards: Card[], context: GameContext): CardsByRank {\n  const organized: CardsByRank = {}\n  cards.forEach((card) => {\n    const rank = context.isWildCard(card) ? WILD_CARD : card.rank.natural\n    organized[rank] = organized[rank] || []\n    organized[rank]!.push(card)\n  })\n  return organized\n}\nexport const TEST_ONLY = { organize }\nfunction takeCard(\n  cards: CardsByRank, // Warning: this will mutate cards.\n  rank: NaturalRank,\n  count: number = 1,\n): Card[] | undefined {\n  console.assert(count >= 1)\n  const rankCards = cards[rank] || []\n  if (count <= rankCards.length) {\n    const taken = rankCards.slice(0, count)\n    cards[rank] = rankCards.slice(count)\n    return taken\n  }\n  const wildCards = cards[WILD_CARD]\n  const wildCardsNeeded = count - rankCards.length\n  if (!wildCards || wildCardsNeeded > wildCards.length) {\n    return undefined\n  }\n  const taken = rankCards.concat(wildCards.slice(0, wildCardsNeeded))\n  cards[rank] = []\n  cards[WILD_CARD] = wildCards.slice(wildCardsNeeded)\n  return taken\n}\nfunction takeCardBySuit(\n  cardsByRank: CardsByRank,\n  rank: NaturalRank,\n  suit: Suit,\n): Card | undefined {\n  const rankCards = cardsByRank[rank] || []\n  const index = rankCards.findIndex((card) => card.suit === suit)\n  if (index >= 0) {\n    cardsByRank[rank] = [...rankCards] // splice modifies the array, so copy it first\n    cardsByRank[rank]!.splice(index, 1)\n    return rankCards[index]\n  }\n  const wildCards = cardsByRank[WILD_CARD] || []\n  if (wildCards.length > 0) {\n    cardsByRank[WILD_CARD] = wildCards.slice(1)\n    return wildCards[0]\n  }\n  // not found\n  return undefined\n}\n\ntype IteratorContext = {\n  game: GameContext\n  collectPlan: PlanCollector\n  debug?: boolean\n}\n\ntype PlayTypeFunc = (args: {\n  cards: CardsByRank\n  nowRank: NaturalRank\n  nowSuit?: Suit\n  plan: Plan\n  context: IteratorContext\n}) => { cardsByRank: CardsByRank; plan: Plan } | undefined\nconst playCardsOfTheSameRank = (n: number): PlayTypeFunc => ({\n  cards,\n  nowRank,\n  plan,\n  context,\n}) => {\n  const newCards = { ...cards }\n  const taken = takeCard(newCards, nowRank, n)\n  if (taken == null) {\n    return undefined\n  }\n  const playRank: PlayRankBombNTuple | PlayRankNormal = {\n    type:\n      n === 2\n        ? PlayType.PAIR\n        : n === 3\n        ? PlayType.TRIPLE\n        : PlayType.BOMB_N_TUPLE,\n    rank: context.game.getOrder(nowRank),\n    cardCount: n,\n  }\n  return {\n    cardsByRank: newCards,\n    plan: {\n      score: plan.score + (n > 3 ? /* Bomb is free to play. */ 0 : 1),\n      plays: plan.plays.concat({\n        playRank,\n        cards: taken,\n      }),\n    },\n  }\n}\nconst playCardSequence = ({\n  cardCount,\n  length,\n  playType,\n}: {\n  cardCount: number\n  length: number\n  playType: PlayType.TUBE | PlayType.STRAIGHT | PlayType.PLATE\n}): PlayTypeFunc => ({ cards: cardsByRank, nowRank, plan, context }) => {\n  if (context.debug) {\n    console.log(`playCardSequence: ${JSON.stringify(cardsByRank)}, ${nowRank}`)\n  }\n  const end = nowRank + length - 1\n  if (end > K + 1) {\n    // This sequence is not possible, because it cannot go past A.\n    return undefined\n  }\n  let newCardsByRank = { ...cardsByRank }\n  let play: Play = {\n    cards: [],\n    playRank: { type: playType, rank: nowRank },\n  }\n  for (let i = nowRank; i <= end; ++i) {\n    const ii = i === K + 1 ? A : i\n    const taken = takeCard(newCardsByRank, ii, cardCount)\n    if (taken === null) {\n      return undefined\n    }\n    if (taken) {\n      play.cards.push(...taken)\n    }\n  }\n  return {\n    cardsByRank: newCardsByRank,\n    plan: {\n      score: plan.score + 1,\n      plays: plan.plays.concat(play),\n    },\n  }\n}\nconst playStraightFlush: PlayTypeFunc = ({\n  cards: cardsByRank,\n  nowRank,\n  nowSuit,\n  plan,\n  context,\n}) => {\n  if (context.debug) {\n    console.log(\n      `playStraightFlush: ${JSON.stringify(\n        cardsByRank,\n      )}, ${nowRank}, ${nowSuit}`,\n    )\n  }\n  if (!nowSuit) {\n    // playStraightFlush should always be called with suit\n    console.assert(nowSuit)\n    return undefined\n  }\n  const end = nowRank + 5 - 1\n  if (end > K + 1) {\n    // This sequence is not possible, because it cannot go past A.\n    return undefined\n  }\n  let newCardsByRank = { ...cardsByRank }\n  let play: Play = {\n    cards: [],\n    playRank: { type: PlayType.STRAIGHT_FLUSH, rank: nowRank },\n  }\n  for (let i = nowRank; i <= end; ++i) {\n    const ii = i === K + 1 ? A : i\n    const taken = takeCardBySuit(newCardsByRank, ii, nowSuit)\n    if (taken == null) {\n      // not found\n      return undefined\n    }\n    play.cards.push(taken)\n  }\n  return {\n    cardsByRank: newCardsByRank,\n    plan: {\n      score: plan.score + 0, // straight flush is a bomb\n      plays: plan.plays.concat(play),\n    },\n  }\n}\nconst playPair = playCardsOfTheSameRank(2)\nconst playTriple = playCardsOfTheSameRank(3)\nconst playBomb4 = playCardsOfTheSameRank(4)\nconst playBomb5 = playCardsOfTheSameRank(5)\nconst playBomb6 = playCardsOfTheSameRank(6)\nconst playBomb7 = playCardsOfTheSameRank(7)\nconst playBomb8 = playCardsOfTheSameRank(8)\nconst playFullHouse: PlayTypeFunc = ({ cards, nowRank, plan, context }) => {\n  const result = playTriple({ cards, nowRank, plan, context })\n  if (result == null) {\n    return undefined\n  }\n  const { cardsByRank: newCards, plan: newPlan } = result\n  const pairIndex = newPlan.plays.findIndex(\n    (play) => play.playRank.type === PlayType.PAIR,\n  )\n  if (pairIndex < 0) {\n    // No pairs left, cannot make a full house.\n    return undefined\n  }\n  const triplePlay = newPlan.plays[newPlan.plays.length - 1] as Play\n  const pairPlay = newPlan.plays[pairIndex]\n  // Remove pair and triple.\n  newPlan.plays = newPlan.plays\n    .slice(0, pairIndex)\n    .concat(newPlan.plays.slice(pairIndex + 1, newPlan.plays.length - 1))\n  // Push a full house.\n  newPlan.plays.push({\n    playRank: {\n      type: PlayType.FULL_HOUSE,\n      rank: (triplePlay.playRank as PlayRankNormal).rank,\n    },\n    cards: triplePlay.cards.concat(pairPlay.cards),\n  })\n  // Pair and triple becomes a full house, one fewer hand to play.\n  newPlan.score = newPlan.score - 1\n  return { plan: newPlan, cardsByRank: newCards }\n}\nexport const playStraight = playCardSequence({\n  cardCount: 1,\n  length: 5,\n  playType: PlayType.STRAIGHT,\n})\nconst playTube = playCardSequence({\n  cardCount: 2,\n  length: 3,\n  playType: PlayType.TUBE,\n})\nconst playPlate = playCardSequence({\n  cardCount: 3,\n  length: 2,\n  playType: PlayType.PLATE,\n})\nconst PLAY_TYPE_FUNC: { [T in PlayType]?: readonly PlayTypeFunc[] } = {\n  [PlayType.PAIR]: [playPair],\n  [PlayType.TRIPLE]: [playTriple, playFullHouse],\n  [PlayType.BOMB_N_TUPLE]: [\n    playBomb4,\n    playBomb5,\n    playBomb6,\n    playBomb7,\n    playBomb8,\n  ],\n  [PlayType.STRAIGHT]: [playStraight],\n  [PlayType.TUBE]: [playTube],\n  [PlayType.PLATE]: [playPlate],\n  [PlayType.STRAIGHT_FLUSH]: [playStraightFlush],\n} as const\n\nfunction iterateImp({\n  cardsByRank,\n  plan = { score: 0, plays: [] },\n  now = ITERATOR_STATE_START,\n  context,\n}: {\n  cardsByRank: CardsByRank\n  plan?: Plan\n  now?: IteratorState\n  context: IteratorContext\n}) {\n  if (context.debug) {\n    console.log(PlayType[now.type], now.rank, now.suit)\n  }\n  PLAY_TYPE_FUNC[now.type]?.forEach((func) => {\n    const result = func({\n      nowRank: now.rank,\n      nowSuit: now.suit,\n      cards: cardsByRank,\n      plan,\n      context,\n    })\n    if (result == null) {\n      return\n    }\n    iterateImp({ ...result, now, context })\n  })\n  const next = nextIteratorState(now)\n  if (next == null) {\n    // When we reach the last iterator state, the plan is ready to collect.\n    context.collectPlan(playRestOfCardsAsSingles(plan, cardsByRank))\n    return\n  }\n  // next != null\n  iterateImp({\n    now: next,\n    cardsByRank,\n    plan,\n    context,\n  })\n}\n\nfunction playRestOfCardsAsSingles(plan: Plan, cardsByRank: CardsByRank): Plan {\n  const resultPlan = { ...plan, plays: [...plan.plays] }\n  Object.entries(cardsByRank).forEach(([_, cards]) => {\n    if (!cards) {\n      return\n    }\n    resultPlan.score += cards.length\n    cards.forEach((card) => {\n      resultPlan.plays.push({\n        playRank: {\n          type: PlayType.SINGLE,\n          rank: card.rank.power,\n        },\n        cards: [card],\n      })\n    })\n  })\n  return resultPlan\n}\n","import {\n  NaturalRank,\n  PowerRank,\n  RED_JOKER,\n  BLACK_JOKER,\n  A,\n} from './models/const'\n\nexport function getUsualPowerRank(rank: NaturalRank): PowerRank {\n  switch (rank) {\n    case RED_JOKER:\n      return 14\n    case BLACK_JOKER:\n      return 13\n    case A:\n      return 12\n    default:\n      return (rank - 2) as PowerRank\n  }\n}\n","import { getUsualPowerRank } from '../utils'\nimport { Card } from './Card'\nimport {\n  BLACK_JOKER,\n  NaturalRank,\n  NaturalRankWithoutJokers,\n  PowerRank,\n  RED_JOKER,\n} from './const'\n\nexport class GameContext {\n  constructor(mainRank: NaturalRankWithoutJokers) {\n    this.mainRank = mainRank\n  }\n  /** Which rank is largest in current game play. */\n  readonly mainRank: NaturalRankWithoutJokers\n  /**\n   * Returns range[0, 14], power of the rank in this gameplay.\n   * The weakest is 0. The strongest (red joker) is 14.\n   */\n  getOrder(rank: NaturalRank): PowerRank {\n    if (rank === RED_JOKER) {\n      return 14\n    } else if (rank === BLACK_JOKER) {\n      return 13\n    } else if (rank === this.mainRank) {\n      return 12\n    } else {\n      const usualRank = getUsualPowerRank(rank)\n      const mainRankUsualRank = getUsualPowerRank(this.mainRank)\n      if (usualRank > mainRankUsualRank) {\n        return (usualRank - 1) as PowerRank\n      } else {\n        return usualRank as PowerRank\n      }\n    }\n  }\n\n  isWildCard(card: Card): boolean {\n    return card.rank.natural === this.mainRank && card.suit === 'H'\n  }\n}\n","import { A, K, Q } from './models/const'\nimport { Plan } from './models/Plan'\nimport { Play, PlayType } from './models/Play'\n\n// returns score, the smaller the better\nexport type Scorer = (plan: Plan) => number\nexport const handsScore: Scorer = (plan) => plan.score\nexport const MAX_SCORE = 1e100\n\nexport const heuristicScore: Scorer = (plan) => {\n  const scoreByPlayType: Partial<Record<PlayType, number>> = {}\n  plan.plays.forEach((play) => {\n    scoreByPlayType[play.playRank.type] =\n      scoreByPlayType[play.playRank.type] || 0\n    scoreByPlayType[play.playRank.type]! += heuristicScorePlay(play)\n  })\n  scoreByPlayType[PlayType.SINGLE] = cap(\n    scoreByPlayType[PlayType.SINGLE],\n    -3,\n    MAX_SCORE,\n  )\n  scoreByPlayType[PlayType.PAIR] = cap(scoreByPlayType[PlayType.PAIR], -2, 6)\n  scoreByPlayType[PlayType.TRIPLE] = cap(\n    scoreByPlayType[PlayType.TRIPLE],\n    -0.3,\n    6,\n  )\n  scoreByPlayType[PlayType.FULL_HOUSE] = cap(\n    scoreByPlayType[PlayType.FULL_HOUSE],\n    -1.3,\n    3,\n  )\n  scoreByPlayType[PlayType.STRAIGHT] = cap(\n    scoreByPlayType[PlayType.STRAIGHT],\n    -0.8,\n    1.5,\n  )\n  scoreByPlayType[PlayType.TUBE] = cap(scoreByPlayType[PlayType.TUBE], -0.3, 1)\n  scoreByPlayType[PlayType.PLATE] = cap(\n    scoreByPlayType[PlayType.PLATE],\n    -0.2,\n    0.3,\n  )\n  return (\n    Object.values(scoreByPlayType).reduce(\n      (sum, value) => (sum || 0) + (value || 0),\n    ) || 0\n  )\n}\n\nfunction heuristicScorePlay(play: Play) {\n  const playRank = play.playRank\n  switch (playRank.type) {\n    case PlayType.SINGLE:\n      switch (playRank.rank) {\n        case 14: // Red Joker\n          return -1\n        case 13: // Black Joker\n          return -0.8\n        default:\n          return linear({ x: 0, y: 1 }, { x: 12, y: -0.2 }, playRank.rank)\n      }\n    case PlayType.PAIR:\n      switch (playRank.rank) {\n        case 14: // Red Joker\n          return -1\n        case 13: // Black Joker\n          return -0.95\n        default:\n          // powerRank == 9 means J when A is main.\n          if (playRank.rank >= 9) {\n            return linear({ x: 9, y: 0 }, { x: 12, y: -0.9 }, playRank.rank)\n          } else {\n            return linear({ x: 9, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n          }\n      }\n    case PlayType.TRIPLE:\n      if (playRank.rank >= 9) {\n        return linear({ x: 9, y: 0 }, { x: 12, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 9, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n      }\n    case PlayType.FULL_HOUSE:\n      if (playRank.rank >= 8) {\n        return linear({ x: 8, y: 0 }, { x: 12, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 8, y: 0 }, { x: 0, y: 1 }, playRank.rank)\n      }\n    case PlayType.STRAIGHT:\n      if (playRank.rank >= 7) {\n        return linear({ x: 7, y: 0 }, { x: 10, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 7, y: 0 }, { x: A, y: 0.8 }, playRank.rank)\n      }\n    case PlayType.TUBE:\n      if (playRank.rank >= 8) {\n        return linear({ x: 8, y: 0 }, { x: Q, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 8, y: 0 }, { x: A, y: 0.5 }, playRank.rank)\n      }\n    case PlayType.PLATE:\n      if (playRank.rank >= 6) {\n        return linear({ x: 6, y: 0 }, { x: K, y: -1 }, playRank.rank)\n      } else {\n        return linear({ x: 6, y: 0 }, { x: A, y: 0.3 }, playRank.rank)\n      }\n    case PlayType.STRAIGHT_FLUSH:\n    case PlayType.BOMB_N_TUPLE:\n    case PlayType.FOUR_JOKER:\n      return -1\n    default:\n      throw new Error('Unknown play rank type')\n  }\n}\n\n// There's a straight line connecting start point and end point.\n// Returns the y value of queried x value.\nfunction linear(\n  start: { x: number; y: number },\n  end: { x: number; y: number },\n  x: number,\n) {\n  return ((end.y - start.y) / (end.x - start.x)) * (x - start.x) + start.y\n}\n\nfunction cap(x: number | undefined, min: number, max: number) {\n  if (x == null) {\n    return 0\n  }\n  if (x < min) {\n    return min\n  }\n  if (x > max) {\n    return max\n  }\n  return x\n}\n","import { MAX_PLANS } from './const'\nimport { iteratePlans } from './iterate'\nimport { parseCardRaw } from './models/Card'\nimport { CardRaw, NaturalRankWithoutJokers } from './models/const'\nimport { GameContext } from './models/GameContext'\nimport { Plan } from './models/Plan'\nimport { handsScore, heuristicScore, MAX_SCORE, Scorer } from './scorers'\n\nexport type Scorers = 'HANDS' | 'HEURISTICS'\n\nexport function calc({\n  cards: rawCards,\n  mainRank,\n  morePlans = true,\n  scorer = 'HANDS',\n}: {\n  cards: CardRaw[]\n  mainRank: NaturalRankWithoutJokers\n  morePlans?: boolean // not only return the best plan\n  scorer?: Scorers\n}): Plan[] {\n  const context = new GameContext(mainRank)\n  const cards = rawCards.map((rawCard) => parseCardRaw(rawCard, context))\n  const scorerFunc = scorer === 'HEURISTICS' ? heuristicScore : handsScore\n  if (morePlans) {\n    const planCollector = makeAllBestPlansCollector({ scorer: scorerFunc })\n    iteratePlans({ cards, collectPlan: planCollector.collectPlan, context })\n    const bestPlans = planCollector.getBestPlans()\n    if (bestPlans.length === 0) {\n      throw new Error('No plan found')\n    }\n    return bestPlans\n  } else {\n    const bestPlanCollector = makeBestPlanCollector({ scorer: scorerFunc })\n    iteratePlans({ cards, collectPlan: bestPlanCollector.collectPlan, context })\n    const bestPlan = bestPlanCollector.getBestPlan()\n    if (bestPlan == null) {\n      throw new Error('No plan found')\n    }\n    return [bestPlan]\n  }\n}\n\nconst makeBestPlanCollector = ({\n  scorer = handsScore,\n}: { scorer?: Scorer } = {}) => {\n  let bestPlan: Plan | undefined = undefined\n  let bestScore: number = MAX_SCORE\n  let count = 0\n  return {\n    collectPlan: (plan: Plan) => {\n      const currentScore = scorer(plan)\n      plan.score = currentScore\n      if (bestPlan == null || currentScore <= bestScore) {\n        bestPlan = plan\n        bestScore = currentScore\n      }\n      ++count\n      if (count > MAX_PLANS) {\n        throw new Error('too many plans')\n      }\n    },\n    getBestPlan: () => bestPlan,\n  }\n}\n\nconst makeAllBestPlansCollector = ({\n  scorer = handsScore,\n}: { scorer?: Scorer } = {}) => {\n  let bestPlans: Plan[] = []\n  let bestScore: number = MAX_SCORE\n  let count = 0\n  return {\n    collectPlan: (plan: Plan) => {\n      ++count\n      if (count > MAX_PLANS) {\n        throw new Error('too many plans')\n      }\n      const currentScore = scorer(plan)\n      plan.score = currentScore\n      if (bestPlans.length === 0) {\n        bestPlans.push(plan)\n        bestScore = currentScore\n      } else if (currentScore < bestScore) {\n        bestPlans = [plan]\n        bestScore = currentScore\n      } else if (currentScore === bestScore) {\n        bestPlans.push(plan)\n      } else {\n        // ignore non-best plans\n      }\n    },\n    getBestPlans: () => bestPlans,\n  }\n}\n","import { useQuery } from 'react-query'\nimport { NavigationProps } from './common/types'\nimport SolutionVisualization from './SolutionVisualization'\nimport { calc } from './strategy/strategy'\nimport { StrategyResult } from './useResultState'\n\nfunction ResultPage({ screenProps, navigation }: NavigationProps) {\n  const { rank, cards, windowSize } = screenProps\n  const args1 = {\n    cards,\n    mainRank: rank,\n    morePlans: true,\n    scorer: 'HEURISTICS' as const,\n  }\n  const { status: status1, data: plans1 } = useQuery(\n    ['calc', args1],\n    async () => {\n      await delay(500)\n      return calc(args1)\n    },\n  )\n  const args2 = {\n    cards,\n    mainRank: rank,\n    morePlans: true,\n    scorer: 'HANDS' as const,\n  }\n  const { status: status2, data: plans2 } = useQuery(\n    ['calc', args2],\n    async () => {\n      await delay(0)\n      return calc(args2)\n    },\n    { enabled: status1 === 'success' },\n  )\n  let strategyResult: StrategyResult[] = ['loading']\n  // TODO: handle error?\n  if (status1 === 'success') {\n    strategyResult = [{ title: '价值策略', plans: plans1! }]\n    if (status2 === 'loading') {\n      strategyResult.push('loading' as const)\n    } else if (status2 === 'success') {\n      strategyResult.push({ title: '手数策略', plans: plans2! })\n    }\n  }\n\n  return (\n    <SolutionVisualization\n      strategyResult={strategyResult}\n      rank={rank}\n      windowSize={windowSize}\n      onClose={navigation.goBack}\n    />\n  )\n}\nexport default ResultPage\n\nfunction delay(millis: number) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, millis)\n  })\n}\n","import { useState, useMemo, useEffect, useCallback } from 'react'\nimport { History } from 'history'\n\n// using internal state\nexport function useRouterState(defaultRoute: string) {\n  const [route, navigate] = useState(defaultRoute)\n  const navigation = useMemo(\n    () => ({\n      navigate,\n    }),\n    [navigate],\n  )\n  return {\n    route,\n    navigation,\n  }\n}\n\ninterface RouteConfig {\n  path: string\n  title: string\n}\n\ninterface RoutesConfig {\n  base: string\n  defaultRoute: string\n  routes: {\n    [route: string]: RouteConfig\n  }\n}\n\nexport const NOT_FOUND = 'NOT_FOUND'\nconst NOT_FOUND_CONFIG: RouteConfig = {\n  path: '/not-found',\n  title: 'Page Not Found',\n}\n\n// remove ending /\nfunction normalizePath(path: string) {\n  if (path.endsWith('/')) {\n    return path.substring(0, path.length - 1)\n  }\n\n  return path\n}\n\nexport function createBrowserRouterHook(\n  providedRoutesConfig: RoutesConfig,\n  history: History,\n) {\n  const routesConfig: RoutesConfig = {\n    ...providedRoutesConfig,\n    routes: { ...providedRoutesConfig.routes, [NOT_FOUND]: NOT_FOUND_CONFIG },\n  }\n  function getCurrentPath() {\n    const pathNowRaw = history.location.pathname\n    if (pathNowRaw.startsWith(routesConfig.base)) {\n      return normalizePath(pathNowRaw.substring(routesConfig.base.length))\n    }\n\n    return routesConfig.base + NOT_FOUND_CONFIG.path\n  }\n  function match(pathname: string) {\n    const [route, routeConfig] = Object.entries(routesConfig.routes).find(\n      ([_, routeConfig]) => routeConfig.path === pathname,\n    ) || [NOT_FOUND, NOT_FOUND_CONFIG]\n\n    return {\n      route,\n      routeConfig,\n    }\n  }\n\n  return function useBrowserRouterState() {\n    const [route, setRoute] = useState(match(getCurrentPath()).route)\n\n    useEffect(() => {\n      function historyEventHandler(location: any, action: any) {\n        // console.log(location)\n        // console.log(action)\n        // console.log(getCurrentPath())\n        // console.log(match(getCurrentPath()))\n        setRoute(match(getCurrentPath()).route)\n      }\n\n      // listen for all incoming navigations, returns function to unlisten the event handler\n      return history.listen(historyEventHandler)\n    }, [setRoute])\n\n    useEffect(() => {\n      window.document.title = routesConfig.routes[route].title\n    }, [])\n\n    // dispatch navigation action\n    const navigate = useCallback(\n      (routeToDispatch, { replace = false } = {}) => {\n        // check validity of the route, if not found, go to the NOT_FOUND page\n        routeToDispatch = routesConfig.routes[routeToDispatch]\n          ? routeToDispatch\n          : NOT_FOUND\n        const routeMatched = routesConfig.routes[routeToDispatch]\n\n        if (replace) {\n          history.replace(routesConfig.base + routeMatched.path)\n        } else {\n          history.push(routesConfig.base + routeMatched.path)\n        }\n      },\n      [routesConfig, NOT_FOUND_CONFIG],\n    )\n\n    return {\n      route,\n      title: routesConfig.routes[route].title,\n      navigation: {\n        navigate,\n        goBack: history.goBack,\n      },\n    }\n  }\n}\n","import { useState, useEffect } from 'react'\nimport { Dimensions } from 'react-native'\n\nexport type WindowSize = 'BIG' | 'SMALL'\nconst LARGE_SCREEN_LENGTH = 720\n\nfunction calcWindowSize(): WindowSize {\n  const { width, height } = Dimensions.get('window')\n  return width >= LARGE_SCREEN_LENGTH && height >= LARGE_SCREEN_LENGTH\n    ? 'BIG'\n    : 'SMALL'\n}\n\nexport function useWindowSize() {\n  const [size, setSize] = useState<WindowSize>(calcWindowSize)\n  useEffect(() => {\n    function handleWindowSizeChange() {\n      setSize(calcWindowSize())\n    }\n    Dimensions.addEventListener('change', handleWindowSizeChange)\n    // unsubscribe when effect destroyed\n    return () =>\n      Dimensions.removeEventListener('change', handleWindowSizeChange)\n  }, [setSize])\n  return size\n}\n","/// <reference path=\"lib.d.ts\"/>\n\nimport createHistory from 'history/createBrowserHistory'\nimport React, { FunctionComponent, useState } from 'react'\nimport { StyleProp, StyleSheet, Text, View, ViewStyle } from 'react-native'\nimport { TransitionGroup } from 'react-transition-group'\nimport { NavigationProps } from './common/types'\nimport { Fade } from './Fade'\nimport Home from './Home'\nimport ResultPage from './ResultPage'\nimport { A, NaturalRankWithoutJokers } from './strategy/models/const'\nimport { useCardState } from './useCardState'\nimport { useResultState } from './useResultState'\nimport { createBrowserRouterHook } from './useRouterState'\nimport { useWindowSize } from './useWindowSize'\nimport { QueryClient, QueryClientProvider } from 'react-query'\n\ninterface AppNavigatorProps extends NavigationProps {\n  route: string\n  style?: StyleProp<ViewStyle>\n}\nconst styles = StyleSheet.create({\n  absoluteChild: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  },\n})\n\nconst routes = {\n  Home,\n  Result: ResultPage,\n}\nconst AppNavigator: FunctionComponent<AppNavigatorProps> = ({\n  route: currentRoute,\n  navigation,\n  screenProps,\n  style,\n}) => {\n  return (\n    <>\n      <TransitionGroup>\n        {Object.entries(routes).map(([route, RouteComponent]) => {\n          if (route !== currentRoute) return null\n\n          return (\n            <Fade\n              key={route}\n              style={[styles.absoluteChild, style]}\n              timeout={300}\n            >\n              <RouteComponent\n                screenProps={screenProps}\n                navigation={navigation}\n              />\n            </Fade>\n          )\n        })}\n      </TransitionGroup>\n    </>\n  )\n}\n\nconst routesConfig = {\n  base: process.env.REACT_APP_BASE_URL || '',\n  defaultRoute: 'Home',\n  routes: {\n    Home: {\n      path: '',\n      title: '掼蛋拆牌计算器',\n    },\n    Result: {\n      path: '/result',\n      title: '掼蛋拆牌计算器',\n    },\n  },\n}\nconst history = createHistory()\n\nconst useRouterState = createBrowserRouterHook(routesConfig, history)\n\nfunction App() {\n  const [rank, setRank] = useState<NaturalRankWithoutJokers>(A)\n  const cardStateProps = useCardState()\n  const resultProps = useResultState()\n  const { route, navigation } = useRouterState()\n  const windowSize = useWindowSize()\n  console.log(cardStateProps)\n  return (\n    <View\n      style={{\n        flex: 1,\n        backgroundColor: 'lightblue',\n        height: '100%',\n      }}\n    >\n      <View style={{ height: '100%' }}>\n        <Text style={{ fontSize: 14 }}>掼蛋拆牌计算器</Text>\n        <View style={{ flex: 1 }}>\n          <AppNavigator\n            route={route}\n            screenProps={{\n              rank,\n              setRank,\n              ...cardStateProps,\n              ...resultProps,\n              windowSize,\n            }}\n            navigation={navigation}\n            style={{\n              flex: 1,\n            }}\n          />\n        </View>\n      </View>\n    </View>\n  )\n}\n\n// Create a client\nconst queryClient = new QueryClient()\nconst EnhancedApp = () => (\n  <QueryClientProvider client={queryClient}>\n    <App />\n  </QueryClientProvider>\n)\n\nexport default EnhancedApp\n","import { useCallback, useState } from 'react'\nimport { generateRandomHands } from './common/cardUtils'\nimport { CardState } from './common/types'\nimport { CardRaw } from './strategy/models/const'\n\nexport function useCardState(): CardState {\n  const [cards, setCards] = useState<CardRaw[]>([])\n  const [allCards, setAllCards] = useState<CardRaw[][]>([[], [], [], []])\n  const clearCards = useCallback(() => setCards([]), [setCards])\n  const addCard = useCallback(\n    (card) => setCards((cardsNow) => cardsNow.concat(card)),\n    [setCards],\n  )\n  const randomCards = useCallback(() => setAllCards(generateRandomHands()), [\n    setCards,\n  ])\n  const deleteLastCard = useCallback(\n    () => setCards((cardsNow) => cardsNow.slice(0, cardsNow.length - 1)),\n    [setCards],\n  )\n  return {\n    cards,\n    allCards,\n    clearCards,\n    addCard,\n    randomCards,\n    deleteLastCard,\n  }\n}\n","import { useState } from 'react'\nimport { Plan } from './strategy/models/Plan'\n\nexport type StrategyResult = null | 'loading' | { title: string; plans: Plan[] }\nexport interface ResultProps {\n  strategyResult: StrategyResult[]\n  setResult: (result: StrategyResult[]) => void\n}\nexport const useResultState = () => {\n  const [strategyResult, setResult] = useState<StrategyResult[]>([])\n  return {\n    strategyResult,\n    setResult,\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { AppRegistry } from 'react-native'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nAppRegistry.registerComponent('App', () => App)\nAppRegistry.runApplication('App', {\n  rootTag: document.getElementById('root'),\n})\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register({\n  onSuccess: () => console.log('service worker loaded successfully'),\n  onUpdate: () => console.log('service worker is updated'),\n})\n\nfunction removeWechatGuidance() {\n  const guidanceNode = window.document.getElementById('wechat-guidance')\n  if (guidanceNode) {\n    const parentNode = guidanceNode.parentNode\n    if (parentNode) {\n      parentNode.removeChild(guidanceNode)\n    }\n  }\n}\n\nremoveWechatGuidance()\n"],"sourceRoot":""}